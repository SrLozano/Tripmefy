{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/bienvenida/bienvenida.component.ts","webpack:///src/app/bienvenida/bienvenida.component.html","webpack:///src/app/carousel/carousel.component.ts","webpack:///src/app/carousel/carousel.component.html","webpack:///src/app/inicio-sesion/inicio-sesion.component.ts","webpack:///src/app/inicio-sesion/inicio-sesion.component.html","webpack:///src/app/interfaces/opiniones.ts","webpack:///src/app/interfaces/solicitud.ts","webpack:///src/app/interfaces/usuario.ts","webpack:///src/app/interfaces/viaje.ts","webpack:///src/app/logros/logros.component.ts","webpack:///src/app/logros/logros.component.html","webpack:///src/app/not-found404/not-found404.component.ts","webpack:///src/app/not-found404/not-found404.component.html","webpack:///src/app/page1/page1.component.ts","webpack:///src/app/page1/page1.component.html","webpack:///src/app/perfiles/perfil-organizador/perfil-organizador.component.ts","webpack:///src/app/perfiles/perfil-organizador/perfil-organizador.component.html","webpack:///src/app/perfiles/perfil-viajero/perfil-viajero.component.ts","webpack:///src/app/perfiles/perfil-viajero/perfil-viajero.component.html","webpack:///src/app/privacidad/privacidad.component.ts","webpack:///src/app/privacidad/privacidad.component.html","webpack:///src/app/pruebas/pruebas.component.ts","webpack:///src/app/pruebas/pruebas.component.html","webpack:///src/app/registro/registro.component.ts","webpack:///src/app/registro/registro.component.html","webpack:///src/app/services/auth.service.ts","webpack:///src/app/services/firestore/firestore.service.ts","webpack:///src/app/services/firestore/opiniones-firestore.service.ts","webpack:///src/app/services/firestore/solicitud-firestore.service.ts","webpack:///src/app/services/firestore/usuario-firestore.service.ts","webpack:///src/app/shared/boton/boton.component.ts","webpack:///src/app/shared/boton/boton.component.html","webpack:///src/app/shared/comentario-pu/comentario-pu.component.ts","webpack:///src/app/shared/comentario-pu/comentario-pu.component.html","webpack:///src/app/shared/edicion-pu/edicion-pu.component.ts","webpack:///src/app/shared/edicion-pu/edicion-pu.component.html","webpack:///src/app/shared/footer/footer.component.ts","webpack:///src/app/shared/footer/footer.component.html","webpack:///src/app/shared/header/header.component.ts","webpack:///src/app/shared/header/header.component.html","webpack:///src/app/shared/mensaje/mensaje.component.ts","webpack:///src/app/shared/mensaje/mensaje.component.html","webpack:///src/app/shared/pedir-imagen/pedir-imagen.component.ts","webpack:///src/app/shared/pedir-imagen/pedir-imagen.component.html","webpack:///src/app/shared/puntuacion-pu/puntuacion-pu.component.ts","webpack:///src/app/shared/puntuacion-pu/puntuacion-pu.component.html","webpack:///src/app/shared/scroll-top/scroll-top.component.ts","webpack:///src/app/shared/scroll-top/scroll-top.component.html","webpack:///src/app/shared/volver/volver.component.ts","webpack:///src/app/shared/volver/volver.component.html","webpack:///src/app/viajes/crear-viaje/crear-viaje.component.ts","webpack:///src/app/viajes/crear-viaje/crear-viaje.component.html","webpack:///src/app/viajes/mis-viajes/mis-viajes.component.ts","webpack:///src/app/viajes/mis-viajes/mis-viajes.component.html","webpack:///src/app/viajes/unirse-ciudad/unirse-ciudad.component.ts","webpack:///src/app/viajes/unirse-ciudad/unirse-ciudad.component.html","webpack:///src/app/viajes/unirse-continente/unirse-continente.component.ts","webpack:///src/app/viajes/unirse-continente/unirse-continente.component.html","webpack:///src/app/viajes/unirse-pais/unirse-pais.component.ts","webpack:///src/app/viajes/unirse-pais/unirse-pais.component.html","webpack:///src/app/viajes/viaje/viaje.component.ts","webpack:///src/app/viajes/viaje/viaje.component.html","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","component","pathMatch","redirectTo","AppRoutingModule","forRoot","imports","AppComponent","title","selector","templateUrl","styleUrls","AppModule","initializeApp","firebase","declarations","providers","bootstrap","BienvenidaComponent","textoMotivacion","textoAccion","textoViajero","textoOrganizador","localStorage","getItem","clear","console","log","pagInicio","window","location","origin","assign","usuario","organizador","CarouselComponent","_activatedRoute","route","currentSlide","primero","segundo","previous","slides","length","next","links","undefined","destino","navigate","onPreviousClick","onNextClick","opacity","animations","InicioSesionComponent","authSvc","userService","hide","form","email","password","loginByEmail","getUsuariosByEmail","subscribe","res","i","setItem","tipo","test","back","onLogin","Puntuacion","o","Object","Comentario","Solicitud","Usuario","Viaje","Slides","LogrosComponent","logros","NotFound404Component","titulo","Page1Component","PerfilOrganizadorComponent","_route","_router","storage","firestoreServiceUser","firestoreServiceViaje","firestoreServiceOpiniones","zone","myUrl","descripcion","susViajes","src","stars","Arr","Array","maxStars","emptystars","comentarios","tuplasComentario","nuevaFoto","nuevaDescripcion","permisoOpinar","permisoEditar","usuarios","reload","scrollTo","visitanteId","document","getElementById","style","display","cerrado","puntos","puntuacion","toString","puntuador","puntuado","snapshot","paramMap","get","createPuntuacion","comment","comentario","comentador","comentado","createComentario","foto","image","desc","signal","actualizar","ubicacion","nombre","apellidos","estrellas","updateUsuario","userId","params","usuarioAux","getUsuario","elem","getPuntuacionesFiltered","media","parseInt","Math","round","getComentariosFiltered","push","img","idUser","contador","n","getViajesByEmail","activarOpiniones","activarEdicion","cerrar","newPuntuacion","newComentario","setDescripcion","setFoto","uploadUser","PerfilViajeroComponent","firestoreServiceSolicitud","susViajesId","getSolicitudesByUserId","viajes","idViaje","estado","getViaje","PrivacidadComponent","el","scrollIntoView","behavior","scroll","PruebasComponent","firestoreService","viaje","pais","ciudad","continente","createViaje","crearViaje","MyErrorStateMatcher","control","isSubmitted","submitted","invalid","dirty","touched","RegistroComponent","authService","checked","labelPosition","apellido","password2","poblacion","terminos","emailFormControl","required","nombreFormControl","apellidoFormControl","poblacionFormControl","paisFormControl","passwordFormControl","password2FormControl","matcher","error","color","registerUser","MaysPrimera","toLowerCase","createUsuario","err","localeCompare","string","charAt","toUpperCase","slice","onRegister","AuthService","afAuth","userData","authState","reject","createUserWithEmailAndPassword","user","signInWithEmailAndPassword","signOut","providedIn","FirestoreService","firestore","db","afs","collection","sli","data","createId","unidas","doc","set","r","toPromise","valueChanges","ref","orderBy","where","nombreArchivo","datos","upload","OpinionesFirestoreService","com","pun","contacto","SolicitudFirestoreService","solicitud","UsuarioFirestoreService","BotonComponent","texto","ComentarioPuComponent","miComentario","emit","getComentario","EdicionPuComponent","newDescripcion","miFoto","cerrarPopup","setImagen","chooseImagen","save","FooterComponent","HeaderComponent","dialog","menuOpen","solicitudes","numberOfSolicitudes","mensajes","numberOfMensajes","isViajero","a√±adir","kk","idSolicitud","nombreViaje","j","organizadorEmail","getSolicitudesByOrganizadorEmail","idViajero","idUsuario","perfil","ruta","logOut","splice","new_solicitud","getSolicitud","updateSolicitud","getSolicitudesByTripId","toInicio","onLogout","irPerfil","irAboutUs","showMenuMovil","close","close1","MensajeComponent","imagen","PedirImagenComponent","url","random","substring","file","target","files","filePath","directiva","getFileRef","task","storageFile","uploadPercent","percentageChanges","snapshotChanges","pipe","urlImage","getDownloadURL","inputImageUser","nativeElement","value","alert","doCerrar","onUpload","PuntuacionPuComponent","estable","getPuntuacion","ScrollTopComponent","pageYOffset","documentElement","scrollTop","body","navIsFixed","smoothscroll","currentScroll","requestAnimationFrame","scrollToTop","VolverComponent","CrearViajeComponent","viajeService","continentes","europa","asia","americaNorte","americaSur","americaCentro","oceania","africa","paises","continenteSelect","paisSelect","ciudadSelect","startDate","endDate","limitDate","limitPayDate","telefono","prefijo","item","precio","maxpers","vuelo","alojamiento","comidas","getUsuariosFiltered","newViaje","fin","inicio","limitePago","limiteUnion","maximo","tlf","servicios","viajeros","onCreate","MisViajesComponent","estePais","escogidas","buscar","ciudadesId","ciudades","myciudad","selec","filtro","includes","substr","busqueda","filtrar","UnirseCiudadComponent","search_texto","search_tipo","misViajes","s_viajes","getViajesSorted","getViajesFiltered","iterado","duracion","unsubscribe","UnirseContinenteComponent","clickMessage","UnirsePaisComponent","escogidos","elegido","numContinente","deviceValue","identificador","onChange","ViajeComponent","slides3","usuarios_viaje","img_usuarios_viaje","show","payButton","alreadyPaid","pendienteButton","idOrganizador","createSolicitud","tripId","tripAux","tripAux2","getSlides","nombreOrganizador","showButtonJoin","getUsuarios","String","updateViaje","environment","production","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","bootstrapModule"],"mappings":";;;;;;;;;;;;;;;;;AAAA,aAASA,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,aAAOC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAW;AACxC,YAAIC,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,SAAC,CAACE,IAAF,GAAS,kBAAT;AACA,cAAMF,CAAN;AACA,OAJM,CAAP;AAKA;;AACDL,4BAAwB,CAACQ,IAAzB,GAAgC,YAAW;AAAE,aAAO,EAAP;AAAY,KAAzD;;AACAR,4BAAwB,CAACG,OAAzB,GAAmCH,wBAAnC;AACAS,UAAM,CAACC,OAAP,GAAiBV,wBAAjB;AACAA,4BAAwB,CAACW,EAAzB,GAA8B,yCAA9B;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAoBA,QAAMC,MAAM,GAAW,CACrB;AAACC,UAAI,EAAC,OAAN;AAAeC,eAAS,EAAC;AAAzB,KADqB,EAErB;AAACD,UAAI,EAAC,eAAN;AAAuBC,eAAS,EAAC;AAAjC,KAFqB,EAGrB;AAACD,UAAI,EAAC,UAAN;AAAkBC,eAAS,EAAC;AAA5B,KAHqB,EAIrB;AAACD,UAAI,EAAC,wBAAN;AAAgCC,eAAS,EAAC;AAA1C,KAJqB,EAKrB;AAACD,UAAI,EAAC,oBAAN;AAA4BC,eAAS,EAAC;AAAtC,KALqB,EAMrB;AAACD,UAAI,EAAC,aAAN;AAAqBC,eAAS,EAAC;AAA/B,KANqB,EAOrB;AAACD,UAAI,EAAC,YAAN;AAAoBC,eAAS,EAAC;AAA9B,KAPqB,EAQrB;AAACD,UAAI,EAAC,mBAAN;AAA2BC,eAAS,EAAC;AAArC,KARqB,EASrB;AAACD,UAAI,EAAC,aAAN;AAAqBC,eAAS,EAAC;AAA/B,KATqB,EAUrB;AAACD,UAAI,EAAC,mBAAN;AAA2BC,eAAS,EAAC;AAArC,KAVqB,EAWrB;AAACD,UAAI,EAAC,WAAN;AAAmBC,eAAS,EAAC;AAA7B,KAXqB,EAYrB;AAACD,UAAI,EAAC,YAAN;AAAoBC,eAAS,EAAC;AAA9B,KAZqB,EAarB;AAACD,UAAI,EAAC,cAAN;AAAsBC,eAAS,EAAE;AAAjC,KAbqB,EAcrB;AAACD,UAAI,EAAC,QAAN;AAAgBC,eAAS,EAAE;AAA3B,KAdqB,EAerB;AAACD,UAAI,EAAC,YAAN;AAAoBC,eAAS,EAAE;AAA/B,KAfqB,EAgBrB;AAACD,UAAI,EAAC,cAAN;AAAsBC,eAAS,EAAE;AAAjC,KAhBqB,EAiBrB;AAACD,UAAI,EAAC,SAAN;AAAiBC,eAAS,EAAE;AAA5B,KAjBqB,EAkBrB;AAACD,UAAI,EAAC,IAAN;AAAYE,eAAS,EAAE,MAAvB;AAA+BC,gBAAU,EAAE;AAA3C,KAlBqB,CAAvB;;QA0BaC,gB;;;;;YAAAA;;;;yBAAAA,gB;AAAgB,O;AAAA,gBAHlB,CAAC,6DAAaC,OAAb,CAAqBN,MAArB,CAAD,CAGkB,EAFjB,4DAEiB;;;;0HAAhBK,gB,EAAgB;AAAA;AAAA,kBAFjB,4DAEiB;AAAA,O;AAFL,K;;;;;sEAEXA,gB,EAAgB;cAJ5B,sDAI4B;eAJnB;AACRE,iBAAO,EAAE,CAAC,6DAAaD,OAAb,CAAqBN,MAArB,CAAD,CADD;AAERF,iBAAO,EAAE,CAAC,4DAAD;AAFD,S;AAImB,Q;;;;;;;;;;;;;;;;;;AC9C7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaU,Y,GALb;AAAA;;AAME,WAAAC,KAAA,GAAQ,UAAR;AACD,K;;;uBAFYD,Y;AAAY,K;;;YAAZA,Y;AAAY,+B;AAAA,c;AAAA,a;AAAA,wC;AAAA;AAAA;ACPzB;;AACE;;AACF;;;;;;;;;sEDKaA,Y,EAAY;cALxB,uDAKwB;eALd;AACTE,kBAAQ,EAAE,UADD;AAETC,qBAAW,EAAE,sBAFJ;AAGTC,mBAAS,EAAE,CAAC,sBAAD;AAHF,S;AAKc,Q;;;;;;;;;;;;;;;;;;AEPzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,qD,CAaA;;;QAmJaC,S;;;;;YAAAA,S;AAAS,kBAFR,4DAEQ;;;;yBAATA,S;AAAS,O;AAAA,iBAHT,E;AAAE,gBAvCJ,CAEP,iEAAkBC,aAAlB,CAAgC,uEAAYC,QAA5C,CAFO,EAGP,6DAHO,EAIP,+EAJO,EAKP,yEALO,EAMP,+EANO,EAQP,yEAAiBT,OAAjB,EARO,EASP,qEAAcA,OAAd,EATO,EAUP,iEAAYA,OAAZ,EAVO,EAYP,uEAZO,EAaP,0DAbO,EAcP,qEAdO,EAeP,6FAfO,EAgBP,0DAhBO,EAiBP,wEAjBO,EAkBP,oEAlBO,EAmBP,wEAnBO,EAoBP,gFApBO,EAqBP,uEArBO,EAsBP,+EAtBO,EAuBP,oEAvBO,EAwBP,uEAxBO,EAyBP,wEAzBO,EA0BP,uEA1BO,EA2BP,6EA3BO,EA4BP,yEA5BO,EA6BP,uEA7BO,EA8BP,+EA9BO,EA+BP,8EA/BO,EAgCP,2EAhCO,EAiCP,2EAjCO,EAkCP,4FAlCO,EAmCP,qEAnCO,EAoCP,6DApCO,CAuCI;;;;0HAGFO,S,EAAS;AAAA,uBA5ElB,4DA4EkB,EA3ElB,6FA2EkB,EA1ElB,0FA0EkB,EAzElB,sEAyEkB,EAxElB,qFAwEkB,EAvElB,+EAuEkB,EAtElB,gFAsEkB,EArElB,gFAqEkB,EApElB,qHAoEkB,EAnElB,yGAmEkB,EAlElB,8FAkEkB,EAjElB,2FAiEkB,EAhElB,oGAgEkB,EA/DlB,gHA+DkB,EA9DlB,8FA8DkB,EA7DlB,6EA6DkB,EA5DlB,+EA4DkB,EA3DlB,gFA2DkB,EA1DlB,yEA0DkB,EAzDlB,qFAyDkB,EAxDlB,gFAwDkB,EAtDlB,2FAsDkB,EApDlB,6EAoDkB,EAlDlB,iGAkDkB,EAhDlB,4EAgDkB,EA/ClB,oGA+CkB,EA9ClB,oGA8CkB,EA7ClB,2FA6CkB,EA5ClB,mFA4CkB;AA5CF,oFAKhB,6DALgB,EAMhB,+EANgB,EAOhB,yEAPgB,EAQhB,+EARgB,EAQQ,wEARR,EAQQ,oEARR,EAQQ,gEARR,EAchB,uEAdgB,EAehB,0DAfgB,EAgBhB,qEAhBgB,EAiBhB,6FAjBgB,EAkBhB,0DAlBgB,EAmBhB,wEAnBgB,EAoBhB,oEApBgB,EAqBhB,wEArBgB,EAsBhB,gFAtBgB,EAuBhB,uEAvBgB,EAwBhB,+EAxBgB,EAyBhB,oEAzBgB,EA0BhB,uEA1BgB,EA2BhB,wEA3BgB,EA4BhB,uEA5BgB,EA6BhB,6EA7BgB,EA8BhB,yEA9BgB,EA+BhB,uEA/BgB,EAgChB,+EAhCgB,EAiChB,8EAjCgB,EAkChB,2EAlCgB,EAmChB,2EAnCgB,EAoChB,4FApCgB,EAqChB,qEArCgB,EAsChB,6DAtCgB;AA4CE,O;AANN,K;;;;;sEAMHA,S,EAAS;cA9ErB,sDA8EqB;eA9EZ;AACRG,sBAAY,EAAE,CACZ,4DADY,EAEZ,6FAFY,EAGZ,0FAHY,EAIZ,sEAJY,EAKZ,qFALY,EAMZ,+EANY,EAOZ,gFAPY,EAQZ,gFARY,EASZ,qHATY,EAUZ,yGAVY,EAWZ,8FAXY,EAYZ,2FAZY,EAaZ,oGAbY,EAcZ,gHAdY,EAeZ,8FAfY,EAgBZ,6EAhBY,EAiBZ,+EAjBY,EAkBZ,gFAlBY,EAmBZ,yEAnBY,EAoBZ,qFApBY,EAqBZ,gFArBY,EAuBZ,2FAvBY,EAyBZ,6EAzBY,EA2BZ,iGA3BY,EA6BZ,4EA7BY,EA8BZ,oGA9BY,EA+BZ,oGA/BY,EAgCZ,2FAhCY,EAiCZ,mFAjCY,CADN;AAoCRT,iBAAO,EAAE,CAEP,iEAAkBO,aAAlB,CAAgC,uEAAYC,QAA5C,CAFO,EAGP,6DAHO,EAIP,+EAJO,EAKP,yEALO,EAMP,+EANO,EAQP,yEAAiBT,OAAjB,EARO,EASP,qEAAcA,OAAd,EATO,EAUP,iEAAYA,OAAZ,EAVO,EAYP,uEAZO,EAaP,0DAbO,EAcP,qEAdO,EAeP,6FAfO,EAgBP,0DAhBO,EAiBP,wEAjBO,EAkBP,oEAlBO,EAmBP,wEAnBO,EAoBP,gFApBO,EAqBP,uEArBO,EAsBP,+EAtBO,EAuBP,oEAvBO,EAwBP,uEAxBO,EAyBP,wEAzBO,EA0BP,uEA1BO,EA2BP,6EA3BO,EA4BP,yEA5BO,EA6BP,uEA7BO,EA8BP,+EA9BO,EA+BP,8EA/BO,EAgCP,2EAhCO,EAiCP,2EAjCO,EAkCP,4FAlCO,EAmCP,qEAnCO,EAoCP,6DApCO,CApCD;AA2ERW,mBAAS,EAAE,EA3EH;AA4ERC,mBAAS,EAAE,CAAC,4DAAD;AA5EH,S;AA8EY,Q;;;;;;;;;;;;;;;;;;AChKtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACKY;;AACI;;AACJ;;;;;;AACA;;AACI;;AACJ;;;;;;;;QDHCC,mB;;;AAEX,qCAAc;AAAA;;AAEd,aAAAC,eAAA,GAAkB,EAAlB;AACA,aAAAC,WAAA,GAAc,EAAd;AAGA,aAAAC,YAAA,GAAe,CACb;AACE,wBAAc,inBADhB;AAEE,oBAAU;AAFZ,SADa,CAAf;AASA,aAAAC,gBAAA,GAAmB,CACjB;AACE,wBAAc,iuBADhB;AAEE,oBAAU;AAFZ,SADiB,CAAnB;AAfiB;;;;mCAuBT;AAEN;;AAEA;AAEA;AACA;;AAEA;;AAEA,cAAIC,YAAY,CAACC,OAAb,CAAqB,SAArB,KAAiC,IAArC,EAA0C;AACxCD,wBAAY,CAACE,KAAb;AACAC,mBAAO,CAACC,GAAR,CAAY,oBAAZ;AACA,gBAAIC,SAAS,GAAGC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB,QAAzC;AACAF,kBAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBJ,SAAvB;AACD;;AAID,cAAIK,OAAO,GAAGV,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAd;AAEA;;AACA,kBAAOS,OAAP;AACE,iBAAK,SAAL;AACE,mBAAKd,eAAL,GAAuB,KAAKE,YAAL,CAAkB,CAAlB,EAAqB,YAArB,CAAvB;AACA,mBAAKD,WAAL,GAAmB,KAAKC,YAAL,CAAkB,CAAlB,EAAqB,QAArB,CAAnB;AACA,mBAAKa,WAAL,GAAmB,KAAnB;AACA;;AACF,iBAAK,aAAL;AACA,mBAAKf,eAAL,GAAuB,KAAKG,gBAAL,CAAsB,CAAtB,EAAyB,YAAzB,CAAvB;AACA,mBAAKF,WAAL,GAAmB,KAAKE,gBAAL,CAAsB,CAAtB,EAAyB,QAAzB,CAAnB;AACA,mBAAKY,WAAL,GAAmB,IAAnB;AACE;;AACF;AACA,mBAAKf,eAAL,GAAuB,KAAKE,YAAL,CAAkB,CAAlB,EAAqB,YAArB,CAAvB;AACA,mBAAKD,WAAL,GAAmB,KAAKC,YAAL,CAAkB,CAAlB,EAAqB,QAArB,CAAnB;AACE;AAdJ;AAkBD;;;;;;;uBAlEUH,mB;AAAmB,K;;;YAAnBA,mB;AAAmB,qC;AAAA,e;AAAA,a;AAAA,ysB;AAAA;AAAA;ACPhC;;AACA;;AACI;;AACI;;AAAI;;AAAc;;AAClB;;AACI;;AAGA;;AAGA;;AAAG;;AAAmB;;AAC1B;;AACA;;AACI;;AAAI;;AAAe;;AAEnB;;AACJ;;AACJ;;AACJ;;;;AAdsC;;AAAA;;AAGI;;AAAA;;AAG3B;;AAAA;;AAGC;;AAAA;;AAEwB;;AAAA;;;;;;;;;sEDT3BA,mB,EAAmB;cAL/B,uDAK+B;eALrB;AACTT,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,6BAAD;AAHF,S;AAKqB,Q;;;;;;;;;;;;;;;;;;;;AEPhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACKM;;AAGE;AAAA;;AAAA;;AAAA;AAAA;;AAHF;;;;;;AAEE,qJAAiB,oBAAjB,EAAiB,SAAjB;;;;;;AAHJ;;AACE;;AAOF;;;;;;;;AANI;;AAAA;;;;QDgBKwB,iB;;;AAiBX,iCAAoBC,eAApB,EACUC,KADV,EACyB;AAAA;;AADL,aAAAD,eAAA,GAAAA,eAAA;AACV,aAAAC,KAAA,GAAAA,KAAA;AAdV,aAAAC,YAAA,GAAe,CAAf;AACA;;;;;;;;;;AASA,aAAAC,OAAA,GAAU,EAAV;AACA,aAAAC,OAAA,GAAU,EAAV;AAKC;;;;0CAEiB;AAChB,cAAMC,QAAQ,GAAG,KAAKH,YAAL,GAAoB,CAArC;AACA,eAAKA,YAAL,GAAoBG,QAAQ,GAAG,CAAX,GAAe,KAAKC,MAAL,CAAYC,MAAZ,GAAqB,CAApC,GAAwCF,QAA5D,CAFgB,CAGhB;AAGD;;;sCAEa;AACZ,cAAMG,IAAI,GAAG,KAAKN,YAAL,GAAoB,CAAjC;AACA,eAAKA,YAAL,GAAoBM,IAAI,KAAK,KAAKF,MAAL,CAAYC,MAArB,GAA8B,CAA9B,GAAkCC,IAAtD,CAFY,CAGZ;AAED;;;kCAEM;AAEL,cAAG,KAAKC,KAAL,IAAcC,SAAd,IAA2B,KAAKD,KAAL,CAAWF,MAAX,IAAqB,CAAnD,EAAqD;AACnD;AACA,mBAAO,CAAP;AACD,WAHD,MAGK;AACF;AAEA,gBAAIZ,MAAM,GAAGF,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB,GAAtC,CAHE,CAGyC;AAE5C;AACA;;AAEA,gBAAIQ,OAAO,GAAG,MAAM,KAAKM,KAAL,CAAW,KAAKP,YAAhB,EAA8B,CAA9B,CAAN,GAAyC,GAAvD,CARG,CAQyD;;AAC5D,gBAAIE,OAAO,GAAG,KAAKK,KAAL,CAAW,KAAKP,YAAhB,EAA8B,CAA9B,CAAd,CATG,CAUH;;AACA,iBAAKC,OAAL,GAAeA,OAAf;AACA,iBAAKC,OAAL,GAAeA,OAAf;AAGA,gBAAIO,OAAO,GAAGR,OAAO,GAAGC,OAAxB;AAEA,iBAAKH,KAAL,CAAWW,QAAX,CAAoB,CAACD,OAAD,CAApB;AACD;AAEF;;;mCAIO,CAEP;;;;;;;uBApEUZ,iB,EAAiB,+H,EAAA,uH;AAAA,K;;;YAAjBA,iB;AAAiB,+B;AAAA;AAAA;AAAA;AAAA,O;AAAA,c;AAAA,a;AAAA,gQ;AAAA;AAAA;ACrB9B;;AAGI;;AAcA;;AAA6B;AAAA,mBAAS,IAAAc,eAAA,EAAT;AAA0B,WAA1B;;AAC3B;;AACF;;AACA;;AAA6B;AAAA,mBAAS,IAAAC,WAAA,EAAT;AAAsB,WAAtB;;AAC3B;;AACF;;AACF;;;;AApBiB;;AAAA,0FAAiE,SAAjE,EAAiE,YAAjE;;;;;;mBDKL,CACV,oEAAQ,mBAAR,EAA6B,CAC3B,uEAAW,WAAX,EAAwB,CACtB,kEAAM;AAAEC,iBAAO,EAAE;AAAX,SAAN,CADsB,EAEtB,oEAAQ,OAAR,EAAiB,kEAAM;AAAEA,iBAAO,EAAE;AAAX,SAAN,CAAjB,CAFsB,CAAxB,CAD2B,EAK3B,uEAAW,WAAX,EAAwB,CACtB,oEAAQ,OAAR,EAAiB,kEAAM;AAAEA,iBAAO,EAAE;AAAX,SAAN,CAAjB,CADsB,CAAxB,CAL2B,CAA7B,CADU;;;;;;sEAaDhB,iB,EAAiB;cAjB7B,uDAiB6B;eAjBnB;AACT1B,kBAAQ,EAAE,UADD;AAETC,qBAAW,EAAE,2BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD,CAHF;AAITyC,oBAAU,EAAE,CACV,oEAAQ,mBAAR,EAA6B,CAC3B,uEAAW,WAAX,EAAwB,CACtB,kEAAM;AAAED,mBAAO,EAAE;AAAX,WAAN,CADsB,EAEtB,oEAAQ,OAAR,EAAiB,kEAAM;AAAEA,mBAAO,EAAE;AAAX,WAAN,CAAjB,CAFsB,CAAxB,CAD2B,EAK3B,uEAAW,WAAX,EAAwB,CACtB,oEAAQ,OAAR,EAAiB,kEAAM;AAAEA,mBAAO,EAAE;AAAX,WAAN,CAAjB,CADsB,CAAxB,CAL2B,CAA7B,CADU;AAJH,S;AAiBmB,Q;;;;;;;;gBAC3B;;;gBACA;;;;;;;;;;;;;;;;;;;;AExBH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAcaE,qB;;;AAIX,qCAAoBhB,KAApB,EAA2CiB,OAA3C,EAA0EC,WAA1E,EAAgH;AAAA;;AAA5F,aAAAlB,KAAA,GAAAA,KAAA;AAAuB,aAAAiB,OAAA,GAAAA,OAAA;AAA+B,aAAAC,WAAA,GAAAA,WAAA;AAFnE,aAAAC,IAAA,GAAO,IAAP;AAE4G;;;;mCAM3G,CACP;;;+BAEG;AACF,eAAKnB,KAAL,CAAWW,QAAX,CAAoB,CAAC,QAAD,CAApB;AACD;;;kCAEM;AACL,cAAIS,IAAI,GAAW,IAAI,kEAAJ,EAAnB;AACAA,cAAI,CAACC,KAAL,GAAa,KAAKA,KAAlB;AACAD,cAAI,CAACE,QAAL,GAAgB,KAAKA,QAArB;AACA,eAAKL,OAAL,CAAaM,YAAb,CAA0BH,IAA1B;AACA,eAAKF,WAAL,CAAiBM,kBAAjB,CAAoC,KAAKH,KAAzC,EAAgDI,SAAhD,CAA0D,UAAAC,GAAG,EAAE;AAC7D,gBAAIC,CAAJ;;AACE,iBAAIA,CAAC,GAAC,CAAN,EAASA,CAAC,GAACD,GAAG,CAACpB,MAAf,EAAuBqB,CAAC,EAAxB,EAA2B;AAAE;AAC3BzC,0BAAY,CAAC0C,OAAb,CAAqB,SAArB,EAAgCF,GAAG,CAACC,CAAD,CAAH,CAAOlE,EAAvC;AACAyB,0BAAY,CAAC0C,OAAb,CAAqB,MAArB,EAA6BF,GAAG,CAACC,CAAD,CAAH,CAAOE,IAApC;AACD;AACF,WANH;AAOD;;;sCAEU;AACT,cAAI,KAAKP,QAAL,KAAgB,EAAhB,IAAsB,KAAKD,KAAL,KAAe,EAArC,IAA2C,CAAC,qDAAqDS,IAArD,CAA0D,KAAKT,KAA/D,CAAhD,EAAsH;AAEpH,mBAAO,IAAP;AACD,WAHD,MAGK;AACD,mBAAO,KAAP;AACH;AACF;;;;;;;uBAtCUL,qB,EAAqB,uH,EAAA,mI,EAAA,sK;AAAA,K;;;YAArBA,qB;AAAqB,wC;AAAA,e;AAAA,a;AAAA,mnB;AAAA;AAAA;ACdlC;;AACE;;AAEI;;AAGJ;;AAEA;;AACE;;AAA2B;AAAA,mBAAS,IAAAe,IAAA,EAAT;AAAe,WAAf;;AAAiB;;AAC5C;;AAAI;;AAAgB;;AACpB;;AAAM;AAAA,mBAAY,IAAAC,OAAA,EAAZ;AAAqB,WAArB;;AACJ;;AACE;;AACE;;AAAW;;AAAK;;AAChB;;AAAmD;AAAA;AAAA;;AAAnD;;AACF;;AAEA;;AAEA;;AACE;;AAAW;;AAAuB;;AAClC;;AAAoD;AAAA;AAAA;;AAApD;;AACA;;AAAkC;AAAA;AAAA;;AAChC;;AAAU;;AAA0C;;AACtD;;AACF;;AACF;;AAGA;;AACI;;AACA;;AAAc;;AACd;;AAAI;;AACJ;;AAAG;;AAA0B;;AAAoB;;AAAU;;AAAI;;AACnE;;AAEF;;AAGF;;AACF;;;;AA1B6D;;AAAA;;AAOnC;;AAAA,2GAAmC,SAAnC,EAAmC,YAAnC;;AACyC;;AAAA,mGAAmC,cAAnC,EAAmC,QAAnC;;AAC7C;;AAAA;;AAOgE;;AAAA;;;;;;;;;sEDjBzEhB,qB,EAAqB;cALjC,uDAKiC;eALvB;AACT5C,kBAAQ,EAAE,mBADD;AAETC,qBAAW,EAAE,gCAFJ;AAGTC,mBAAS,EAAE,CAAC,gCAAD;AAHF,S;AAKuB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;AEIlC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAAa2D,U,GAQT,oBAAYC,CAAZ,EAA0B;AAAA;;AAEtB;AACA,UAAGA,CAAC,KAAKzB,SAAT,EAAoB0B,MAAM,CAACxC,MAAP,CAAc,IAAd,EAAmBuC,CAAnB;AACvB,K;;QAGQE,U,GAOT,oBAAYF,CAAZ,EAA0B;AAAA;;AAEtB;AACA,UAAGA,CAAC,KAAKzB,SAAT,EAAoB0B,MAAM,CAACxC,MAAP,CAAc,IAAd,EAAmBuC,CAAnB;AACvB,K;;;;;;;;;;;;;;;;;ACpCL;AAAA;;;AAAA;AAAA;AAAA;;QAAaG,S,GAST,mBAAYH,CAAZ,EAAyB;AAAA;;AAErB,UAAGA,CAAC,KAAKzB,SAAT,EAAoB0B,MAAM,CAACxC,MAAP,CAAc,IAAd,EAAmBuC,CAAnB;AACvB,K;;AACJ;;;;;;;;;;;;;;;;ACLD;AAAA;;;AAAA;AAAA;AAAA;;QAAaI,O,GAYT;AAGA,qBAAYJ,CAAZ,EAAuB;AAAA;;AAEnB;AACA,UAAGA,CAAC,KAAKzB,SAAT,EAAoB0B,MAAM,CAACxC,MAAP,CAAc,IAAd,EAAmBuC,CAAnB;AACvB,K;;;;;;;;;;;;;;;;;ACbJ;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA;;QAGYK,K,GA4BT,eAAYL,CAAZ,EAAqB;AAAA;;AAEjB;AACA,UAAGA,CAAC,KAAKzB,SAAT,EAAoB0B,MAAM,CAACxC,MAAP,CAAc,IAAd,EAAmBuC,CAAnB;AACvB,K;;AACJ;;QAUYM,M,GAOT,gBAAYN,CAAZ,EAAsB;AAAA;;AAElB;AACA,UAAGA,CAAC,KAAKzB,SAAT,EAAoB0B,MAAM,CAACxC,MAAP,CAAc,IAAd,EAAmBuC,CAAnB;AACvB,K;;;;;;;;;;;;;;;;;AC/EL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACEI;;AACI;;AACI;;AACA;;AAAe;;AAAmB;;AAClC;;AAAoB;;AAAwB;;AAChD;;AACJ;;;;;;AAJc;;AAAA;;AACS;;AAAA;;AACK;;AAAA;;;;QDCnBO,e;;;AAEX,iCAAc;AAAA;;AACd,aAAAC,MAAA,GAAS,CACP;AACE,oBAAU,eADZ;AAEE,yBAAe,qCAFjB;AAGE,iBAAO,mBAHT;AAIE,sBAAY;AAJd,SADO,EAOP;AACE,oBAAU,eADZ;AAEE,yBAAe,6CAFjB;AAGE,iBAAO,mBAHT;AAIE,sBAAY;AAJd,SAPO,EAaP;AACE,oBAAU,QADZ;AAEE,yBAAe,sBAFjB;AAGE,iBAAO,mBAHT;AAIE,sBAAY;AAJd,SAbO,EAmBP;AACA,oBAAU,MADV;AAEE,yBAAe,oBAFjB;AAGE,iBAAO,mBAHT;AAIE,sBAAY;AAJd,SAnBO,EAyBP;AACA,oBAAU,QADV;AAEE,yBAAe,sBAFjB;AAGE,iBAAO,mBAHT;AAIE,sBAAY;AAJd,SAzBO,EA+BP;AACA,oBAAU,SADV;AAEE,yBAAe,uBAFjB;AAGE,iBAAO,mBAHT;AAIE,sBAAY;AAJd,SA/BO,EAqCP;AACA,oBAAU,mBADV;AAEE,yBAAe,iCAFjB;AAGE,iBAAO,mBAHT;AAIE,sBAAY;AAJd,SArCO,EA2CP;AACA,oBAAU,iBADV;AAEE,yBAAe,+BAFjB;AAGE,iBAAO,mBAHT;AAIE,sBAAY;AAJd,SA3CO,EAiDP;AACA,oBAAU,iBADV;AAEE,yBAAe,+BAFjB;AAGE,iBAAO,mBAHT;AAIE,sBAAY;AAJd,SAjDO,CAAT;AADiB;;;;mCAyDT,CACP;;;;;;;uBA5DUD,e;AAAe,K;;;YAAfA,e;AAAe,iC;AAAA,c;AAAA,a;AAAA,0L;AAAA;AAAA;ACP5B;;AACA;;AACI;;AAOJ;;;;AAPuB;;AAAA;;;;;;;;;sEDKVA,e,EAAe;cAL3B,uDAK2B;eALjB;AACTrE,kBAAQ,EAAE,YADD;AAETC,qBAAW,EAAE,yBAFJ;AAGTC,mBAAS,EAAE,CAAC,yBAAD;AAHF,S;AAKiB,Q;;;;;;;;;;;;;;;;;;;;AEP5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaqE,oB;;;AAGX,sCAAc;AAAA;;AAFE,aAAAC,MAAA,GAAgB,iCAAhB;AAEC;;;;mCAET,CACP;;;;;;;uBANUD,oB;AAAoB,K;;;YAApBA,oB;AAAoB,uC;AAAA;AAAA;AAAA,O;AAAA,c;AAAA,a;AAAA,+D;AAAA;AAAA;ACLjC;;AAAqB;;AAAgC;;AAAG;;AAAU;;AAAI;;;;AAAd;;AAAA;;;;;;;;sEDK3CA,oB,EAAoB;cALhC,uDAKgC;eALtB;AACTvE,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,+BAAD;AAHF,S;AAKsB,Q;;;;gBAC9B;;;;;;;;;;;;;;;;;;;;AERH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;QAOauE,c;;;AAEX,gCAAc;AAAA;AAAG;;;;mCAET,CACP;;;;;;;uBALUA,c;AAAc,K;;;YAAdA,c;AAAc,gC;AAAA,e;AAAA,a;AAAA,qO;AAAA;AAAA;ACP3B;;AACI;;AAEI;;AAGJ;;AAEA;;AAEI;;AACI;;AAAoG;;AAAI;;AAAc;;AAAI;;AAC9H;;AACA;;AACI;;AACA;;AAAI;;AAAQ;;AAAI;;AACpB;;AAGJ;;AACJ;;;;AAToB;;AAAA;;AAGA;;AAAA;;;;;;;;;sEDPPA,c,EAAc;cAL1B,uDAK0B;eALhB;AACTzE,kBAAQ,EAAE,WADD;AAETC,qBAAW,EAAE,wBAFJ;AAGTC,mBAAS,EAAE,CAAC,wBAAD;AAHF,S;AAKgB,Q;;;;;;;;;;;;;;;;;;;;AEP3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;ACiBe;;AAAK;AAAA;;AAAA;;AAAA;AAAA;;AAAL;;;;;;AAQA;;;;;;AAAiC;;;;;;AACjC;;;;;;AAuBN;;AAAsC;;AAAuC;;;;;;AAE1E;;AACG;;AACH;;;;;;AACA;;AACG;;AACH;;;;;;;;AACA;;AAA+D;AAAA;;AAAA;;AAAA;AAAA;;AAAoB;;;;;;;;AAKnF;;AAAyD;AAAA;;AAAA;;AAAA;AAAA;;AAAzD;;;;;;;;;;AAEH;;AACK;;AACI;;AACH;;AAEA;;AACG;;AAAoD;;AAAsB;;AAC1E;;AAAG;;AAAwB;;AAC9B;;AACN;;;;;;AAPc;;AAAA;;AAA8B;;AAIiB;;AAAA;;AACjD;;AAAA;;;;QDnDRwE,0B;;;AA0LX,0CAAoBC,MAApB,EACoBC,OADpB,EAEoBC,OAFpB,EAGoBC,oBAHpB,EAIoBC,qBAJpB,EAKoBC,yBALpB,EAMoBrD,eANpB,EAOoBsD,IAPpB,EAOgC;AAAA;;AAPZ,aAAAN,MAAA,GAAAA,MAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,oBAAA,GAAAA,oBAAA;AACA,aAAAC,qBAAA,GAAAA,qBAAA;AACA,aAAAC,yBAAA,GAAAA,yBAAA;AACA,aAAArD,eAAA,GAAAA,eAAA;AACA,aAAAsD,IAAA,GAAAA,IAAA;AAvLpB,aAAAC,KAAA,GAAQ,EAAR;AACA,aAAAC,WAAA,GAAqB,EAArB;AACA,aAAAX,MAAA,GAAS,aAAT;AASO,aAAAY,SAAA,GAAY,EAAZ,CA4KyB,CAzKhC;;AAEO,aAAAnD,MAAA,GAAS,CACd;AAAEoD,aAAG,EAAE;AAAP,SADc,CAAT,CAuKyB,CApK9B;;AAGF;AACA;;AACA,aAAAC,KAAA,GAAe,CAAf,CA+JgC,CA/JX;;AACrB,aAAAC,GAAA,GAAMC,KAAN,CA8JgC,CA9JX;;AACrB,aAAAC,QAAA,GAAkB,CAAlB,CA6JgC,CA7JX;;AACrB,aAAAC,UAAA,GAAoB,KAAKD,QAAL,GAAgB,KAAKH,KAAzC;AAGA;AACA;;AACA,aAAAK,WAAA,GAAc,EAAd,CAuJgC,CAvJd;AAClB;;AAEA,aAAAC,gBAAA,GAAmB,EAAnB,CAoJgC,CApJV;;AAEtB;;AACA,aAAAC,SAAA,GAAY,EAAZ;AACA,aAAAC,gBAAA,GAAmB,EAAnB,CAgJgC,CA9IhC;;AACA,aAAAC,aAAA,GAAgB,KAAhB,CA6IgC,CA7IT;;AACvB,aAAAC,aAAA,GAAgB,KAAhB,CA4IgC,CA5IT;;AA8IT,aAAKC,QAAL,GAAgB,EAAhB;AACA,aAAKzE,OAAL,GAAe,IAAI,kEAAJ,EAAf;AAGA;;;;iCA9IR;AACJJ,gBAAM,CAACC,QAAP,CAAgB6E,MAAhB;AACA9E,gBAAM,CAAC+E,QAAP,CAAgB,CAAhB,EAAkB,CAAlB;AACD,S,CACF;;;;2CACiB;AACd,eAAKJ,aAAL,GAAqB,IAArB;AACD,S,CACD;;;;uCACeK,W,EAAkB;AAC/B,eAAKJ,aAAL,GAAqB,IAArB;AACD,S,CAED;AACA;;;;kCACO;AACLK,kBAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCC,OAAzC,GAAiD,OAAjD;AACD,S,CAED;;;;+BACOC,O,EAASpH,E,EAAE;AAChB,cAAIoH,OAAO,IAAI,IAAf,EAAoB;AAClBJ,oBAAQ,CAACC,cAAT,CAAwBjH,EAAxB,EAA4BkH,KAA5B,CAAkCC,OAAlC,GAA0C,MAA1C;AACD;AACF,S,CAED;;;;sCACcE,M,EAAM;AAClB,cAAGA,MAAM,GAAG,CAAC,CAAb,EAAe;AACb,gBAAIC,UAAU,GAAc,IAAI,gEAAJ,EAA5B;AACAA,sBAAU,CAACA,UAAX,GAAwBD,MAAM,CAACE,QAAP,EAAxB;AACAD,sBAAU,CAACE,SAAX,GAAuB/F,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAvB;AACA4F,sBAAU,CAACG,QAAX,GAAsB,KAAKnC,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAtB;AACA,iBAAKjC,yBAAL,CAA+BkC,gBAA/B,CAAgDP,UAAhD;AACAN,oBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAkD,OAAlD;AACD;;AAAAH,kBAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCC,OAAzC,GAAiD,MAAjD;AAGF,S,CAED;;;;sCACcW,O,EAAO;AACnB,cAAGA,OAAO,IAAI,EAAd,EAAiB;AACf,gBAAIC,UAAU,GAAc,IAAI,gEAAJ,EAA5B;AACAA,sBAAU,CAACA,UAAX,GAAwBD,OAAxB;AACAC,sBAAU,CAACC,UAAX,GAAwBvG,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAxB;AACAqG,sBAAU,CAACE,SAAX,GAAuB,KAAK3C,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAvB;AACA,iBAAKjC,yBAAL,CAA+BuC,gBAA/B,CAAgDH,UAAhD;AACAf,oBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAkD,OAAlD;AACD;;AAAAH,kBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAkD,MAAlD;AAEF,S,CAED;AACA;;;;mCACQ;AACNH,kBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAkD,OAAlD;AACD,S,CAED;AACA;;;;iCACM;AACJH,kBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AACD,S,CAED;;;;gCAEQgB,I,EAAI;AACV,eAAK3B,SAAL,GAAiB2B,IAAjB;;AACA,cAAG,KAAK3B,SAAL,IAAkB,EAAlB,IAAwB,KAAKA,SAAL,IAAkBxD,SAA7C,EAAuD;AACrD,iBAAKb,OAAL,CAAaiG,KAAb,GAAqBD,IAArB;AAED;AAEF,S,CACD;;;;uCACeE,I,EAAI;AACjB,eAAK5B,gBAAL,GAAwB4B,IAAxB;;AACA,cAAG,KAAK5B,gBAAL,IAAyB,EAAzB,IAA+B,KAAKA,gBAAL,IAAyBzD,SAA3D,EAAqE;AACnE,iBAAKb,OAAL,CAAa2D,WAAb,GAA2BuC,IAA3B;AAED;AACF,S,CAEF;;;;mCAEYC,M,EAAM;AAIf,cAAG,KAAK9B,SAAL,IAAkB,EAAlB,IAAwB,KAAKA,SAAL,IAAkBxD,SAA7C,EAAuD;AACrD;AAEA,iBAAKb,OAAL,CAAaiG,KAAb,GAAqB,KAAK5B,SAA1B;AAID;;AACD,cAAG,KAAKC,gBAAL,IAAyB,EAAzB,IAA+B,KAAKA,gBAAL,IAAyBzD,SAA3D,EAAqE;AACnE;AACA,iBAAKb,OAAL,CAAa2D,WAAb,GAA2B,KAAKW,gBAAhC;AAGD,WAjBc,CAmBf;;;AAEA,cAAI8B,UAAU,GAAG;AACf,kBAAM,KAAKpG,OAAL,CAAanC,EADJ;AAEf,qBAAS,KAAKmC,OAAL,CAAayB,KAFP;AAGf,yBAAa,KAAKzB,OAAL,CAAaqG,SAHX;AAIf,2BAAe,KAAKrG,OAAL,CAAa2D,WAJb;AAKf,oBAAQ,KAAK3D,OAAL,CAAaiC,IALN;AAMf,sBAAU,KAAKjC,OAAL,CAAasG,MANR;AAOf,yBAAa,KAAKtG,OAAL,CAAauG,SAPX;AAQf,wBAAY,KAAKvG,OAAL,CAAa0B,QARV;AASf,yBAAa,KAAK1B,OAAL,CAAawG,SATX;AAUf,qBAAS,KAAKxG,OAAL,CAAaiG;AAVP,WAAjB;AAaA,eAAK3C,oBAAL,CAA0BmD,aAA1B,CAAwCL,UAAxC;AACAvB,kBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AAEA,iBAAO,IAAP;AAED;;;mCAmBO;AAAA;;AAON,cAAIJ,WAAW,GAAGtF,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAlB,CAPM,CAO6C;;AACnD,cAAImH,MAAM,GAAG,KAAKvD,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAb,CARM,CAQgD;;;AAEtD,cAAGb,WAAW,IAAI,MAAlB,EAAyB;AACvB,gBAAI9E,MAAM,GAAGF,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB,GAAtC;AACA,gBAAIgB,OAAO,GAAGhB,MAAM,GAAG,OAAvB;AACAF,kBAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBe,OAAvB;AACD,WAdK,CAgBN;;;AACA,eAAKX,eAAL,CAAqBqF,QAArB,CAA8B3D,SAA9B,CAAwC,UAAC8E,MAAD,EAAY;AAClDD,kBAAM,GAAGC,MAAM,CAAC,IAAD,CAAf,CADkD,CAEhD;;AACF,gBAAGD,MAAM,IAAI7F,SAAb,EAAuB;AACrB6F,oBAAM,GAAG,KAAI,CAACvD,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAT,CADqB,CAC6B;AACnD;;AACD7F,kBAAM,CAAC+E,QAAP,CAAgB,CAAhB,EAAkB,CAAlB;;AAEE,gBAAIiC,UAAU,GAAG,KAAI,CAACtD,oBAAL,CAA0BuD,UAA1B,CAAqCH,MAArC,EAA6CpJ,IAA7C,CAAkD,UAACwJ,IAAD,EAAU;AAE3E;;;;;AAKA,kBAAIF,UAAU,GAAW,IAAI,kEAAJ,EAAzB;AACAA,wBAAU,CAAC/I,EAAX,GAAgBiJ,IAAI,CAACjJ,EAArB;AACA+I,wBAAU,CAACnF,KAAX,GAAmBqF,IAAI,CAACrF,KAAxB;AACAmF,wBAAU,CAACP,SAAX,GAAuBS,IAAI,CAACT,SAA5B;AACAO,wBAAU,CAACjD,WAAX,GAAyBmD,IAAI,CAACnD,WAA9B;AACA,mBAAI,CAACA,WAAL,GAAmBmD,IAAI,CAACnD,WAAxB;AACAiD,wBAAU,CAAC3E,IAAX,GAAkB6E,IAAI,CAAC7E,IAAvB;AACA2E,wBAAU,CAACN,MAAX,GAAoBQ,IAAI,CAACR,MAAzB;AACAM,wBAAU,CAACL,SAAX,GAAuBO,IAAI,CAACP,SAA5B;AACAK,wBAAU,CAAClF,QAAX,GAAsBoF,IAAI,CAACpF,QAA3B;AACAkF,wBAAU,CAACJ,SAAX,GAAuBM,IAAI,CAACN,SAA5B;AACAI,wBAAU,CAACX,KAAX,GAAmBa,IAAI,CAACb,KAAxB;AAEA,mBAAI,CAACjG,OAAL,GAAe4G,UAAf;;AAEA,mBAAI,CAACpD,yBAAL,CAA+BuD,uBAA/B,CAAuD,KAAI,CAAC/G,OAAL,CAAanC,EAApE,EAAwEgE,SAAxE,CAAkF,UAAAC,GAAG,EAAE;AACrF;;;;;;;;;;;;;;;;;;;;;;;AAyBA,oBAAIA,GAAG,CAACpB,MAAJ,IAAc,CAAlB,EAAoB;AAClB,uBAAI,CAACoD,KAAL,GAAa,CAAb;AACA,uBAAI,CAACI,UAAL,GAAkB,KAAI,CAACD,QAAvB;AACD,iBAHD,MAGK;AACH,sBAAIlC,CAAJ;AACA,sBAAIiF,KAAK,GAAG,CAAZ;;AACA,uBAAKjF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAACD,GAAG,CAACpB,MAAlB,EAA0BqB,CAAC,EAA3B,EAA8B;AAC5BiF,yBAAK,GAAGA,KAAK,GAAGC,QAAQ,CAACnF,GAAG,CAACC,CAAD,CAAH,CAAOoD,UAAR,CAAxB;AAED;;AACD6B,uBAAK,GAAGE,IAAI,CAACC,KAAL,CAAWH,KAAK,GAAClF,GAAG,CAACpB,MAArB,CAAR,CAPG,CAOmC;;AACtC,uBAAI,CAACoD,KAAL,GAAakD,KAAb;AACA,uBAAI,CAAC9C,UAAL,GAAkB,KAAI,CAACD,QAAL,GAAgB+C,KAAlC,CATG,CAUH;;AACA,uBAAI,CAAChH,OAAL,CAAawG,SAAb,GAAyB,GAAzB,CAXG,CAaH;AACA;;AAEA,sBAAIJ,UAAU,GACZ;AACE,0BAAM,KAAI,CAACpG,OAAL,CAAanC,EADrB;AAEE,6BAAS,KAAI,CAACmC,OAAL,CAAayB,KAFxB;AAGE,iCAAa,KAAI,CAACzB,OAAL,CAAaqG,SAH5B;AAIE,mCAAe,KAAI,CAACrG,OAAL,CAAa2D,WAJ9B;AAKE,4BAAQ,KAAI,CAAC3D,OAAL,CAAaiC,IALvB;AAME,8BAAU,KAAI,CAACjC,OAAL,CAAasG,MANzB;AAOE,iCAAa,KAAI,CAACtG,OAAL,CAAauG,SAP5B;AAQE,gCAAY,KAAI,CAACvG,OAAL,CAAa0B,QAR3B;AASE,iCAAa,KAAI,CAAC1B,OAAL,CAAawG,SAT5B;AAUE,6BAAS,KAAI,CAACxG,OAAL,CAAaiG;AAVxB,mBADF;;AAiBA,uBAAI,CAAC3C,oBAAL,CAA0BmD,aAA1B,CAAwCL,UAAxC;AACD;AACF,eAhED;;AAkEA,mBAAI,CAAC5C,yBAAL,CAA+B4D,sBAA/B,CAAsD,KAAI,CAACpH,OAAL,CAAanC,EAAnE,EAAuEgE,SAAvE,CAAiF,UAAAC,GAAG,EAAE;AACpF;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,qBAAI,CAACqC,WAAL,GAAmB,EAAnB;AACA,oBAAIpC,CAAJ;;AACA,qBAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAACD,GAAG,CAACpB,MAAlB,EAA2BqB,CAAC,EAA5B,EAA+B;AAC7B,uBAAI,CAACoC,WAAL,CAAiBkD,IAAjB,CAAsB;AAChB,0BAAK,EADW;AAEhB,6BAAS,EAFO;AAGhB,8BAAU,EAHM;AAIhB,+BAAW,EAJK;AAKhB,gCAAY;AALI,mBAAtB;AASD;;AACD,oBAAI1B,OAAJ;AACA,oBAAI2B,GAAJ;AACA,oBAAIhB,MAAJ;AACA,oBAAIiB,MAAJ;AACA,oBAAItF,IAAJ;;AACA,qBAAKF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAACD,GAAG,CAACpB,MAAlB,EAA2BqB,CAAC,EAA5B,EAA+B;AAC7B4D,yBAAO,GAAG7D,GAAG,CAACC,CAAD,CAAH,CAAO6D,UAAjB;;AACA,uBAAI,CAACxB,gBAAL,CAAsBiD,IAAtB,CAA2B,CAAC1B,OAAD,EAAU7D,GAAG,CAACC,CAAD,CAAH,CAAO8D,UAAjB,EAA6B,IAA7B,CAA3B;;AAEA,sBAAI2B,QAAQ,GAAG,CAAf;;AACA,sBAAIZ,UAAU,GAAG,KAAI,CAACtD,oBAAL,CAA0BuD,UAA1B,CAAqC/E,GAAG,CAACC,CAAD,CAAH,CAAO8D,UAA5C,EAAwDvI,IAAxD,CAA6D,UAACwJ,IAAD,EAAU;AAEtFQ,uBAAG,GAAGR,IAAI,CAACb,KAAX;AACA,yBAAI,CAAC9B,WAAL,CAAiBqD,QAAjB,EAA2B,OAA3B,IAAsCF,GAAtC;AAEAhB,0BAAM,GAAGQ,IAAI,CAACR,MAAd;AACA,yBAAI,CAACnC,WAAL,CAAiBqD,QAAjB,EAA2B,QAA3B,IAAuClB,MAAvC;AAEAiB,0BAAM,GAAGT,IAAI,CAACjJ,EAAd;AACA,yBAAI,CAACsG,WAAL,CAAiBqD,QAAjB,EAA2B,IAA3B,IAAmCD,MAAnC;AAEAtF,wBAAI,GAAG6E,IAAI,CAAC7E,IAAZ;;AAEA,wBAAGA,IAAI,IAAI,aAAX,EAAyB;AACvB,2BAAI,CAACkC,WAAL,CAAiBqD,QAAjB,EAA2B,UAA3B,IAAyC,sBAAzC;AACD,qBAFD,MAEK;AACH,2BAAI,CAACrD,WAAL,CAAiBqD,QAAjB,EAA2B,UAA3B,IAAyC,kBAAzC;AACD;;AACD,wBAAIC,CAAJ;;AACA,yBAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAC,KAAI,CAACrD,gBAAL,CAAsB1D,MAApC,EAA6C+G,CAAC,EAA9C,EAAkD;AAChD,0BAAI,KAAI,CAACrD,gBAAL,CAAsBqD,CAAtB,EAAyB,CAAzB,KAA+B,KAAI,CAACtD,WAAL,CAAiBqD,QAAjB,EAA2B,IAA3B,CAA/B,IAAoE,KAAI,CAACrD,WAAL,CAAiBqD,QAAjB,EAA2B,SAA3B,KAAyC,EAA7G,IAAmH,KAAI,CAACpD,gBAAL,CAAsBqD,CAAtB,EAAyB,CAAzB,CAAvH,EAAoJ;AAClJ,6BAAI,CAACtD,WAAL,CAAiBqD,QAAjB,EAA2B,SAA3B,IAAwC,KAAI,CAACpD,gBAAL,CAAsBqD,CAAtB,EAAyB,CAAzB,CAAxC;AACA,6BAAI,CAACrD,gBAAL,CAAsBqD,CAAtB,EAAyB,CAAzB,IAA8B,KAA9B;AAED;AACF;;AAEHD,4BAAQ,GAAGA,QAAQ,GAAG,CAAtB;AACC,mBA5BgB,CAAjB;AA6BD;AAEF,eA/ED;AAiFA;;;;;;;;;;AASA,mBAAI,CAACjE,qBAAL,CAA2BmE,gBAA3B,CAA4C,KAAI,CAAC1H,OAAL,CAAayB,KAAzD,EAAgEI,SAAhE,CAA0E,UAAAC,GAAG,EAAE;AAC3E,oBAAGA,GAAG,CAACpB,MAAJ,GAAW,CAAd,EAAgB;AACd,uBAAI,CAACkD,SAAL,GAAiB,EAAjB;AACA,uBAAI,CAACnD,MAAL,GAAc,EAAd,CAFc,CAEI;;AAClB,sBAAIsB,CAAJ;;AACA,uBAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAACD,GAAG,CAACpB,MAAlB,EAA2BqB,CAAC,EAA5B,EAA+B;AAC7B,yBAAI,CAACtB,MAAL,CAAY4G,IAAZ,CAAiB;AAACxD,yBAAG,EAAE/B,GAAG,CAACC,CAAD,CAAH,CAAOuF;AAAb,qBAAjB;;AACA,yBAAI,CAAC1D,SAAL,CAAeyD,IAAf,CAAoB,CAAC,OAAD,EAAUvF,GAAG,CAACC,CAAD,CAAH,CAAOlE,EAAjB,CAApB;AACD;AACF,iBARD,MAQK;AACH,uBAAI,CAAC4C,MAAL,GAAc,CACZ;AAAEoD,uBAAG,EAAE;AAAP,mBADY,CAAd;AAKD;AAEJ,eAjBD;AAqBD,aAvMgB,CAAjB;AAyMH,WAjND;AAkNA;;;;;AAGA,cAAI6C,MAAM,IAAI9B,WAAd,EAA0B;AACxB,iBAAK+C,gBAAL,GADwB,CACC;AAC1B,WAFD,MAEK;AACH,iBAAK3E,MAAL,GAAc,WAAd;AACA,iBAAK4E,cAAL,CAAoBhD,WAApB,EAFG,CAE+B;AACnC;AAaF;;;sCAGU,CAET;AACD;;;;;;;uBAvcU1B,0B,EAA0B,+H,EAAA,uH,EAAA,yI,EAAA,sK,EAAA,uJ,EAAA,0K,EAAA,+H,EAAA,qH;AAAA,K;;;YAA1BA,0B;AAA0B,6C;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACpBvC;;AAEA;;AAAkC;AAAA,mBAAW,IAAA2E,MAAA,SAAe,SAAf,CAAX;AAAqC,WAArC,EAAsC,YAAtC,EAAsC;AAAA,mBAAe,IAAAC,aAAA,QAAf;AAAoC,WAA1E;;AAA6E;;AAC/G;;AAAmC;AAAA,mBAAW,IAAAD,MAAA,SAAe,UAAf,CAAX;AAAqC,WAArC,EAAsC,YAAtC,EAAsC;AAAA,mBAAe,IAAAE,aAAA,QAAf;AAAoC,WAA1E;;AAA6E;;AAChH;;AAA2E;AAAA,mBAAW,IAAAF,MAAA,SAAe,QAAf,CAAX;AAAmC,WAAnC,EAAoC,gBAApC,EAAoC;AAAA,mBAAmB,IAAAG,cAAA,QAAnB;AAAyC,WAA7E,EAAoC,MAApC,EAAoC;AAAA,mBAAmD,IAAAC,OAAA,QAAnD;AAAkE,WAAtG,EAAoC,QAApC,EAAoC;AAAA,mBAA8E,IAAAC,UAAA,QAA9E;AAAgG,WAApI;;AAAuI;;AAClN;;AAAmG;AAAA,mBAAW,IAAAL,MAAA,SAAe,UAAf,CAAX;AAAqC,WAArC;;AAAuC;;AAC1I;;AAA6F;AAAA,mBAAW,IAAAA,MAAA,SAAe,UAAf,CAAX;AAAqC,WAArC;;AAAuC;;AACpI;;AAAsG;AAAA,mBAAW,IAAAA,MAAA,SAAe,QAAf,CAAX;AAAmC,WAAnC;;AAAqC;;AAC3I;;AAEG;;AACG;;AACG;;AACA;;AACG;;AAEG;;AAAmB;;AAAkB;;AACrC;;AAEA;;AACG;;AAA2B;;AAAqB;;AAChD;;AACH;;AACH;;AACA;;AACG;;AACA;;AACH;;AAGH;;AACA;;AACH;;AAEH;;AACA;;AACG;;AACA;;AACA;;AAGH;;AACA;;AACG;;AACG;;AACA;;AAAwB;;AAAgB;;AACxC;;AACA;;AAEA;;AACA;;AACG;;AAGA;;AAGA;;AACH;;AAEA;;AACG;;AAAuC;;AAAsB;;AAC7D;;AACH;;AACA;;AAWH;;AAEH;;AAEA;;AACG;;AAAkC;;AAAkB;;AACpD;;AACG;;AACH;;AACH;;AACH;;;;AArFY,4FAAA7E,MAAA;;AAIiC;;AAAA,iGAAAW,WAAA;;AAYX;;AAAA;;AACkD;;AAAA;;AAGvC;;AAAA;;AAKzB;;AAAA;;AACA;;AAAA;;AAWd;;AAAA;;AAQ2B;;AAAA;;AAIrB;;AAAA;;AAEM;;AAAA;;AAGA;;AAAA;;AAGK;;AAAA;;AAKwB;;AAAA;;AAEjB;;AAAA;;AAkBX;;AAAA,yFAAiB,OAAjB,EAAiB,aAAjB;;;;;;;;;sED9DNT,0B,EAA0B;cALtC,uDAKsC;eAL5B;AACT1E,kBAAQ,EAAE,wBADD;AAETC,qBAAW,EAAE,qCAFJ;AAGTC,mBAAS,EAAE,CAAC,qCAAD;AAHF,S;AAK4B,Q;;;;;;;;;;;;;;;;;;;;gBAMpC,uD;iBAAU,a;;;gBACV,uD;iBAAU,W;;;;;;;;;;;;;;;;;;;;AE3Bb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;ACkBe;;AAAK;AAAA;;AAAA;;AAAA;AAAA;;AAAL;;;;;;AAQA;;;;;;AAAiC;;;;;;AACjC;;;;;;AAuBN;;AAAsC;;AAAuC;;;;;;AAE1E;;AACG;;AACH;;;;;;AACA;;AACG;;AACH;;;;;;;;AACA;;AAA+D;AAAA;;AAAA;;AAAA;AAAA;;AAAoB;;;;;;;;AAKnF;;AAAyD;AAAA;;AAAA;;AAAA;AAAA;;AAAzD;;;;;;;;;;AAEH;;AACK;;AACI;;AACH;;AAEA;;AACG;;AAAoD;;AAAsB;;AAC1E;;AAAG;;AAAwB;;AAC9B;;AACN;;;;;;AAPc;;AAAA;;AAA8B;;AAIiB;;AAAA;;AACjD;;AAAA;;;;QDlDRyJ,sB;;;AA6LX,sCAAoBhF,MAApB,EACoBC,OADpB,EAEoBC,OAFpB,EAGoBC,oBAHpB,EAIoBC,qBAJpB,EAKoBC,yBALpB,EAMoB4E,yBANpB,EAOoBjI,eAPpB,EAQoBsD,IARpB,EAQgC;AAAA;;AARZ,aAAAN,MAAA,GAAAA,MAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,oBAAA,GAAAA,oBAAA;AACA,aAAAC,qBAAA,GAAAA,qBAAA;AACA,aAAAC,yBAAA,GAAAA,yBAAA;AACA,aAAA4E,yBAAA,GAAAA,yBAAA;AACA,aAAAjI,eAAA,GAAAA,eAAA;AACA,aAAAsD,IAAA,GAAAA,IAAA;AA3LpB,aAAAC,KAAA,GAAQ,EAAR;AACA,aAAAC,WAAA,GAAqB,EAArB;AACA,aAAAX,MAAA,GAAS,SAAT;AASO,aAAAqF,WAAA,GAAc,EAAd;AAGA,aAAAzE,SAAA,GAAY,EAAZ,CA6KyB,CA1KhC;;AAEO,aAAAnD,MAAA,GAAS,CACd;AAAEoD,aAAG,EAAE;AAAP,SADc,CAAT,CAwKyB,CArK9B;;AAGF;AACA;;AACA,aAAAC,KAAA,GAAe,CAAf,CAgKgC,CAhKX;;AACrB,aAAAC,GAAA,GAAMC,KAAN,CA+JgC,CA/JX;;AACrB,aAAAC,QAAA,GAAkB,CAAlB,CA8JgC,CA9JX;;AACrB,aAAAC,UAAA,GAAoB,KAAKD,QAAL,GAAgB,KAAKH,KAAzC;AAGA;AACA;;AACA,aAAAK,WAAA,GAAc,EAAd,CAwJgC,CAxJd;AAClB;;AAEA,aAAAC,gBAAA,GAAmB,EAAnB,CAqJgC,CArJV;;AAEtB;;AACA,aAAAC,SAAA,GAAY,EAAZ;AACA,aAAAC,gBAAA,GAAmB,EAAnB,CAiJgC,CA/IhC;;AACA,aAAAC,aAAA,GAAgB,KAAhB,CA8IgC,CA9IT;;AACvB,aAAAC,aAAA,GAAgB,KAAhB,CA6IgC,CA7IT;;AA+IT,aAAKC,QAAL,GAAgB,EAAhB;AACA,aAAKzE,OAAL,GAAe,IAAI,kEAAJ,EAAf;AAGA;;;;iCA/IR;AACJJ,gBAAM,CAACC,QAAP,CAAgB6E,MAAhB;AACA9E,gBAAM,CAAC+E,QAAP,CAAgB,CAAhB,EAAkB,CAAlB;AACD,S,CACF;;;;2CACiB;AACd,eAAKJ,aAAL,GAAqB,IAArB;AACD,S,CACD;;;;uCACeK,W,EAAkB;AAC/B,eAAKJ,aAAL,GAAqB,IAArB;AACD,S,CAED;AACA;;;;kCACO;AACLK,kBAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCC,OAAzC,GAAiD,OAAjD;AACD,S,CAED;;;;+BACOC,O,EAASpH,E,EAAE;AAChB,cAAIoH,OAAO,IAAI,IAAf,EAAoB;AAClBJ,oBAAQ,CAACC,cAAT,CAAwBjH,EAAxB,EAA4BkH,KAA5B,CAAkCC,OAAlC,GAA0C,MAA1C;AACD;AACF,S,CAED;;;;sCACcE,M,EAAM;AAClB,cAAGA,MAAM,GAAG,CAAC,CAAb,EAAe;AACb,gBAAIC,UAAU,GAAc,IAAI,gEAAJ,EAA5B;AACAA,sBAAU,CAACA,UAAX,GAAwBD,MAAM,CAACE,QAAP,EAAxB;AACAD,sBAAU,CAACE,SAAX,GAAuB/F,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAvB;AACA4F,sBAAU,CAACG,QAAX,GAAsB,KAAKnC,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAtB;AACA,iBAAKjC,yBAAL,CAA+BkC,gBAA/B,CAAgDP,UAAhD;AACAN,oBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAkD,OAAlD;AACD;;AAAAH,kBAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCC,OAAzC,GAAiD,MAAjD;AAGF,S,CAED;;;;sCACcW,O,EAAO;AACnB,cAAGA,OAAO,IAAI,EAAd,EAAiB;AACf,gBAAIC,UAAU,GAAc,IAAI,gEAAJ,EAA5B;AACAA,sBAAU,CAACA,UAAX,GAAwBD,OAAxB;AACAC,sBAAU,CAACC,UAAX,GAAwBvG,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAxB;AACAqG,sBAAU,CAACE,SAAX,GAAuB,KAAK3C,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAvB;AACA,iBAAKjC,yBAAL,CAA+BuC,gBAA/B,CAAgDH,UAAhD;AACAf,oBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAkD,OAAlD;AACD;;AAAAH,kBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAkD,MAAlD;AAEF,S,CAED;AACA;;;;mCACQ;AACNH,kBAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CC,OAA1C,GAAkD,OAAlD;AACD,S,CAED;AACA;;;;iCACM;AACJH,kBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AACD,S,CAED;;;;gCAEQgB,I,EAAI;AACV,eAAK3B,SAAL,GAAiB2B,IAAjB;;AACA,cAAG,KAAK3B,SAAL,IAAkB,EAAlB,IAAwB,KAAKA,SAAL,IAAkBxD,SAA7C,EAAuD;AACrD,iBAAKb,OAAL,CAAaiG,KAAb,GAAqBD,IAArB;AAED;AAEF,S,CACD;;;;uCACeE,I,EAAI;AACjB,eAAK5B,gBAAL,GAAwB4B,IAAxB;;AACA,cAAG,KAAK5B,gBAAL,IAAyB,EAAzB,IAA+B,KAAKA,gBAAL,IAAyBzD,SAA3D,EAAqE;AACnE,iBAAKb,OAAL,CAAa2D,WAAb,GAA2BuC,IAA3B;AAED;AACF,S,CAEF;;;;mCAEYC,M,EAAM;AAIf,cAAG,KAAK9B,SAAL,IAAkB,EAAlB,IAAwB,KAAKA,SAAL,IAAkBxD,SAA7C,EAAuD;AACrD;AAEA,iBAAKb,OAAL,CAAaiG,KAAb,GAAqB,KAAK5B,SAA1B;AAID;;AACD,cAAG,KAAKC,gBAAL,IAAyB,EAAzB,IAA+B,KAAKA,gBAAL,IAAyBzD,SAA3D,EAAqE;AACnE;AACA,iBAAKb,OAAL,CAAa2D,WAAb,GAA2B,KAAKW,gBAAhC;AAGD,WAjBc,CAmBf;;;AAEA,cAAI8B,UAAU,GAAG;AACf,kBAAM,KAAKpG,OAAL,CAAanC,EADJ;AAEf,qBAAS,KAAKmC,OAAL,CAAayB,KAFP;AAGf,yBAAa,KAAKzB,OAAL,CAAaqG,SAHX;AAIf,2BAAe,KAAKrG,OAAL,CAAa2D,WAJb;AAKf,oBAAQ,KAAK3D,OAAL,CAAaiC,IALN;AAMf,sBAAU,KAAKjC,OAAL,CAAasG,MANR;AAOf,yBAAa,KAAKtG,OAAL,CAAauG,SAPX;AAQf,wBAAY,KAAKvG,OAAL,CAAa0B,QARV;AASf,yBAAa,KAAK1B,OAAL,CAAawG,SATX;AAUf,qBAAS,KAAKxG,OAAL,CAAaiG;AAVP,WAAjB;AAaA,eAAK3C,oBAAL,CAA0BmD,aAA1B,CAAwCL,UAAxC;AACAvB,kBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AAEA,iBAAO,IAAP;AAED;;;mCAoBO;AAAA;;AASN,cAAIJ,WAAW,GAAGtF,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAlB,CATM,CAS6C;;AACnD,cAAImH,MAAM,GAAG,KAAKvD,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAb,CAVM,CAUgD;;;AAEtD,cAAGb,WAAW,IAAI,MAAlB,EAAyB;AACvB,gBAAI9E,MAAM,GAAGF,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB,GAAtC;AACA,gBAAIgB,OAAO,GAAGhB,MAAM,GAAG,OAAvB;AACAF,kBAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBe,OAAvB;AACD,WAhBK,CAkBN;;;AACA,eAAKX,eAAL,CAAqBqF,QAArB,CAA8B3D,SAA9B,CAAwC,UAAC8E,MAAD,EAAY;AAClDD,kBAAM,GAAGC,MAAM,CAAC,IAAD,CAAf,CADkD,CAEhD;;AACF,gBAAGD,MAAM,IAAI7F,SAAb,EAAuB;AACrB6F,oBAAM,GAAG,MAAI,CAACvD,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAT,CADqB,CAC6B;AACnD;;AACD7F,kBAAM,CAAC+E,QAAP,CAAgB,CAAhB,EAAkB,CAAlB;;AAEE,gBAAIiC,UAAU,GAAG,MAAI,CAACtD,oBAAL,CAA0BuD,UAA1B,CAAqCH,MAArC,EAA6CpJ,IAA7C,CAAkD,UAACwJ,IAAD,EAAU;AAE3E;;;;;AAKA,kBAAIF,UAAU,GAAW,IAAI,kEAAJ,EAAzB;AACAA,wBAAU,CAAC/I,EAAX,GAAgBiJ,IAAI,CAACjJ,EAArB;AACA+I,wBAAU,CAACnF,KAAX,GAAmBqF,IAAI,CAACrF,KAAxB;AACAmF,wBAAU,CAACP,SAAX,GAAuBS,IAAI,CAACT,SAA5B;AACAO,wBAAU,CAACjD,WAAX,GAAyBmD,IAAI,CAACnD,WAA9B;AACA,oBAAI,CAACA,WAAL,GAAmBmD,IAAI,CAACnD,WAAxB;AACAiD,wBAAU,CAAC3E,IAAX,GAAkB6E,IAAI,CAAC7E,IAAvB;AACA2E,wBAAU,CAACN,MAAX,GAAoBQ,IAAI,CAACR,MAAzB;AACAM,wBAAU,CAACL,SAAX,GAAuBO,IAAI,CAACP,SAA5B;AACAK,wBAAU,CAAClF,QAAX,GAAsBoF,IAAI,CAACpF,QAA3B;AACAkF,wBAAU,CAACJ,SAAX,GAAuBM,IAAI,CAACN,SAA5B;AACAI,wBAAU,CAACX,KAAX,GAAmBa,IAAI,CAACb,KAAxB;AAEA,oBAAI,CAACjG,OAAL,GAAe4G,UAAf;;AAEA,oBAAI,CAACpD,yBAAL,CAA+BuD,uBAA/B,CAAuD,MAAI,CAAC/G,OAAL,CAAanC,EAApE,EAAwEgE,SAAxE,CAAkF,UAAAC,GAAG,EAAE;AACrF;;;;;;;;;;;;;;;;;;;;;;;AAyBA,oBAAIA,GAAG,CAACpB,MAAJ,IAAc,CAAlB,EAAoB;AAClB,wBAAI,CAACoD,KAAL,GAAa,CAAb;AACA,wBAAI,CAACI,UAAL,GAAkB,MAAI,CAACD,QAAvB;AACD,iBAHD,MAGK;AACH,sBAAIlC,CAAJ;AACA,sBAAIiF,KAAK,GAAG,CAAZ;;AACA,uBAAKjF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAACD,GAAG,CAACpB,MAAlB,EAA0BqB,CAAC,EAA3B,EAA8B;AAC5BiF,yBAAK,GAAGA,KAAK,GAAGC,QAAQ,CAACnF,GAAG,CAACC,CAAD,CAAH,CAAOoD,UAAR,CAAxB;AAED;;AACD6B,uBAAK,GAAGE,IAAI,CAACC,KAAL,CAAWH,KAAK,GAAClF,GAAG,CAACpB,MAArB,CAAR,CAPG,CAOmC;;AACtC,wBAAI,CAACoD,KAAL,GAAakD,KAAb;AACA,wBAAI,CAAC9C,UAAL,GAAkB,MAAI,CAACD,QAAL,GAAgB+C,KAAlC,CATG,CAUH;;AACA,wBAAI,CAAChH,OAAL,CAAawG,SAAb,GAAyB,GAAzB,CAXG,CAaH;AACA;;AAEA,sBAAIJ,UAAU,GACZ;AACE,0BAAM,MAAI,CAACpG,OAAL,CAAanC,EADrB;AAEE,6BAAS,MAAI,CAACmC,OAAL,CAAayB,KAFxB;AAGE,iCAAa,MAAI,CAACzB,OAAL,CAAaqG,SAH5B;AAIE,mCAAe,MAAI,CAACrG,OAAL,CAAa2D,WAJ9B;AAKE,4BAAQ,MAAI,CAAC3D,OAAL,CAAaiC,IALvB;AAME,8BAAU,MAAI,CAACjC,OAAL,CAAasG,MANzB;AAOE,iCAAa,MAAI,CAACtG,OAAL,CAAauG,SAP5B;AAQE,gCAAY,MAAI,CAACvG,OAAL,CAAa0B,QAR3B;AASE,iCAAa,MAAI,CAAC1B,OAAL,CAAawG,SAT5B;AAUE,6BAAS,MAAI,CAACxG,OAAL,CAAaiG;AAVxB,mBADF;;AAiBA,wBAAI,CAAC3C,oBAAL,CAA0BmD,aAA1B,CAAwCL,UAAxC;AACD;AACF,eAhED;;AAkEA,oBAAI,CAAC5C,yBAAL,CAA+B4D,sBAA/B,CAAsD,MAAI,CAACpH,OAAL,CAAanC,EAAnE,EAAuEgE,SAAvE,CAAiF,UAAAC,GAAG,EAAE;AACpF;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,sBAAI,CAACqC,WAAL,GAAmB,EAAnB;AACA,oBAAIpC,CAAJ;;AACA,qBAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAACD,GAAG,CAACpB,MAAlB,EAA2BqB,CAAC,EAA5B,EAA+B;AAC7B,wBAAI,CAACoC,WAAL,CAAiBkD,IAAjB,CAAsB;AAChB,0BAAK,EADW;AAEhB,6BAAS,EAFO;AAGhB,8BAAU,EAHM;AAIhB,+BAAW,EAJK;AAKhB,gCAAY;AALI,mBAAtB;AASD;;AACD,oBAAI1B,OAAJ;AACA,oBAAI2B,GAAJ;AACA,oBAAIhB,MAAJ;AACA,oBAAIiB,MAAJ;AACA,oBAAItF,IAAJ;;AACA,qBAAKF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAACD,GAAG,CAACpB,MAAlB,EAA2BqB,CAAC,EAA5B,EAA+B;AAC7B4D,yBAAO,GAAG7D,GAAG,CAACC,CAAD,CAAH,CAAO6D,UAAjB;;AACA,wBAAI,CAACxB,gBAAL,CAAsBiD,IAAtB,CAA2B,CAAC1B,OAAD,EAAU7D,GAAG,CAACC,CAAD,CAAH,CAAO8D,UAAjB,EAA6B,IAA7B,CAA3B;;AAEA,sBAAI2B,QAAQ,GAAG,CAAf;;AACA,sBAAIZ,UAAU,GAAG,MAAI,CAACtD,oBAAL,CAA0BuD,UAA1B,CAAqC/E,GAAG,CAACC,CAAD,CAAH,CAAO8D,UAA5C,EAAwDvI,IAAxD,CAA6D,UAACwJ,IAAD,EAAU;AAEtFQ,uBAAG,GAAGR,IAAI,CAACb,KAAX;AACA,0BAAI,CAAC9B,WAAL,CAAiBqD,QAAjB,EAA2B,OAA3B,IAAsCF,GAAtC;AAEAhB,0BAAM,GAAGQ,IAAI,CAACR,MAAd;AACA,0BAAI,CAACnC,WAAL,CAAiBqD,QAAjB,EAA2B,QAA3B,IAAuClB,MAAvC;AAEAiB,0BAAM,GAAGT,IAAI,CAACjJ,EAAd;AACA,0BAAI,CAACsG,WAAL,CAAiBqD,QAAjB,EAA2B,IAA3B,IAAmCD,MAAnC;AAEAtF,wBAAI,GAAG6E,IAAI,CAAC7E,IAAZ;;AAEA,wBAAGA,IAAI,IAAI,aAAX,EAAyB;AACvB,4BAAI,CAACkC,WAAL,CAAiBqD,QAAjB,EAA2B,UAA3B,IAAyC,sBAAzC;AACD,qBAFD,MAEK;AACH,4BAAI,CAACrD,WAAL,CAAiBqD,QAAjB,EAA2B,UAA3B,IAAyC,kBAAzC;AACD;;AACD,wBAAIC,CAAJ;;AACA,yBAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAC,MAAI,CAACrD,gBAAL,CAAsB1D,MAApC,EAA6C+G,CAAC,EAA9C,EAAkD;AAChD,0BAAI,MAAI,CAACrD,gBAAL,CAAsBqD,CAAtB,EAAyB,CAAzB,KAA+B,MAAI,CAACtD,WAAL,CAAiBqD,QAAjB,EAA2B,IAA3B,CAA/B,IAAoE,MAAI,CAACrD,WAAL,CAAiBqD,QAAjB,EAA2B,SAA3B,KAAyC,EAA7G,IAAmH,MAAI,CAACpD,gBAAL,CAAsBqD,CAAtB,EAAyB,CAAzB,CAAvH,EAAoJ;AAClJ,8BAAI,CAACtD,WAAL,CAAiBqD,QAAjB,EAA2B,SAA3B,IAAwC,MAAI,CAACpD,gBAAL,CAAsBqD,CAAtB,EAAyB,CAAzB,CAAxC;AACA,8BAAI,CAACrD,gBAAL,CAAsBqD,CAAtB,EAAyB,CAAzB,IAA8B,KAA9B;AAED;AACF;;AAEHD,4BAAQ,GAAGA,QAAQ,GAAG,CAAtB;AACC,mBA5BgB,CAAjB;AA6BD;AAEF,eA/ED;AAiFA;;;;;;;;;;AAQA,oBAAI,CAACY,yBAAL,CAA+BE,sBAA/B,CAAsD5B,MAAtD,EAA8D7E,SAA9D,CAAwE,UAAAC,GAAG,EAAE;AACzE,oBAAIyG,MAAM,GAAG,EAAb;;AACA,oBAAGzG,GAAG,CAACpB,MAAJ,IAAc,CAAjB,EAAmB;AACjB,wBAAI,CAACD,MAAL,GAAc,CACZ;AAAEoD,uBAAG,EAAE;AAAP,mBADY,CAAd;AAID,iBALD,MAKK;AAEH,sBAAI9B,CAAJ;;AACA,uBAAMA,CAAC,GAAG,CAAV,EAAaA,CAAC,GAACD,GAAG,CAACpB,MAAnB,EAA4BqB,CAAC,EAA7B,EAAgC;AAC9BwG,0BAAM,CAAClB,IAAP,CAAYvF,GAAG,CAACC,CAAD,CAAH,CAAOyG,OAAnB;AACD;AAIF;;AAED,oBAAGD,MAAM,CAAC7H,MAAP,GAAgB,CAAnB,EAAqB;AACnB,wBAAI,CAACD,MAAL,GAAc,EAAd;;AACA,uBAAKsB,CAAC,GAAC,CAAP,EAAUA,CAAC,GAACwG,MAAM,CAAC7H,MAAnB,EAA4BqB,CAAC,EAA7B,EAAgC;AAE9B,wBAAGD,GAAG,CAACC,CAAD,CAAH,CAAO0G,MAAP,IAAiB,WAAjB,IAAgC3G,GAAG,CAACC,CAAD,CAAH,CAAO0G,MAAP,IAAiB,WAApD,EAAiE;AAC7D,4BAAI,CAAClF,qBAAL,CAA2BmF,QAA3B,CAAoCH,MAAM,CAACxG,CAAD,CAA1C,EAA+CzE,IAA/C,CAAoD,UAAAwJ,IAAI,EAAG;AAEzD,8BAAI,CAACrG,MAAL,CAAY4G,IAAZ,CAAiB;AAACxD,6BAAG,EAAEiD,IAAI,CAACQ;AAAX,yBAAjB;;AACA,8BAAI,CAAC1D,SAAL,CAAeyD,IAAf,CAAoB,CAAC,OAAD,EAAUP,IAAI,CAACjJ,EAAf,CAApB;AAED,uBALD;AAMD;AACJ;AAEF;AACJ,eAjCD;AAsCD,aAvNgB,CAAjB;AAyNH,WAjOD;AAkOA;;;;;AAGA,cAAI6I,MAAM,IAAI9B,WAAd,EAA0B;AACxB,iBAAK+C,gBAAL,GADwB,CACC;AAC1B,WAFD,MAEK;AACH,iBAAK3E,MAAL,GAAc,WAAd;AACA,iBAAK4E,cAAL,CAAoBhD,WAApB,EAFG,CAE+B;AACnC;AAaF;;;sCAGU,CAET;AACD;;;;;;;uBA7dUuD,sB,EAAsB,+H,EAAA,uH,EAAA,yI,EAAA,sK,EAAA,uJ,EAAA,0K,EAAA,0K,EAAA,+H,EAAA,qH;AAAA,K;;;YAAtBA,sB;AAAsB,yC;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACtBnC;;AAEA;;AAAkC;AAAA,mBAAW,IAAAN,MAAA,SAAe,SAAf,CAAX;AAAqC,WAArC,EAAsC,YAAtC,EAAsC;AAAA,mBAAe,IAAAC,aAAA,QAAf;AAAoC,WAA1E;;AAA6E;;AAC/G;;AAAmC;AAAA,mBAAW,IAAAD,MAAA,SAAe,UAAf,CAAX;AAAqC,WAArC,EAAsC,YAAtC,EAAsC;AAAA,mBAAe,IAAAE,aAAA,QAAf;AAAoC,WAA1E;;AAA6E;;AAChH;;AAA2E;AAAA,mBAAW,IAAAF,MAAA,SAAe,QAAf,CAAX;AAAmC,WAAnC,EAAoC,gBAApC,EAAoC;AAAA,mBAAmB,IAAAG,cAAA,QAAnB;AAAyC,WAA7E,EAAoC,MAApC,EAAoC;AAAA,mBAAmD,IAAAC,OAAA,QAAnD;AAAkE,WAAtG,EAAoC,QAApC,EAAoC;AAAA,mBAA8E,IAAAC,UAAA,QAA9E;AAAgG,WAApI;;AAAuI;;AAClN;;AAAmG;AAAA,mBAAW,IAAAL,MAAA,SAAe,UAAf,CAAX;AAAqC,WAArC;;AAAuC;;AAC1I;;AAA6F;AAAA,mBAAW,IAAAA,MAAA,SAAe,UAAf,CAAX;AAAqC,WAArC;;AAAuC;;AACpI;;AAAsG;AAAA,mBAAW,IAAAA,MAAA,SAAe,QAAf,CAAX;AAAmC,WAAnC;;AAAqC;;AAC3I;;AAGG;;AACG;;AACG;;AACA;;AACG;;AAEG;;AAAmB;;AAAkB;;AACrC;;AAEA;;AACG;;AAA2B;;AAAqB;;AAChD;;AACH;;AACH;;AACA;;AACG;;AACA;;AACH;;AAGH;;AACA;;AACH;;AAEH;;AACA;;AACG;;AACA;;AACA;;AAGH;;AACA;;AACG;;AACG;;AACA;;AAAwB;;AAAgB;;AACxC;;AACA;;AAEA;;AACA;;AACG;;AAGA;;AAGA;;AACH;;AAEA;;AACG;;AAAuC;;AAAsB;;AAC7D;;AACH;;AACA;;AAWH;;AAEH;;AAEA;;AACG;;AAAkC;;AAAkB;;AACpD;;AACG;;AACH;;AACH;;AACH;;;;AAtFY,4FAAA7E,MAAA;;AAIiC;;AAAA,iGAAAW,WAAA;;AAaX;;AAAA;;AACkD;;AAAA;;AAGvC;;AAAA;;AAKzB;;AAAA;;AACA;;AAAA;;AAWd;;AAAA;;AAQ2B;;AAAA;;AAIrB;;AAAA;;AAEM;;AAAA;;AAGA;;AAAA;;AAGK;;AAAA;;AAKwB;;AAAA;;AAEjB;;AAAA;;AAkBX;;AAAA,yFAAiB,OAAjB,EAAiB,aAAjB;;;;;;;;;sED7DNwE,sB,EAAsB;cALlC,uDAKkC;eALxB;AACT3J,kBAAQ,EAAE,oBADD;AAETC,qBAAW,EAAE,iCAFJ;AAGTC,mBAAS,EAAE,CAAC,iCAAD;AAHF,S;AAKwB,Q;;;;;;;;;;;;;;;;;;;;;;gBAMhC,uD;iBAAU,a;;;gBACV,uD;iBAAU,W;;;;;;;;;;;;;;;;;;;;AE7Bb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaiK,mB;;;AAEX,qCAAc;AAAA;AAAG;;;;mCAGT,CACP;;;+BAEMC,E,EAAiB;AACtBA,YAAE,CAACC,cAAH,CAAkB;AAACC,oBAAQ,EAAE;AAAX,WAAlB;AACD;;;;;;;uBAVUH,mB;AAAmB,K;;;YAAnBA,mB;AAAmB,qC;AAAA,gB;AAAA,a;AAAA,+L;AAAA;AAAA;;;ACPhC;;AAEA;;AAAkB;;AAA8B;;AAChD;;AACI;;AAAQ;;AAAY;;AACpB;;AACI;;AAIJ;;AAEA;;AACI;;AAGJ;;AAEA;;AACI;;AAGJ;;AAEA;;AAAQ;;AAA0C;;AAElD;;AACI;;AAIJ;;AAEA;;AACI;;AAAI;;AAAG;;AAAsC;;AAAK;;AAEU;;AAC5D;;AAAI;;AAAG;;AAAa;;AAAK;;AAG2C;;AACpE;;AAAI;;AAAG;;AAAyB;;AAAK;;AACiD;;AACtF;;AAAI;;AAAG;;AAA4B;;AAAK;;AAG6B;;AACzE;;AAEA;;AAAQ;;AAAsC;;AAE1C;;AAAG;;AACgC;;AAEnC;;AAAI;;AAAG;;AAAsC;;AAAI;;AAC7C;;AAAG;;AAI2D;;AAC9D;;AACI;;AAAI;;AAG2C;;AAC/C;;AACI;;AAAI;;AAAuE;;AAC3E;;AAAI;;AAC0C;;AAC9C;;AAAI;;AAC8B;;AAClC;;AAAI;;AAA4I;;AAChJ;;AAAI;;AAAoF;;AAC5F;;AACJ;;AACA;;AACI;;AAAI;;AAGsF;;AAC1F;;AAAI;;AAOwE;;AAC5E;;AAAI;;AAGkE;;AAC1E;;AAGR;;AAAQ;;AAAwD;;AAC5D;;AACI;;AAeJ;;AAGJ;;AAAQ;;AAAoE;;AACxE;;AACI;;AAOJ;;AACA;;AACI;;AAOJ;;AACA;;AACI;;AAGuC;;AAE/C;;AAAQ;;AAA4D;;AAChE;;AACI;;AAE6C;;AACjD;;AACI;;AAKJ;;AAER;;AAGA;;AACI;;AACA;;AAAG;AAAA;;AAAA;;AAAA,mBAAS,IAAAI,MAAA,MAAT;AAAmB,WAAnB;;AAAqB;;AAAI;;AAAY;;AAAK;;AAAK;;AAClD;;AAAG;AAAA;;AAAA;;AAAA,mBAAS,IAAAA,MAAA,MAAT;AAAmB,WAAnB;;AAAqB;;AAAI;;AAAyC;;AAAK;;AAAK;;AAC/E;;AAAG;AAAA;;AAAA;;AAAA,mBAAS,IAAAA,MAAA,MAAT;AAAmB,WAAnB;;AAAqB;;AAAI;;AAAsC;;AAAK;;AAAK;;AAC5E;;AAAG;AAAA;;AAAA;;AAAA,mBAAS,IAAAA,MAAA,MAAT;AAAmB,WAAnB;;AAAqB;;AAAI;;AAAwD;;AAAK;;AAAK;;AAC9F;;AAAG;AAAA;;AAAA;;AAAA,mBAAS,IAAAA,MAAA,MAAT;AAAmB,WAAnB;;AAAqB;;AAAI;;AAAoE;;AAAK;;AAAK;;AAC1G;;AAAG;AAAA;;AAAA;;AAAA,mBAAS,IAAAA,MAAA,MAAT;AAAmB,WAAnB;;AAAqB;;AAAI;;AAA4D;;AAAK;;AAC7F;;AACJ;;AAEA;;;;;;;;;sEDhKaJ,mB,EAAmB;cAL/B,uDAK+B;eALrB;AACTnK,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,6BAAD;AAHF,S;AAKqB,Q;;;;;;;;;;;;;;;;;;;;AEPhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,+D,CAWA;;;QAOasK,gB;;;AAEX,gCAAoB7F,MAApB,EACUC,OADV,EAEUC,OAFV,EAGU4F,gBAHV,EAG4C;AAAA;;AAHxB,aAAA9F,MAAA,GAAAA,MAAA;AACV,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAA4F,gBAAA,GAAAA,gBAAA;AAGN;;;;mCAEI,CACP;;;mCAEU1L,C,EAAC;AACVkC,iBAAO,CAACC,GAAR,CAAY,OAAZ;AACA,cAAIwJ,KAAK,GAAS,IAAI,uDAAJ,EAAlB;AACAA,eAAK,CAACC,IAAN,GAAa,UAAb;AACAD,eAAK,CAACE,MAAN,GAAe,QAAf;AACAF,eAAK,CAACG,UAAN,GAAmB,QAAnB;AACAH,eAAK,CAACzH,KAAN,GAAc,0BAAd;AACAyH,eAAK,CAAC5B,GAAN,GAAY/J,CAAZ;AACA,eAAK0L,gBAAL,CAAsBK,WAAtB,CAAkCJ,KAAlC;AAED;;;;;;;uBAvBUF,gB,EAAgB,+H,EAAA,uH,EAAA,yI,EAAA,uJ;AAAA,K;;;YAAhBA,gB;AAAgB,kC;AAAA,c;AAAA,a;AAAA,iD;AAAA;AAAA;AClB7B;;AACA;;AAAkB;AAAA,mBAAO,IAAAO,UAAA,QAAP;AAAyB,WAAzB;;AAA2B;;;;;;;;;sEDiBhCP,gB,EAAgB;cAL5B,uDAK4B;eALlB;AACTxK,kBAAQ,EAAE,aADD;AAETC,qBAAW,EAAE,0BAFJ;AAGTC,mBAAS,EAAE,CAAC,0BAAD;AAHF,S;AAKkB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEjB7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAOA;;;QACa8K,mB;;;;;;;;;qCACEC,O,EAA6BjI,I,EAAwC;AAChF,cAAMkI,WAAW,GAAGlI,IAAI,IAAIA,IAAI,CAACmI,SAAjC;AACA,iBAAO,CAAC,EAAEF,OAAO,IAAIA,OAAO,CAACG,OAAnB,KAA+BH,OAAO,CAACI,KAAR,IAAiBJ,OAAO,CAACK,OAAzB,IAAoCJ,WAAnE,CAAF,CAAR;AACD;;;;;;QAQUK,iB;;;AAOX,iCAAoB3J,KAApB,EAA2C4J,WAA3C,EAA6E1I,WAA7E,EAAmH;AAAA;;AAA/F,aAAAlB,KAAA,GAAAA,KAAA;AAAuB,aAAA4J,WAAA,GAAAA,WAAA;AAAkC,aAAA1I,WAAA,GAAAA,WAAA;AAL7E,aAAAC,IAAA,GAAO,IAAP;AACA,aAAA0I,OAAA,GAAU,KAAV;AACA,aAAAC,aAAA,GAAoC,OAApC;AAOO,aAAA5D,MAAA,GAAiB,EAAjB;AACA,aAAA6D,QAAA,GAAmB,EAAnB;AACA,aAAA1I,KAAA,GAAgB,EAAhB;AACA,aAAAC,QAAA,GAAmB,EAAnB;AACA,aAAA0I,SAAA,GAAoB,EAApB;AACA,aAAAnI,IAAA,GAAe,EAAf;AACA,aAAAoI,SAAA,GAAoB,EAApB;AACA,aAAAlB,IAAA,GAAe,EAAf;AACA,aAAAmB,QAAA,GAAoB,KAApB;AAiGP,aAAAC,gBAAA,GAAmB,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CACrC,0DAAWC,QAD0B,EAErC,0DAAW/I,KAF0B,CAApB,CAAnB;AAKA,aAAAgJ,iBAAA,GAAoB,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CACtC,0DAAWD,QAD2B,CAApB,CAApB;AAIA,aAAAE,mBAAA,GAAsB,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CACxC,0DAAWF,QAD6B,CAApB,CAAtB;AAIA,aAAAG,oBAAA,GAAuB,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CACzC,0DAAWH,QAD8B,CAApB,CAAvB;AAGA,aAAAI,eAAA,GAAkB,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CACpC,0DAAWJ,QADyB,CAApB,CAAlB;AAIA,aAAAK,mBAAA,GAAsB,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CACxC,0DAAWL,QAD6B,CAApB,CAAtB;AAIA,aAAAM,oBAAA,GAAuB,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,CACzC,0DAAWN,QAD8B,CAApB,CAAvB;AAOA,aAAAO,OAAA,GAAU,IAAIvB,mBAAJ,EAAV;AA3IE,aAAKwB,KAAL,GAAa,EAAb;AACD;;;;mCAYO,CACP;;;+BAEG;AACF,eAAK5K,KAAL,CAAWW,QAAX,CAAoB,CAAC,QAAD,CAApB;AACD;;;qCAES;AAAA;;AAER8D,kBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CkG,KAA3C,GAAiD,OAAjD;AACApG,kBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CkG,KAA3C,GAAiD,OAAjD;AACApG,kBAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,CAAuCkG,KAAvC,GAA6C,OAA7C;AAEA,eAAKjB,WAAL,CAAiBkB,YAAjB,CAA8B,KAAKzJ,KAAnC,EAA0C,KAAKC,QAA/C,EAAyD;AAAzD,WACCpE,IADD,CACM,UAACwE,GAAD,EAAQ;AACZ,gBAAI9B,OAAO,GAAW,IAAI,2DAAJ,EAAtB;AACAA,mBAAO,CAACsG,MAAR,GAAiB,MAAI,CAACA,MAAtB;AACAtG,mBAAO,CAACuG,SAAR,GAAoB,MAAI,CAAC4D,QAAzB;AACAnK,mBAAO,CAACyB,KAAR,GAAgB,MAAI,CAACA,KAArB;AACAzB,mBAAO,CAAC0B,QAAR,GAAmB,MAAI,CAACA,QAAxB;AACA1B,mBAAO,CAACiC,IAAR,GAAe,MAAI,CAACA,IAApB;AACAjC,mBAAO,CAACiG,KAAR,GAAgB,EAAhB;AACAjG,mBAAO,CAAC2D,WAAR,GAAsB,EAAtB;AACA3D,mBAAO,CAACqG,SAAR,GAAoB,MAAI,CAAC8E,WAAL,CAAiB,MAAI,CAACd,SAAL,CAAee,WAAf,EAAjB,IAAiD,IAAjD,GAAwD,MAAI,CAACD,WAAL,CAAiB,MAAI,CAAChC,IAAL,CAAUiC,WAAV,EAAjB,CAA5E;;AACA,kBAAI,CAAC9J,WAAL,CAAiB+J,aAAjB,CAA+BrL,OAA/B;;AAEAV,wBAAY,CAAC0C,OAAb,CAAqB,MAArB,EAA6B,MAAI,CAACC,IAAlC;;AAEA,kBAAI,CAAC7B,KAAL,CAAWW,QAAX,CAAoB,CAAC,aAAD,CAApB;AAED,WAjBD,WAiBS,UAAAuK,GAAG,EAAI;AACdzG,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,CAAuCkG,KAAvC,GAA6C,KAA7C;AACD,WAxBD;AAyBD;;;sCAEU;AACT,cAAI,KAAK3E,MAAL,KAAc,EAAd,IAAoB,KAAK6D,QAAL,KAAgB,EAApC,IAA0C,KAAK1I,KAAL,KAAa,EAAvD,IAA6D,KAAKC,QAAL,KAAgB,EAA7E,IACJ,KAAK0I,SAAL,KAAiB,EADb,IACmB,KAAKC,SAAL,KAAiB,EADpC,IAC0C,KAAKlB,IAAL,KAAY,EADtD,IAC4D,KAAKlH,IAAL,KAAY,EADxE,IAC8E,CAAC,KAAKqI,QADxF,EACkG;AAChGzF,oBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CkG,KAA3C,GAAiD,OAAjD;AACApG,oBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CkG,KAA3C,GAAiD,OAAjD;AACApG,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AAEA,mBAAO,IAAP;AACD,WAXD,MAWM,IAAG,KAAKtD,QAAL,CAAc6J,aAAd,CAA4B,KAAKnB,SAAjC,KAA+C,CAAlD,EAAoD;AACxDvF,oBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CkG,KAA3C,GAAiD,KAAjD;AACApG,oBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CkG,KAA3C,GAAiD,KAAjD;AACApG,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AAEE,mBAAO,IAAP;AACH,WAVK,MAUA,IAAG,KAAKtD,QAAL,CAAchB,MAAd,GAAqB,CAAxB,EAA0B;AAC9BmE,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AAEA,mBAAO,IAAP;AACD,WARK,MAQA,IAAG,CAAC,qDAAqD9C,IAArD,CAA0D,KAAKT,KAA/D,CAAJ,EAA2E;AAC/EoD,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AAEA,mBAAO,IAAP;AACD,WARK,MAQD;AACDH,oBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CkG,KAA3C,GAAiD,OAAjD;AACApG,oBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CkG,KAA3C,GAAiD,OAAjD;AACApG,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AAEA,mBAAO,KAAP;AACH;AACF;;;oCAEWwG,M,EAAM;AAChB,iBAAOA,MAAM,CAACC,MAAP,CAAc,CAAd,EAAiBC,WAAjB,KAAiCF,MAAM,CAACG,KAAP,CAAa,CAAb,CAAxC;AACD;;;;;;;uBAlHU5B,iB,EAAiB,uH,EAAA,mI,EAAA,sK;AAAA,K;;;YAAjBA,iB;AAAiB,mC;AAAA;AAAA;AAAA,O;AAAA,e;AAAA,c;AAAA,48C;AAAA;AAAA;ACrB9B;;AACE;;AAEI;;AAGJ;;AAEA;;AACE;;AAA2B;AAAA,mBAAS,IAAA5H,IAAA,EAAT;AAAe,WAAf;;AAAiB;;AAC5C;;AAAI;;AAAQ;;AAEZ;;AAAO;AAAA,mBAAY,IAAAyJ,UAAA,EAAZ;AAAwB,WAAxB;;AACL;;AACE;;AAAiB;;AAAG;;AAAiC;;AAAI;;AACzD;;AAAiB;;AAAG;;AAAwC;;AAAI;;AAChE;;AAAiB;;AAAG;;AAA4D;;AAAI;;AACpF;;AAAiB;;AAAG;;AAA4B;;AAAI;;AACpD;;AAAiB;;AAAG;;AAAkB;;AAAI;;AAG1C;;AACE;;AACE;;AAAW;;AAAM;;AACjB;;AAAgB;AAAA;AAAA;;AAAhB;;AACF;;AAEA;;AACE;;AAAW;;AAAQ;;AACnB;;AAAgB;AAAA;AAAA;;AAAhB;;AACF;;AACF;;AAEA;;AAEA;;AACE;;AACE;;AAAW;;AAAS;;AACpB;;AAAgB;AAAA;AAAA;;AAAhB;;AACF;;AAEA;;AACE;;AAAW;;AAAI;;AACf;;AAAgB;AAAA;AAAA;;AAAhB;;AACF;;AACF;;AAEA;;AAEA;;AACE;;AAAW;;AAAK;;AAChB;;AAA2E;AAAA;AAAA;;AAA3E;;AACF;;AAEA;;AAGA;;AAEE;;AAAW;;AAAuB;;AAClC;;AAA+B;AAAA;AAAA;;AAA/B;;AAEA;;AAAmC;AAAA;AAAA;;AACnC;;AAAU;;AAA0C;;AACpD;;AACF;;AAEA;;AACA;;AAGE;;AAAW;;AAAsB;;AACjC;;AAA+B;AAAA;AAAA;;AAA/B;;AACA;;AAAmC;AAAA;AAAA;;AACnC;;AAAU;;AAA0C;;AACpD;;AACF;;AACF;;AAGA;;AACE;;AAAiB;AAAA;AAAA;;AACf;;AAAyD;;AAAW;;AACpE;;AAA6D;;AAAe;;AAC9E;;AACF;;AAEA;;AACE;;AAAuB;AAAA;AAAA;;AAAuC;;AAA+C;;AAC/G;;AAEA;;AACI;;AACD;;AAAU;;AACV;;AACA;;AACA;;AAAG;;AAAsB;;AAAyB;;AAAa;;AAAI;;AACtE;;AACF;;AACF;;AAEF;;;;AA7E4B;;AAAA;;AAKA;;AAAA;;AASA;;AAAA;;AAKA;;AAAA;;AAQyD;;AAAA;;AAS5C;;AAAA,4FAAsB,MAAtB,EAAsB,8BAAtB;;AAE2B;;AAAA,mGAAmC,cAAnC,EAAmC,QAAnC;;AAChD;;AAAA;;AASqB;;AAAA,6FAAuB,MAAvB,EAAuB,8BAAvB;;AAC2B;;AAAA,mGAAmC,cAAnC,EAAmC,QAAnC;;AAChD;;AAAA;;AAOK;;AAAA;;AAOM;;AAAA;;AAIuD;;AAAA;;;;;;;;;sEDvEzE7B,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACTvL,kBAAQ,EAAE,cADD;AAETC,qBAAW,EAAE,2BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD;AAHF,S;AAKmB,Q;;;;;;;;;;gBAK3B;;;;;;;;;;;;;;;;;;;;AE1BH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAUamN,W;;;AAGX,2BAAoBC,MAApB,EAAqD1L,KAArD,EAAoE;AAAA;;AAAhD,aAAA0L,MAAA,GAAAA,MAAA;AAAiC,aAAA1L,KAAA,GAAAA,KAAA;AACnD,aAAK2L,QAAL,GAAgBD,MAAM,CAACE,SAAvB;AACD;;;;qCAEYvK,K,EAAeC,Q,EAAgB;AAAA;;AAC1C,iBAAO,IAAItE,OAAJ,CAAa,UAACC,OAAD,EAAU4O,MAAV,EAAmB;AACrC,kBAAI,CAACH,MAAL,CAAYI,8BAAZ,CAA2CzK,KAA3C,EAAkDC,QAAlD,EACGpE,IADH,CACQ,UAAAyO,QAAQ;AAAA,qBACZ1O,OAAO,CAAC0O,QAAD,CADK;AAAA,aADhB,EAGI,UAAAT,GAAG;AAAA,qBAAIW,MAAM,CAACX,GAAD,CAAV;AAAA,aAHP;AAID,WALM,CAAP;AAMD;;;qCAIYa,I,EAAc;AAAA;;AAAA,cAClB1K,KADkB,GACC0K,IADD,CAClB1K,KADkB;AAAA,cACXC,QADW,GACCyK,IADD,CACXzK,QADW;AAEzB,eAAKoK,MAAL,CAAYM,0BAAZ,CAAuC3K,KAAvC,EAA8CC,QAA9C,EACCpE,IADD,CACM,UAAAwE,GAAG,EAAI;AACXrC,mBAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BoC,GAA3B;;AACA,kBAAI,CAAC1B,KAAL,CAAWW,QAAX,CAAoB,CAAC,aAAD,CAApB;AACD,WAJD,WAKO,UAAAuK,GAAG;AAAA,mBACR7L,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB4L,GAArB,CADQ;AAAA,WALV;AAQD;;;iCAEK;AACJ7L,iBAAO,CAACC,GAAR,CAAY,aAAZ;AACA,eAAKoM,MAAL,CAAYO,OAAZ;AACA/M,sBAAY,CAACE,KAAb;AACA,eAAKY,KAAL,CAAWW,QAAX,CAAoB,CAAC,GAAD,CAApB;AACD;;;;;;;uBAnCU8K,W,EAAW,0H,EAAA,8G;AAAA,K;;;aAAXA,W;AAAW,eAAXA,WAAW,K;AAAA,kBAFV;;;;;sEAEDA,W,EAAW;cAHvB,wDAGuB;eAHZ;AACVS,oBAAU,EAAE;AADF,S;AAGY,Q;;;;;;;;;;;;;;;;;;;;;;;;ACVxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAUaC,gB;;;AAKX;AAEA,gCAAoBC,SAApB,EACoBC,EADpB,EAEoBpJ,OAFpB,EAEiD;AAAA;;AAF7B,aAAAmJ,SAAA,GAAAA,SAAA;AACA,aAAAC,EAAA,GAAAA,EAAA;AACA,aAAApJ,OAAA,GAAAA,OAAA;AAElB,aAAKqJ,GAAL,GAAS,KAAKF,SAAL,CAAeG,UAAf,CAA0B,OAA1B,CAAT;AACA,aAAKC,GAAL,GAAS,KAAKJ,SAAL,CAAeG,UAAf,CAA0B,QAA1B,CAAT;AAED;;;;oCAGkBE,I,EAAY;AAE7B;AACA;AAEAA,cAAI,CAAChP,EAAL,GAAQ,KAAK2O,SAAL,CAAeM,QAAf,EAAR;AACAD,cAAI,CAACE,MAAL,GAAc,GAAd;AAEA,iBAAO,KAAKL,GAAL,CAASM,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0B,MAAD,OAAC,CAAD,EAAC,EAAKJ,IAAL,CAA1B,EAAsCvP,IAAtC,CAA2C,UAAA4P,CAAC,EAAE;AACnD,mBAAOL,IAAI,CAAChP,EAAZ;AACD,WAFM,CAAP;AAGD;;;iCAEeA,E,EAAU;AAExB,iBAAO,KAAK6O,GAAL,CAASM,GAAT,CAAanP,EAAb,EAAiB4H,GAAjB,GAAuB0H,SAAvB,GAAmC7P,IAAnC,CAAwC,UAAA4P,CAAC,EAAE;AAEhD,gBAAIhE,KAAK,GAAGgE,CAAC,CAACL,IAAF,EAAZ;AACA,mBAAO3D,KAAP;AACD,WAJM,CAAP;AAKD;;;oCAEe;AAEd,iBAAO,KAAKwD,GAAL,CAASU,YAAT,EAAP;AACD;;;oCAGkBP,I,EAAU;AAE3BpN,iBAAO,CAACC,GAAR,CAAY,MAAZ;AACA,iBAAO,KAAKgN,GAAL,CAASM,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0BJ,IAA1B,CAAP;AACD;;;oCAEkBhP,E,EAAU;AAE3B,iBAAO,KAAK6O,GAAL,CAASM,GAAT,CAAanP,EAAb,aAAP;AACD,S,CAED;;;;0CAEsB;AAEpB;;;;;;;;;;;;;;AAgBA,iBAAO,KAAK2O,SAAL,CAAeG,UAAf,CAAiC,OAAjC,EAAyC,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACC,OAAJ,CAAY,QAAZ,CAAF;AAAA,WAA5C,EAAqEF,YAArE,EAAP;AACD;;;0CAGwBjE,I,EAAW;AAElC,iBAAO,KAAKqD,SAAL,CAAeG,UAAf,CAAiC,OAAjC,EAAyC,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,MAAV,EAAiB,IAAjB,EAAsBpE,IAAtB,CAAF;AAAA,WAA5C,EAA2EiE,YAA3E,EAAP;AACD;;;yCAEuB3L,K,EAAY;AAElC,iBAAO,KAAK+K,SAAL,CAAeG,UAAf,CAAiC,OAAjC,EAAyC,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,OAAV,EAAkB,IAAlB,EAAuB9L,KAAvB,CAAF;AAAA,WAA5C,EAA6E2L,YAA7E,EAAP;AACD;;;0CAEwBjE,I,EAAW;AAElC,iBAAO,KAAKqD,SAAL,CAAeG,UAAf,CAAiC,OAAjC,EAAyC,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,MAAV,EAAiB,IAAjB,EAAsBpE,IAAtB,EAA4BmE,OAA5B,CAAoC,QAApC,CAAF;AAAA,WAA5C,EAA6FF,YAA7F,EAAP;AACD,S,CAGD;;;;oCACmBI,a,EAAuBC,K,EAAY;AACpD,iBAAO,KAAKpK,OAAL,CAAaqK,MAAb,CAAoBF,aAApB,EAAmCC,KAAnC,CAAP;AACD,S,CAED;;;;mCACkBD,a,EAAuB;AACvC,iBAAO,KAAKnK,OAAL,CAAagK,GAAb,CAAiBG,aAAjB,CAAP;AACD;;;kCAEgBhF,O,EAAe;AAE9B,iBAAO,KAAKgE,SAAL,CAAeG,UAAf,CAAkC,QAAlC,EAA2C,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,SAAV,EAAoB,IAApB,EAAyB/E,OAAzB,CAAF;AAAA,WAA9C,EAAmF4E,YAAnF,EAAP;AACD;;;;;;;uBA7GUb,gB,EAAgB,gI,EAAA,gI,EAAA,gI;AAAA,K;;;aAAhBA,gB;AAAgB,eAAhBA,gBAAgB,K;AAAA,kBAHf;;;;;sEAGDA,gB,EAAgB;cAJ5B,wDAI4B;eAJjB;AACVD,oBAAU,EAAE;AADF,S;AAIiB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;ACV7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASaqB,yB;;;AAKX,yCAAoBnB,SAApB,EACUC,EADV,EAEUpJ,OAFV,EAEuC;AAAA;;AAFnB,aAAAmJ,SAAA,GAAAA,SAAA;AACV,aAAAC,EAAA,GAAAA,EAAA;AACA,aAAApJ,OAAA,GAAAA,OAAA;AAER,aAAKuK,GAAL,GAAS,KAAKpB,SAAL,CAAeG,UAAf,CAA0B,YAA1B,CAAT;AACA,aAAKkB,GAAL,GAAS,KAAKrB,SAAL,CAAeG,UAAf,CAA0B,YAA1B,CAAT;AACD;;;;yCAEuBE,I,EAAiB;AAEvC;AACA;AAEAA,cAAI,CAAChP,EAAL,GAAQ,KAAK2O,SAAL,CAAeM,QAAf,EAAR;AAGA,iBAAO,KAAKc,GAAL,CAASZ,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0B,MAAD,OAAC,CAAD,EAAC,EAAKJ,IAAL,CAA1B,EAAsCvP,IAAtC,CAA2C,UAAA4P,CAAC,EAAE;AACnD,mBAAOL,IAAI,CAAChP,EAAZ;AACD,WAFM,CAAP;AAGD;;;yCACuBgP,I,EAAiB;AAEvC;AACA;AAEAA,cAAI,CAAChP,EAAL,GAAQ,KAAK2O,SAAL,CAAeM,QAAf,EAAR;AAGA,iBAAO,KAAKe,GAAL,CAASb,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0B,MAAD,OAAC,CAAD,EAAC,EAAKJ,IAAL,CAA1B,EAAsCvP,IAAtC,CAA2C,UAAA4P,CAAC,EAAE;AACnD,mBAAOL,IAAI,CAAChP,EAAZ;AACD,WAFM,CAAP;AAGD;;;sCAEoBA,E,EAAU;AAE7B,iBAAO,KAAK+P,GAAL,CAASZ,GAAT,CAAanP,EAAb,EAAiB4H,GAAjB,GAAuB0H,SAAvB,GAAmC7P,IAAnC,CAAwC,UAAA4P,CAAC,EAAE;AAChD;AACA;AACA,gBAAIY,QAAQ,GAAGZ,CAAC,CAACL,IAAF,EAAf;AACApN,mBAAO,CAACC,GAAR,CAAYoO,QAAZ;AACA,mBAAOA,QAAP;AACD,WANM,CAAP;AAOD;;;sCACoBjQ,E,EAAU;AAE7B,iBAAO,KAAKgQ,GAAL,CAASb,GAAT,CAAanP,EAAb,EAAiB4H,GAAjB,GAAuB0H,SAAvB,GAAmC7P,IAAnC,CAAwC,UAAA4P,CAAC,EAAE;AAChD;AACA;AACA,gBAAIY,QAAQ,GAAGZ,CAAC,CAACL,IAAF,EAAf;AACApN,mBAAO,CAACC,GAAR,CAAYoO,QAAZ;AACA,mBAAOA,QAAP;AACD,WANM,CAAP;AAOD;;;yCAEoB;AAEnB,iBAAO,KAAKF,GAAL,CAASR,YAAT,EAAP;AACD;;;0CACqB;AAEpB,iBAAO,KAAKS,GAAL,CAAST,YAAT,EAAP;AACD;;;yCAGuBP,I,EAAe;AAErC,iBAAO,KAAKe,GAAL,CAASZ,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0BJ,IAA1B,CAAP;AACD;;;yCACuBA,I,EAAe;AAErC,iBAAO,KAAKgB,GAAL,CAASb,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0BJ,IAA1B,CAAP;AACD;;;yCAEuBhP,E,EAAU;AAEhC,iBAAO,KAAK+P,GAAL,CAASZ,GAAT,CAAanP,EAAb,aAAP;AACD;;;yCACuBA,E,EAAU;AAEhC,iBAAO,KAAKgQ,GAAL,CAASb,GAAT,CAAanP,EAAb,aAAP;AACD,S,CAED;;;;+CAE2B;AAEzB;;;;;;;;;;;;;;AAgBA,iBAAO,KAAK2O,SAAL,CAAeG,UAAf,CAAsC,YAAtC,EAAmD,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACC,OAAJ,CAAY,YAAZ,CAAF;AAAA,WAAtD,EAAmFF,YAAnF,EAAP;AACD;;;gDAC2B;AAE1B;;;;;;;;;;;;;;AAgBA,iBAAO,KAAKZ,SAAL,CAAeG,UAAf,CAAsC,YAAtC,EAAmD,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACC,OAAJ,CAAY,UAAZ,CAAF;AAAA,WAAtD,EAAiFF,YAAjF,EAAP;AACD;;;+CAG6BtH,S,EAAgB;AAE5C,iBAAO,KAAK0G,SAAL,CAAeG,UAAf,CAAsC,YAAtC,EAAmD,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,WAAV,EAAsB,IAAtB,EAA2BzH,SAA3B,CAAF;AAAA,WAAtD,EAA+FsH,YAA/F,EAAP;AACD;;;gDAE8B9H,Q,EAAe;AAE5C,iBAAO,KAAKkH,SAAL,CAAeG,UAAf,CAAsC,YAAtC,EAAmD,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,UAAV,EAAqB,IAArB,EAA0BjI,QAA1B,CAAF;AAAA,WAAtD,EAA6F8H,YAA7F,EAAP;AACD;;;+CAE6BtH,S,EAAgB;AAE5C,iBAAO,KAAK0G,SAAL,CAAeG,UAAf,CAAsC,YAAtC,EAAmD,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,WAAV,EAAsB,IAAtB,EAA2BzH,SAA3B,EAAsCwH,OAAtC,CAA8C,YAA9C,CAAF;AAAA,WAAtD,EAAqHF,YAArH,EAAP;AACD;;;gDAE8B9H,Q,EAAe;AAE5C,iBAAO,KAAKkH,SAAL,CAAeG,UAAf,CAAsC,YAAtC,EAAmD,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,UAAV,EAAqB,IAArB,EAA0BjI,QAA1B,EAAoCgI,OAApC,CAA4C,WAA5C,CAAF;AAAA,WAAtD,EAAkHF,YAAlH,EAAP;AACD,S,CAGD;;;;oCACmBI,a,EAAuBC,K,EAAY;AACpD,iBAAO,KAAKpK,OAAL,CAAaqK,MAAb,CAAoBF,aAApB,EAAmCC,KAAnC,CAAP;AACD,S,CAED;;;;mCACkBD,a,EAAuB;AACvC,iBAAO,KAAKnK,OAAL,CAAagK,GAAb,CAAiBG,aAAjB,CAAP;AACD;;;;;;;uBAhKUG,yB,EAAyB,gI,EAAA,gI,EAAA,gI;AAAA,K;;;aAAzBA,yB;AAAyB,eAAzBA,yBAAyB,K;AAAA,kBAFxB;;;;;sEAEDA,yB,EAAyB;cAHrC,wDAGqC;eAH1B;AACVrB,oBAAU,EAAE;AADF,S;AAG0B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;ACTtC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAYayB,yB;;;AAEX,yCAAoBvB,SAApB,EACUC,EADV,EAEUpJ,OAFV,EAEuC;AAAA;;AAFnB,aAAAmJ,SAAA,GAAAA,SAAA;AACV,aAAAC,EAAA,GAAAA,EAAA;AACA,aAAApJ,OAAA,GAAAA,OAAA;AAER,aAAKqJ,GAAL,GAAS,KAAKF,SAAL,CAAeG,UAAf,CAA0B,WAA1B,CAAT;AACD;;;;qCAImB9O,E,EAAU;AAE5B,iBAAO,KAAK6O,GAAL,CAASM,GAAT,CAAanP,EAAb,EAAiB4H,GAAjB,GAAuB0H,SAAvB,GAAmC7P,IAAnC,CAAwC,UAAA4P,CAAC,EAAE;AAChD,gBAAIc,SAAS,GAAGd,CAAC,CAACL,IAAF,EAAhB;AACA,mBAAOmB,SAAP;AACD,WAHM,CAAP;AAID;;;+CAE6BnQ,E,EAAS;AAErC,iBAAO,KAAK2O,SAAL,CAAeG,UAAf,CAAqC,WAArC,EAAiD,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,WAAV,EAAsB,IAAtB,EAA2B1P,EAA3B,CAAF;AAAA,WAApD,EAAsFuP,YAAtF,EAAP;AACD;;;+CAE6BvP,E,EAAS;AAErC,iBAAO,KAAK2O,SAAL,CAAeG,UAAf,CAAqC,WAArC,EAAiD,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,SAAV,EAAoB,IAApB,EAAyB1P,EAAzB,CAAF;AAAA,WAApD,EAAoFuP,YAApF,EAAP;AACD;;;sDACoCvP,E,EAAS;AAE5C,iBAAO,KAAK2O,SAAL,CAAeG,UAAf,CAAqC,WAArC,EAAiD,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,eAAV,EAA0B,IAA1B,EAA+B1P,EAA/B,CAAF;AAAA,WAApD,EAA0FuP,YAA1F,EAAP;AACD;;;yDACuC3L,K,EAAY;AAElD,iBAAO,KAAK+K,SAAL,CAAeG,UAAf,CAAqC,WAArC,EAAiD,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,eAAV,EAA0B,IAA1B,EAA+B9L,KAA/B,CAAF;AAAA,WAApD,EAA6F2L,YAA7F,EAAP;AACD;;;wCAEsBP,I,EAAgB;AAErC;AACA;AAEAA,cAAI,CAAChP,EAAL,GAAQ,KAAK2O,SAAL,CAAeM,QAAf,EAAR;AAEAxN,sBAAY,CAAC0C,OAAb,CAAqB,WAArB,EAAkC6K,IAAI,CAAChP,EAAvC;AAEA,iBAAO,KAAK6O,GAAL,CAASM,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0B,MAAD,OAAC,CAAD,EAAC,EAAKJ,IAAL,CAA1B,EAAsCvP,IAAtC,CAA2C,UAAA4P,CAAC,EAAE;AACnD,mBAAOL,IAAI,CAAChP,EAAZ;AACD,WAFM,CAAP;AAID;;;wCAEsBgP,I,EAAc;AAEnC,iBAAO,KAAKH,GAAL,CAASM,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0BJ,IAA1B,CAAP;AACD;;;;;;;uBAvDUkB,yB,EAAyB,gI,EAAA,gI,EAAA,gI;AAAA,K;;;aAAzBA,yB;AAAyB,eAAzBA,yBAAyB,K;AAAA,kBAFxB;;;;;sEAEDA,yB,EAAyB;cAHrC,wDAGqC;eAH1B;AACVzB,oBAAU,EAAE;AADF,S;AAG0B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;ACZtC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASa2B,uB;;;AAIX,uCAAoBzB,SAApB,EACUC,EADV,EAEUpJ,OAFV,EAEuC;AAAA;;AAFnB,aAAAmJ,SAAA,GAAAA,SAAA;AACV,aAAAC,EAAA,GAAAA,EAAA;AACA,aAAApJ,OAAA,GAAAA,OAAA;AAER,aAAKqJ,GAAL,GAAS,KAAKF,SAAL,CAAeG,UAAf,CAA0B,SAA1B,CAAT;AACD;;;;sCAEoBE,I,EAAc;AAEjC;AACA;AAEAA,cAAI,CAAChP,EAAL,GAAQ,KAAK2O,SAAL,CAAeM,QAAf,EAAR;AACAD,cAAI,CAACrG,SAAL,GAAiB,IAAjB;AAEAlH,sBAAY,CAAC0C,OAAb,CAAqB,SAArB,EAAgC6K,IAAI,CAAChP,EAArC;AAGA,iBAAO,KAAK6O,GAAL,CAASM,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0B,MAAD,OAAC,CAAD,EAAC,EAAKJ,IAAL,CAA1B,EAAsCvP,IAAtC,CAA2C,UAAA4P,CAAC,EAAE;AACnD,mBAAOL,IAAI,CAAChP,EAAZ;AACD,WAFM,CAAP;AAGD;;;2CAEyBgP,I,EAAc;AAEtC,iBAAO,KAAKH,GAAL,CAASM,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0B,MAAD,OAAC,CAAD,EAAC,EAAKJ,IAAL,CAA1B,EAAsCvP,IAAtC,CAA2C,UAAA4P,CAAC,EAAE;AACnD,mBAAOL,IAAI,CAAChP,EAAZ;AACD,WAFM,CAAP;AAGD;;;mCAEiBA,E,EAAU;AAE1B,iBAAO,KAAK6O,GAAL,CAASM,GAAT,CAAanP,EAAb,EAAiB4H,GAAjB,GAAuB0H,SAAvB,GAAmC7P,IAAnC,CAAwC,UAAA4P,CAAC,EAAE;AAChD;AACA;AACA,gBAAIY,QAAQ,GAAGZ,CAAC,CAACL,IAAF,EAAf;AACA,mBAAOiB,QAAP;AACD,WALM,CAAP;AAMD;;;sCAEiB;AAEhB,iBAAO,KAAKpB,GAAL,CAASU,YAAT,EAAP;AACD;;;sCAGoBP,I,EAAY;AAE/B,iBAAO,KAAKH,GAAL,CAASM,GAAT,CAAaH,IAAI,CAAChP,EAAlB,EAAsBoP,GAAtB,CAA0BJ,IAA1B,CAAP;AACD;;;sCAIoBhP,E,EAAU;AAE7B,iBAAO,KAAK6O,GAAL,CAASM,GAAT,CAAanP,EAAb,aAAP;AACD,S,CAED;;;;4CAEwB;AAEtB;;;;;;;;;;;;;;AAgBA,iBAAO,KAAK2O,SAAL,CAAeG,UAAf,CAAmC,SAAnC,EAA6C,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACC,OAAJ,CAAY,YAAZ,CAAF;AAAA,WAAhD,EAA6EF,YAA7E,EAAP;AACD;;;4CAG0BvP,E,EAAS;AAElC,iBAAO,KAAK2O,SAAL,CAAeG,UAAf,CAAmC,SAAnC,EAA6C,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,IAAV,EAAe,IAAf,EAAoB1P,EAApB,CAAF;AAAA,WAAhD,EAA2EuP,YAA3E,EAAP;AACD;;;2CAEyB3L,K,EAAY;AAEpC,iBAAO,KAAK+K,SAAL,CAAeG,UAAf,CAAmC,SAAnC,EAA6C,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,OAAV,EAAkB,IAAlB,EAAuB9L,KAAvB,CAAF;AAAA,WAAhD,EAAiF2L,YAAjF,EAAP;AACD;;;4CAE0BjE,I,EAAW;AAEpC,iBAAO,KAAKqD,SAAL,CAAeG,UAAf,CAAmC,SAAnC,EAA6C,UAAAU,GAAG;AAAA,mBAAEA,GAAG,CAACE,KAAJ,CAAU,MAAV,EAAiB,IAAjB,EAAsBpE,IAAtB,EAA4BmE,OAA5B,CAAoC,QAApC,CAAF;AAAA,WAAhD,EAAiGF,YAAjG,EAAP;AACD,S,CAGD;;;;oCACmBI,a,EAAuBC,K,EAAY;AACpD,iBAAO,KAAKpK,OAAL,CAAaqK,MAAb,CAAoBF,aAApB,EAAmCC,KAAnC,CAAP;AACD,S,CAED;;;;mCACkBD,a,EAAuB;AACvC,iBAAO,KAAKnK,OAAL,CAAagK,GAAb,CAAiBG,aAAjB,CAAP;AACD;;;;;;;uBA9GUS,uB,EAAuB,gI,EAAA,gI,EAAA,gI;AAAA,K;;;aAAvBA,uB;AAAuB,eAAvBA,uBAAuB,K;AAAA,kBAFtB;;;;;sEAEDA,uB,EAAuB;cAHnC,wDAGmC;eAHxB;AACV3B,oBAAU,EAAE;AADF,S;AAGwB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;ACTpC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOa4B,c;;;AAEX,gCAAc;AAAA;;AAEE,aAAAC,KAAA,GAAe,UAAf;AAFC;;;;mCAIT,CACP;;;;;;;uBAPUD,c;AAAc,K;;;YAAdA,c;AAAc,gC;AAAA;AAAA;AAAA,O;AAAA,c;AAAA,a;AAAA,kG;AAAA;AAAA;ACN3B;;AAA4E;;AAAS;;;;AAAT;;AAAA;;;;;;;;;sEDM/DA,c,EAAc;cAL1B,uDAK0B;eALhB;AACT1P,kBAAQ,EAAE,WADD;AAETC,qBAAW,EAAE,wBAFJ;AAGTC,mBAAS,EAAE,CAAC,wBAAD;AAHF,S;AAKgB,Q;;;;gBAIxB;;;;;;;;;;;;;;;;;;;;AEXH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAYa0P,qB;;;AAEX,uCAAc;AAAA;;AAEJ,aAAAxI,UAAA,GAAmC,IAAI,0DAAJ,EAAnC;AACA,aAAAX,OAAA,GAA6B,IAAI,0DAAJ,EAA7B;AAEV,aAAAoJ,YAAA,GAAe,EAAf;AALiB;;;;wCAOJ;AACX,cAAIpJ,OAAO,GAAG,IAAd,CADW,CACS;;AACpB,eAAKW,UAAL,CAAgB0I,IAAhB,CAAqB,KAAKD,YAA1B;AACA,eAAKpJ,OAAL,CAAaqJ,IAAb,CAAkBrJ,OAAlB,EAHW,CAGiB;AAC7B;;;iCAEK;AACJ,cAAIA,OAAO,GAAG,IAAd,CADI,CACgB;;AACpB,eAAKoJ,YAAL,GAAoB,EAApB,CAFI,CAEoB;;AACxB,eAAKpJ,OAAL,CAAaqJ,IAAb,CAAkBrJ,OAAlB;AACA,eAAKW,UAAL,CAAgB0I,IAAhB,CAAqB,KAAKD,YAA1B;AACA,iBAAOpJ,OAAP;AACD;;;mCAGO,CACP;;;;;;;uBAzBUmJ,qB;AAAqB,K;;;YAArBA,qB;AAAqB,wC;AAAA;AAAA;AAAA;AAAA,O;AAAA,e;AAAA,a;AAAA,uR;AAAA;AAAA;ACZlC;;AACI;;AAEI;;AACI;;AAA0C;AAAA,mBAAS,IAAAvG,MAAA,EAAT;AAAiB,WAAjB;;AAA1C;;AACJ;;AAEA;;AACI;;AAAI;;AAAoC;;AAC5C;;AACA;;AACI;;AAAyB;AAAA;AAAA;;AAA2B;;AACxD;;AAEA;;AACI;;AAA0C;AAAA,mBAAS,IAAA0G,aAAA,EAAT;AAAwB,WAAxB;;AAA0B;;AACxE;;AAOJ;;AACJ;;;;AAbqC;;AAAA;;;;;;;;;sEDCxBH,qB,EAAqB;cALjC,uDAKiC;eALvB;AACT5P,kBAAQ,EAAE,mBADD;AAETC,qBAAW,EAAE,gCAFJ;AAGTC,mBAAS,EAAE,CAAC,gCAAD;AAHF,S;AAKuB,Q;;;;gBAI/B;;;gBACA;;;;;;;;;;;;;;;;;;;;AEjBH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASa8P,kB;;;AAEX,kCAAqBlL,oBAArB,EAAkE;AAAA;;AAA7C,aAAAA,oBAAA,GAAAA,oBAAA;AAIX,aAAAmL,cAAA,GAAuC,IAAI,0DAAJ,EAAvC;AACA,aAAAzI,IAAA,GAA6B,IAAI,0DAAJ,EAA7B;AACA,aAAAf,OAAA,GAA6B,IAAI,0DAAJ,EAA7B;AACA,aAAAkB,MAAA,GAAgC,IAAI,0DAAJ,EAAhC;AAIV,aAAAuI,MAAA,GAAS,EAAT;AAXwE;;;;kCAe9DnR,C,EAAC;AACT,eAAKmR,MAAL,GAAcnR,CAAd;AAED;;;uCAEW;AACVsH,kBAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAxC,CAA8CC,OAA9C,GAAwD,OAAxD;AACAH,kBAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CC,OAA5C,GAAsD,MAAtD;AACD;;;+BAEG;AACF,cAAIC,OAAO,GAAG,IAAd,CADE,CACkB;;AACpB,eAAKwJ,cAAL,CAAoBH,IAApB,CAAyB,KAAK3K,WAA9B;AACA,eAAKsB,OAAL,CAAaqJ,IAAb,CAAkBrJ,OAAlB,EAHE,CAG0B;;AAC5B,eAAKe,IAAL,CAAUsI,IAAV,CAAe,KAAKI,MAApB;AACA,eAAKvI,MAAL,CAAYmI,IAAZ,CAAiB,KAAKnC,IAAtB;AACD;;;iCAEK;AACJ,cAAIlH,OAAO,GAAG,IAAd,CADI,CACgB;;AACpB,eAAKtB,WAAL,GAAmB,EAAnB,CAFI,CAEmB;;AACvB,eAAK+K,MAAL,GAAc,EAAd;AACA,eAAKzJ,OAAL,CAAaqJ,IAAb,CAAkBrJ,OAAlB;AACA,eAAKwJ,cAAL,CAAoBH,IAApB,CAAyB,KAAK3K,WAA9B;AACA,eAAKqC,IAAL,CAAUsI,IAAV,CAAe,KAAKI,MAApB;AACA,eAAKvI,MAAL,CAAYmI,IAAZ,CAAiB,KAAKnC,IAAtB;AACA,iBAAOlH,OAAP;AACD;;;oCAEW1H,C,EAAGM,E,EAAE;AACf,cAAGN,CAAC,IAAI,IAAR,EAAa;AACXsH,oBAAQ,CAACC,cAAT,CAAwBjH,EAAxB,EAA4BkH,KAA5B,CAAkCC,OAAlC,GAA4C,MAA5C;AACAH,oBAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CC,OAA5C,GAAsD,OAAtD;AACD;AACF;;;mCAEO,CAGP;;;;;;;uBAxDUwJ,kB,EAAkB,sK;AAAA,K;;;YAAlBA,kB;AAAkB,qC;AAAA;AAAA;AAAA;AAAA,O;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;AAAA,e;AAAA,a;AAAA,wjB;AAAA;AAAA;ACT/B;;AAGI;;AACI;;AAAsD;AAAA,mBAAU,IAAAG,WAAA,SAAoB,cAApB,CAAV;AAA6C,WAA7C,EAA8C,KAA9C,EAA8C;AAAA,mBAAQ,IAAAC,SAAA,QAAR;AAAyB,WAAvE;;AAAyE;;AAC/H;;AACI;;AACI;;AAA0C;AAAA,mBAAS,IAAA/G,MAAA,EAAT;AAAiB,WAAjB;;AAA1C;;AACJ;;AAEA;;AAGI;;AACI;;AAAI;;AAAW;;AACf;;AAAyB;AAAA;AAAA;;AAEzB;;AAAA;;AACJ;;AAEA;;AAA4E;AAAA,mBAAS,IAAAgH,YAAA,EAAT;AAAuB,WAAvB;;AAA5E;;AAEA;;AACI;;AACI;;AAAc;;AAAsB;;AACpC;;AAA+B;AAAA,mBAAS,IAAAA,YAAA,EAAT;AAAuB,WAAvB;;AAA/B;;AAAyD;;AAC7D;;AACJ;;AAEJ;;AAEA;;AACI;;AAAuC;AAAA,mBAAS,IAAAC,IAAA,EAAT;AAAe,WAAf;;AAAiB;;AAC5D;;AACJ;;AAMJ;;AACJ;;;;AA1B6C;;AAAA;;;;;;;;;sEDNhCN,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACThQ,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,6BAAD;AAHF,S;AAKoB,Q;;;;;;gBAI5B;;;gBACA;;;gBACA;;;gBACA;;;gBACA;;;gBACA;;;;;;;;;;;;;;;;;;;;AElBH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;QAOaqQ,e;;;AAEX,iCAAc;AAAA;AAAG;;;;mCAET,CACP;;;;;;;uBALUA,e;AAAe,K;;;YAAfA,e;AAAe,iC;AAAA,c;AAAA,a;AAAA,sE;AAAA;AAAA;ACP5B;;AACC;;AAA2D;;AAAsB;;AACjF;;AAAG;;AAAkD;;AACtD;;;;AAFI;;AAAA;;;;;;;;;sEDMSA,e,EAAe;cAL3B,uDAK2B;eALjB;AACTvQ,kBAAQ,EAAE,YADD;AAETC,qBAAW,EAAE,yBAFJ;AAGTC,mBAAS,EAAE,CAAC,yBAAD;AAHF,S;AAKiB,Q;;;;;;;;;;;;;;;;;;;;AEP5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACEM;;AAAqB;AAAA;;AAAA;;AAAA;AAAA;;AACnB;;AAA+D;;AAAe;;AAChF;;;;;;AADY;;AAAA;;;;;;;;AAEZ;;AAA8B;AAAA;;AAAA;;AAAA;AAAA;;AAC5B;;AAAkE;;AAAe;;AACnF;;;;;;AADY;;AAAA;;;;;;;;AAQV;;AAAqB;AAAA;;AAAA;;AAAA;AAAA;;AACjB;;AAA+D;;AAAe;;AAClF;;;;;;AADc;;AAAA;;;;;;;;AAEd;;AAA8B;AAAA;;AAAA;;AAAA;AAAA;;AAC5B;;AAAkE;;AAAe;;AACnF;;;;;;AADY;;AAAA;;;;;;;;AAsBZ;;AACE;;AACE;;AAAG;;AAAqB;;AAC1B;;AACA;;AACE;;AAAU;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA+D;;AAAY;;AACvF;;AACA;;AACE;;AAAU;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA8D;;AAAa;;AACvF;;AACA;;AACF;;;;;;AATO;;AAAA;;;;;;AALT;;AAGE;;AAaF;;;;;;AAbO;;AAAA;;;;;;AA2BL;;AACE;;AAAG;;AAAwC;;AAC7C;;;;;;AADK;;AAAA;;;;;;AAEL;;AACE;;AAAG;;AAA0E;;AAC/E;;;;;;AADK;;AAAA;;;;;;;;AAEL;;AACE;;AAAQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAqG;;AAAK;;AACrH;;;;;;AACA;;AACC;;AAAsE;;AAAa;;AACnF;;;;;;AAZF;;AACE;;AAGA;;AAGA;;AAGD;;AAGC;;AACF;;;;;;AAbO;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGD;;AAAA;;;;;;AAbR;;AAGE;;AAgBF;;;;;;AAhBO;;AAAA;;;;QDxCEsQ,e;;;AAEX,+BAAoB3N,OAApB,EACoB+G,yBADpB,EAEoB9E,oBAFpB,EAGoBC,qBAHpB,EAImBJ,MAJnB,EAIkD/C,KAJlD,EAIwE6O,MAJxE,EAI2F;AAAA;;AAJvE,aAAA5N,OAAA,GAAAA,OAAA;AACA,aAAA+G,yBAAA,GAAAA,yBAAA;AACA,aAAA9E,oBAAA,GAAAA,oBAAA;AACA,aAAAC,qBAAA,GAAAA,qBAAA;AACD,aAAAJ,MAAA,GAAAA,MAAA;AAA+B,aAAA/C,KAAA,GAAAA,KAAA;AAAsB,aAAA6O,MAAA,GAAAA,MAAA;AAIjE,aAAAC,QAAA,GAAW,KAAX,CAJoF,CAIlE;;AAElB,aAAAC,WAAA,GAAc,EAAd;AACA,aAAAC,mBAAA,GAAsB,CAAtB;AACA,aAAAC,QAAA,GAAW,EAAX;AACA,aAAAC,gBAAA,GAAmB,CAAnB,CAToF,CAW3F;;AACO,aAAAC,SAAA,GAAY,KAAZ;AAXL,aAAKvM,MAAL,GAAc,EAAd;AACA;;;;mCAcM;AAAA;;AAEN;;AAEA;;;AAGA;AAEA,cAAG1D,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,SAAnC,EAA6C;AAC3C,iBAAK6P,mBAAL,GAA2B,CAA3B;AACA,iBAAKG,SAAL,GAAiB,IAAjB;AACA,iBAAKnH,yBAAL,CAA+BE,sBAA/B,CAAsDhJ,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAtD,EAAuFsC,SAAvF,CAAiG,UAAAC,GAAG,EAAE;AACpG,kBAAIC,CAAJ;;AACA,mBAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAACD,GAAG,CAACpB,MAAlB,EAA0BqB,CAAC,EAA3B,EAA8B;AAC5B,oBAAGD,GAAG,CAACC,CAAD,CAAH,CAAO0G,MAAP,IAAiB,WAApB,EAAgC;AAC9BhJ,yBAAO,CAACC,GAAR,CAAY,sCAAZ,EAAoDoC,GAAG,CAACC,CAAD,CAAH,CAAOlE,EAA3D;AACA,sBAAI2R,MAAM,GAAC,IAAX;AACA,sBAAIC,EAAJ;;AACA,uBAAKA,EAAE,GAAC,CAAR,EAAWA,EAAE,GAAC,MAAI,CAACJ,QAAL,CAAc3O,MAA5B,EAAmC+O,EAAE,EAArC,EAAwC;AACtC,wBAAG3N,GAAG,CAACC,CAAD,CAAH,CAAOlE,EAAP,IAAa,MAAI,CAACwR,QAAL,CAAcI,EAAd,EAAkBC,WAAlC,EAA8C;AAC5CF,4BAAM,GAAG,KAAT;AACD;AACF;;AAAA,sBAAGA,MAAM,IAAE,IAAX,EAAgB;AACf,0BAAI,CAACF,gBAAL,GAAwB,MAAI,CAACA,gBAAL,GAAwB,CAAhD;;AACA,0BAAI,CAACD,QAAL,CAAchI,IAAd,CAAmB;AAACqI,iCAAW,EAAE5N,GAAG,CAACC,CAAD,CAAH,CAAOlE,EAArB;AAAyB2K,6BAAO,EAAE1G,GAAG,CAACC,CAAD,CAAH,CAAOyG,OAAzC;AAAkDC,4BAAM,EAAE3G,GAAG,CAACC,CAAD,CAAH,CAAO0G,MAAjE;AAAyEkH,iCAAW,EAAE;AAAtF,qBAAnB;AACD;;AAED,wBAAI,CAACpM,qBAAL,CAA2BmF,QAA3B,CAAoC5G,GAAG,CAACC,CAAD,CAAH,CAAOyG,OAA3C,EAAoDlL,IAApD,CAAyD,UAACwJ,IAAD,EAAU;AACjE,wBAAI8I,CAAJ;;AACA,yBAAKA,CAAC,GAAC,CAAP,EAAUA,CAAC,GAAC,MAAI,CAACP,QAAL,CAAc3O,MAA1B,EAAiCkP,CAAC,EAAlC,EAAqC;AACnC,0BAAG,MAAI,CAACP,QAAL,CAAcO,CAAd,EAAiBpH,OAAjB,IAA4B1B,IAAI,CAACjJ,EAAjC,IAAuC,MAAI,CAACwR,QAAL,CAAcO,CAAd,EAAiBD,WAAjB,IAAgC,IAA1E,EAA+E;AAC7ElQ,+BAAO,CAACC,GAAR,CAAY,kCAAZ,EAAgDoH,IAAI,CAACsC,MAArD;AACA,8BAAI,CAACiG,QAAL,CAAcO,CAAd,EAAiBD,WAAjB,GAA+B7I,IAAI,CAACsC,MAApC;AACD;AACF;AAEF,mBATD;AAWD;AACF;AACF,aA7BD;AA8BD;AAED;;;;AAIA;;;AAEA,eAAK9F,oBAAL,CAA0BuD,UAA1B,CAAqCvH,YAAY,CAACC,OAAb,CAAqB,SAArB,CAArC,EAAsEjC,IAAtE,CAA2E,UAACwJ,IAAD,EAAU;AAEnF,gBAAI+I,gBAAgB,GAAG/I,IAAI,CAACrF,KAA5B;;AACA,kBAAI,CAAC2G,yBAAL,CAA+B0H,gCAA/B,CAAgED,gBAAhE,EAAkFhO,SAAlF,CAA4F,UAAAC,GAAG,EAAE;AAC/F,kBAAIC,CAAJ;;AACA,mBAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAACD,GAAG,CAACpB,MAAlB,EAA2BqB,CAAC,EAA5B,EAA+B;AAC7B,oBAAID,GAAG,CAACC,CAAD,CAAH,CAAO0G,MAAP,IAAe,WAAnB,EAA+B;AAC7BhJ,yBAAO,CAACC,GAAR,CAAY,sCAAZ,EAAoDoC,GAAG,CAACC,CAAD,CAAH,CAAOlE,EAA3D;AACA,sBAAI2R,MAAM,GAAC,IAAX;AACA,sBAAIC,EAAJ;;AACA,uBAAKA,EAAE,GAAC,CAAR,EAAWA,EAAE,GAAC,MAAI,CAACN,WAAL,CAAiBzO,MAA/B,EAAsC+O,EAAE,EAAxC,EAA2C;AACzC,wBAAG3N,GAAG,CAACC,CAAD,CAAH,CAAOlE,EAAP,IAAa,MAAI,CAACsR,WAAL,CAAiBM,EAAjB,EAAqBC,WAArC,EAAiD;AAC/CF,4BAAM,GAAG,KAAT;AACD;AACF;;AACD,sBAAGA,MAAM,IAAE,IAAX,EAAgB;AACd,0BAAI,CAACJ,mBAAL,GAA2B,MAAI,CAACA,mBAAL,GAA2B,CAAtD;;AACA,0BAAI,CAACD,WAAL,CAAiB9H,IAAjB,CAAsB;AAACf,4BAAM,EAAE,IAAT;AAAeoJ,iCAAW,EAAE5N,GAAG,CAACC,CAAD,CAAH,CAAOlE,EAAnC;AAAuCkS,+BAAS,EAAEjO,GAAG,CAACC,CAAD,CAAH,CAAOiO;AAAzD,qBAAtB;AACD,mBAZ4B,CAa7B;;;AACA,wBAAI,CAAC1M,oBAAL,CAA0BuD,UAA1B,CAAqC/E,GAAG,CAACC,CAAD,CAAH,CAAOiO,SAA5C,EAAuD1S,IAAvD,CAA4D,UAACwJ,IAAD,EAAU;AACpE,wBAAI8I,CAAJ;;AACA,yBAAKA,CAAC,GAAC,CAAP,EAAUA,CAAC,GAAC,MAAI,CAACT,WAAL,CAAiBzO,MAA7B,EAAoCkP,CAAC,EAArC,EAAwC;AACtC,0BAAG,MAAI,CAACT,WAAL,CAAiBS,CAAjB,EAAoBG,SAApB,IAAiCjJ,IAAI,CAACjJ,EAAtC,IAA4C,MAAI,CAACsR,WAAL,CAAiBS,CAAjB,EAAoBtJ,MAApB,IAA8B,IAA7E,EAAkF;AAChF,8BAAI,CAAC6I,WAAL,CAAiBS,CAAjB,EAAoBtJ,MAApB,GAA6BQ,IAAI,CAACR,MAAlC;AACA7G,+BAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CoH,IAAI,CAACR,MAApD;AACD;AACF;AACF,mBARD;AASD;AACF;AACF,aA5BD;AA6BD,WAhCD;AAkCD;AAED;;;;mCAEQ;AAEN;AACA,cAAIxG,MAAM,GAAGF,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB,GAAtC;AACA,cAAIQ,OAAJ;AACA;;;;;;;;;;;;AAWD,cAAI2P,MAAM,GAAG3Q,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAb;;AACA,cAAGD,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,aAAnC,EAAiD;AAC/C,gBAAI2Q,IAAI,GAAG,yBAAyBD,MAApC;AACD,iBAAK7P,KAAL,CAAWW,QAAX,CAAoB,CAACmP,IAAD,CAApB;AACA,WAHD,MAGK;AACJ,gBAAIA,IAAI,GAAG,qBAAqBD,MAAhC;AACA,iBAAK7P,KAAL,CAAWW,QAAX,CAAoB,CAACmP,IAAD,CAApB;AACA;AACD;AAED;;;;oCAES;AACP;AAEA,eAAK9P,KAAL,CAAWW,QAAX,CAAoB,CAAC,aAAD,CAApB;AACD;;;mCAEO;AACN,eAAKX,KAAL,CAAWW,QAAX,CAAoB,CAAC,aAAD,CAApB;AACD;;;mCAEO;AACN,eAAKM,OAAL,CAAa8O,MAAb;AACD;AAED;;;;;;;;;yCAQc;AAEZ;AAEA,cAAG7Q,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,aAAnC,EAAiD;AAE/CsF,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAkD,OAAlD;AAEF;AAEC,WAND,MAMM,IAAG1F,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,SAAnC,EAA6C;AAEjDsF,oBAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CC,OAA/C,GAAyD,OAAzD;AACD,WAbW,CAcZ;;AACD;AAED;;;;;gCAGK;AACHH,kBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAkD,MAAlD;AACD;;;iCAEK;AACJH,kBAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CC,OAA/C,GAAyD,MAAzD;AACD;;;wCAEY;AACX,cAAI,KAAKkK,QAAL,IAAiB,KAArB,EAA2B;AACzBrK,oBAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CC,OAA5C,GAAsD,OAAtD;AACA,iBAAKkK,QAAL,GAAgB,IAAhB;AACD,WAHD,MAGM,IAAG,KAAKA,QAAL,IAAiB,IAApB,EAAyB;AAC7BrK,oBAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CC,OAA5C,GAAsD,MAAtD;AACA,iBAAKkK,QAAL,GAAgB,KAAhB;AACD,WAHK,MAGD;AACHzP,mBAAO,CAACC,GAAR,CAAY,mBAAZ;AACD;AAEF;AAED;;;;+BAEO7B,E,EAAS;AAAA;;AACd4B,iBAAO,CAACC,GAAR,CAAY,cAAZ,EADc,CAEd;;AACA,cAAIqC,CAAJ;;AACA,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAC,KAAKoN,WAAL,CAAiBzO,MAA/B,EAAsCqB,CAAC,EAAvC,EAA0C;AACxC,gBAAG,KAAKoN,WAAL,CAAiBpN,CAAjB,EAAoB2N,WAApB,IAAmC7R,EAAtC,EAAyC;AACvC,mBAAKsR,WAAL,CAAiBiB,MAAjB,CAAwBrO,CAAxB,EAA2B,CAA3B;AAEA;;;;AAGA,mBAAKqN,mBAAL,GAA2B,CAA3B;AACD;AACF,WAba,CAed;;;AACA,cAAIiB,aAAa,GAAa,IAAI,+DAAJ,EAA9B;AACA,eAAKjI,yBAAL,CAA+BkI,YAA/B,CAA4CzS,EAA5C,EAAgDP,IAAhD,CAAqD,UAACwJ,IAAD,EAAU;AAC7DuJ,yBAAa,GAAGvJ,IAAhB;AACAuJ,yBAAa,CAAC5H,MAAd,GAAuB,UAAvB;;AACA,kBAAI,CAACL,yBAAL,CAA+BmI,eAA/B,CAA+CF,aAA/C;AACD,WAJD;AAKD;AAED;;;;;8BAGMxS,E,EAAS;AAAA;;AACb4B,iBAAO,CAACC,GAAR,CAAY,eAAZ,EADa,CAEb;;AACA,cAAIqC,CAAJ;;AACA,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAC,KAAKoN,WAAL,CAAiBzO,MAA/B,EAAsCqB,CAAC,EAAvC,EAA0C;AACxC,gBAAG,KAAKoN,WAAL,CAAiBpN,CAAjB,EAAoB2N,WAApB,IAAmC7R,EAAtC,EAAyC;AACvC,mBAAKsR,WAAL,CAAiBiB,MAAjB,CAAwBrO,CAAxB,EAA2B,CAA3B;AAEA;;;;AAGA,mBAAKqN,mBAAL,GAA2B,CAA3B;AACD;AACF,WAbY,CAcb;;;AACA,cAAIiB,aAAa,GAAa,IAAI,+DAAJ,EAA9B;AACA,eAAKjI,yBAAL,CAA+BkI,YAA/B,CAA4CzS,EAA5C,EAAgDP,IAAhD,CAAqD,UAACwJ,IAAD,EAAU;AAC7DuJ,yBAAa,GAAGvJ,IAAhB;AACAuJ,yBAAa,CAAC5H,MAAd,GAAuB,WAAvB;;AACA,kBAAI,CAACL,yBAAL,CAA+BmI,eAA/B,CAA+CF,aAA/C;AACD,WAJD;AAKD;AAEA;;;;;8BAGSxS,E,EAAS;AAAA;;AACb,cAAIkE,CAAJ;;AACA,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAC,KAAKsN,QAAL,CAAc3O,MAA5B,EAAmCqB,CAAC,EAApC,EAAuC;AACrC,gBAAG,KAAKsN,QAAL,CAActN,CAAd,EAAiByG,OAAjB,IAA4B3K,EAA/B,EAAkC;AAChC;AACA;AACA;AACA,mBAAKwR,QAAL,CAActN,CAAd,EAAiB0G,MAAjB,GAA0B,QAA1B;AACD;AACF;;AAED,eAAKL,yBAAL,CAA+BoI,sBAA/B,CAAsD3S,EAAtD,EAA0DgE,SAA1D,CAAoE,UAAAC,GAAG,EAAE;AACvE,gBAAIC,CAAJ;AACA,gBAAIsO,aAAa,GAAa,IAAI,+DAAJ,EAA9B;;AACA,iBAAItO,CAAC,GAAC,CAAN,EAASA,CAAC,GAACD,GAAG,CAACpB,MAAf,EAAuBqB,CAAC,EAAxB,EAA2B;AACzB,kBAAGD,GAAG,CAACC,CAAD,CAAH,CAAOiO,SAAP,IAAoB1Q,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAvB,EAAuD;AACrD8Q,6BAAa,GAAGvO,GAAG,CAACC,CAAD,CAAnB;AACAsO,6BAAa,CAAC5H,MAAd,GAAuB,QAAvB;AACAhJ,uBAAO,CAACC,GAAR,CAAY,cAAZ;;AACA,sBAAI,CAAC0I,yBAAL,CAA+BmI,eAA/B,CAA+CF,aAA/C;AACD;AACF;AACF,WAXD;AAYD;;;;;;;uBAvRMrB,e,EAAe,mI,EAAA,0K,EAAA,sK,EAAA,uJ,EAAA,+H,EAAA,uH,EAAA,mI;AAAA,K;;;YAAfA,e;AAAe,iC;AAAA;AAAA;AAAA,O;AAAA,e;AAAA,a;AAAA,gkC;AAAA;AAAA;AC1B5B;;AACI;;AACE;;AAGA;;AAIF;;AACA;;AACI;;AAAK;AAAA,mBAAS,IAAAyB,QAAA,EAAT;AAAmB,WAAnB;;AAAL;;AACJ;;AACA;;AACI;;AAGA;;AAGA;;AAAG;AAAA,mBAAS,IAAAC,QAAA,EAAT;AAAmB,WAAnB;;AAAkC;;AAAM;;AAC3C;;AAAgB;AAAA,mBAAS,IAAAC,QAAA,EAAT;AAAmB,WAAnB;;AAAqB;;AAAM;;AAC3C;;AAAqC;;AAAM;;AAC3C;;AAAiB;AAAA,mBAAS,IAAAC,SAAA,EAAT;AAAoB,WAApB;;AAAsB;;AAAQ;;AAE/C;;AAA6B;AAAA,mBAAS,IAAAC,aAAA,EAAT;AAAwB,WAAxB;;AAA7B;;AACJ;;AACJ;;AACA;;AACI;;AAAI;;AAAU;;AAClB;;AAGA;;AACI;;AACE;;AAAI;;AAAG;;AAAkB;;AAAI;;AAC7B;;AACA;;AAiBA;;AACA;;AAAyC;AAAA,mBAAS,IAAAC,KAAA,EAAT;AAAgB,WAAhB;;AAAkB;;AAAK;;AAClE;;AACJ;;AAEA;;AACE;;AACE;;AAAI;;AAAG;;AAAkB;;AAAI;;AAC7B;;AACA;;AAoBA;;AACA;;AAAyC;AAAA,mBAAS,IAAAC,MAAA,EAAT;AAAiB,WAAjB;;AAAmB;;AAAK;;AACnE;;AACF;;AAEA;;AACE;;AACE;;AAAI;;AAAG;;AAAI;;AAAI;;AACf;;AACA;;AAAG;AAAA,mBAAS,IAAAL,QAAA,EAAT;AAAmB,WAAnB;;AAAkC;;AAAM;;AAC3C;;AAAgB;AAAA,mBAAS,IAAAC,QAAA,EAAT;AAAmB,WAAnB;;AAAqB;;AAAM;;AAC3C;;AAAqC;;AAAM;;AAC3C;;AAAiB;AAAA,mBAAS,IAAAC,SAAA,EAAT;AAAoB,WAApB;;AAAsB;;AAAQ;;AAG/C;;AAAyC;AAAA,mBAAS,IAAAC,aAAA,EAAT;AAAwB,WAAxB;;AAA0B;;AAAK;;AAC1E;;AACF;;;;AAlGS;;AAAA;;AAGA;;AAAA;;AASE;;AAAA;;AAGA;;AAAA;;AAYH;;AAAA;;AAQmB;;AAAA;;AA0BF;;AAAA;;;;;;;;;sEDrCZ7B,e,EAAe;cAN3B,uDAM2B;eANjB;AACTxQ,kBAAQ,EAAE,YADD;AAETC,qBAAW,EAAE,yBAFJ;AAGTC,mBAAS,EAAE,CAAC,yBAAD;AAHF,S;AAMiB,Q;;;;;;;;;;;;;;;;;;gBAC3B;;;;;;;;;;;;;;;;;;;;AE3BD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACQiC;;AAAyB;;AAAW;;;;;;AAAX;;AAAA;;;;;;AAC1B;;;;;;AAAyB;;;;QDF5CsS,gB;;;AAKX,kCAAc;AAAA;;AAJJ,aAAA/L,OAAA,GAA6B,IAAI,0DAAJ,EAA7B;AAEM,aAAAgM,MAAA,GAAS,EAAT;AAEC;;;;iCAEX;AACJ,cAAIhM,OAAO,GAAG,IAAd,CADI,CACgB;;AACpB,eAAKA,OAAL,CAAaqJ,IAAb,CAAkBrJ,OAAlB;AACA,iBAAOA,OAAP;AACD;;;mCAEO,CACP;;;;;;;uBAdU+L,gB;AAAgB,K;;;YAAhBA,gB;AAAgB,kC;AAAA;AAAA;AAAA;AAAA,O;AAAA;AAAA;AAAA,O;AAAA,c;AAAA,a;AAAA,wO;AAAA;AAAA;ACP7B;;AACI;;AAEI;;AACI;;AAA0C;AAAA,mBAAS,IAAAnJ,MAAA,EAAT;AAAiB,WAAjB;;AAA1C;;AACJ;;AAEA;;AACI;;AAAqB;;AAAyC;;AAC9D;;AAAoB;;AAApB;;AACJ;;AAEJ;;AACJ;;;;AALqC;;AAAA;;AACA;;AAAA;;;;;;;;;sEDFxBmJ,gB,EAAgB;cAL5B,uDAK4B;eALlB;AACTxS,kBAAQ,EAAE,aADD;AAETC,qBAAW,EAAE,0BAFJ;AAGTC,mBAAS,EAAE,CAAC,0BAAD;AAHF,S;AAKkB,Q;;;;gBAC1B;;;gBACA;;;gBACA;;;;;;;;;;;;;;;;;;;;AEVH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACqBY;;AAAiD;AAAA;;AAAA;;AAAA;AAAA;;AAAmB;;AAAK;;;;sEDVrF;;;QAOawS,oB;;;AAWX,oCAAoB/N,MAApB,EACUC,OADV,EAEUC,OAFV,EAGU4F,gBAHV,EAG4C;AAAA;;AAHxB,aAAA9F,MAAA,GAAAA,MAAA;AACV,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAA4F,gBAAA,GAAAA,gBAAA;AATV,aAAAvF,KAAA,GAAQ,EAAR;AAGU,aAAAyN,GAAA,GAAyB,IAAI,0DAAJ,EAAzB;AACA,aAAAtJ,MAAA,GAA4B,IAAI,0DAAJ,EAA5B;AAON,aAAKnE,KAAL,GAAa,EAAb;AACA;;;;iCAEKnG,C,EAAC;AAAA;;AACR,cAAMM,EAAE,GAAGqJ,IAAI,CAACkK,MAAL,GAAchM,QAAd,CAAuB,EAAvB,EAA2BiM,SAA3B,CAAqC,CAArC,CAAX,CADQ,CAC4C;;AACpD,cAAMC,IAAI,GAAG/T,CAAC,CAACgU,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb,CAFQ,CAEwB;;AAChC,cAAMC,QAAQ,aAAM,KAAKC,SAAX,cAAwB7T,EAAxB,CAAd,CAHQ,CAGoC;;AAC5C,cAAMwP,GAAG,GAAG,KAAKpE,gBAAL,CAAsB0I,UAAtB,CAAiCF,QAAjC,CAAZ;AACA,cAAMG,IAAI,GAAG,KAAK3I,gBAAL,CAAsB4I,WAAtB,CAAkCJ,QAAlC,EAA4CH,IAA5C,CAAb,CALQ,CAOR;;AACA,eAAKQ,aAAL,GAAqBF,IAAI,CAACG,iBAAL,EAArB;AACAH,cAAI,CAACI,eAAL,GAAuBC,IAAvB,CAA4B,gEAAS,YAAM;AACvC,mBAAI,CAACC,QAAL,GAAgB7E,GAAG,CAAC8E,cAAJ,EAAhB;AAEH,WAH2B,CAA5B,EAIKtQ,SAJL;AAOA;;;iCACI;AACJ,cAAIsP,GAAG,GAAG,KAAKiB,cAAL,CAAoBC,aAApB,CAAkCC,KAA5C;AACA,eAAKnB,GAAL,CAAS7C,IAAT,CAAc6C,GAAd;AACA,eAAKtJ,MAAL,CAAYyG,IAAZ,CAAiB,IAAjB;AACAiE,eAAK,CAAC,sCAAD,CAAL;AACA,iBAAOpB,GAAP;AACD;;;mCAEO;AACN,eAAKtJ,MAAL,CAAYyG,IAAZ,CAAiB,IAAjB;AACA,eAAK6C,GAAL,CAAS7C,IAAT,CAAc,EAAd;AACD;;;mCAEO,CACP;;;;;;;uBAlDU4C,oB,EAAoB,+H,EAAA,uH,EAAA,yI,EAAA,uJ;AAAA,K;;;YAApBA,oB;AAAoB,uC;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;AClBjC;;AACI;;AAEI;;AACI;;AAA0C;AAAA,mBAAS,IAAAsB,QAAA,EAAT;AAAmB,WAAnB;;AAA1C;;AACJ;;AAEA;;AACI;;AAA8B;;AAAI;;AAAqB;;AAAK;;AAC5D;;AAA6B;AAAA,mBAAU,IAAAC,QAAA,QAAV;AAA0B,WAA1B;;AAA7B;;AACJ;;AAGA;;AACI;;;;AACJ;;AAGA;;;;AAEA;;AACI;;;;AAEA;;AAIJ;;AACJ;;AACJ;;;;AAfyD;;AAAA;;AAIhB;;AAAA;;AAGrB;;AAAA;;;;;;;;;;sEDHPvB,oB,EAAoB;cALhC,uDAKgC;eALtB;AACT1S,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,+BAAD;AAHF,S;AAKsB,Q;;;;;;;;;;;;gBAE9B,uD;iBAAU,W;;;gBAKV;;;gBACA;;;gBACA;;;;;;;;;;;;;;;;;;;;AE3BH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACYgB;;AAA0D;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAsB,OAAtB,EAAsB;AAAA;;AAAA;;AAAA;;AAAA;AAAA,SAAtB;;AAA1D;;;;;;;;AACA;;AAAiE;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAyB,OAAzB,EAAyB;AAAA;;AAAA;;AAAA;;AAAA;AAAA,SAAzB;;AAAjE;;;;;;AAFJ;;AACI;;AACA;;AACJ;;;;;;;;AAFS;;AAAA;;AACA;;AAAA;;;;;;;;QDLRgU,qB;;;AAEX,uCAAc;AAAA;;AAEJ,aAAAvN,UAAA,GAAgC,IAAI,0DAAJ,EAAhC;AACA,aAAAF,OAAA,GAA6B,IAAI,0DAAJ,EAA7B;AAEV,aAAAuB,SAAA,GAAY,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,CAAZ;AACA,aAAAmM,OAAA,GAAU,CAAC,CAAX;AANiB;;;;wCAQJ;AACX,cAAIxN,UAAU,GAAG,CAAjB;AACA,cAAIpD,CAAC,GAAG,CAAR;AACA,cAAIkD,OAAO,GAAG,IAAd;;AACA,eAAKlD,CAAL,EAAQA,CAAC,GAAG,KAAKyE,SAAL,CAAe9F,MAA3B,EAAoCqB,CAAC,EAArC,EAAwC;AACtC,gBAAG,KAAKyE,SAAL,CAAezE,CAAf,KAAqB,IAAxB,EAA6B;AAC3BoD,wBAAU,GAAGA,UAAU,GAAG,CAA1B,CAD2B,CACE;AAC9B,aAFD,MAGI;AACF,mBAAKA,UAAL,CAAgBmJ,IAAhB,CAAqBnJ,UAArB;AACA,qBAAOA,UAAP,CAFE,CAEiB;AACpB;AACF;;AACD,eAAKA,UAAL,CAAgBmJ,IAAhB,CAAqBnJ,UAArB;AACA,eAAKF,OAAL,CAAaqJ,IAAb,CAAkBrJ,OAAlB,EAdW,CAciB;;AAC5B,iBAAOE,UAAP,CAfW,CAeQ;AACpB;;;iCAEK;AACJ,cAAIF,OAAO,GAAG,IAAd,CADI,CACgB;;AACpB,cAAIE,UAAU,GAAG,CAAC,CAAlB,CAFI,CAEiB;;AACrB,eAAKF,OAAL,CAAaqJ,IAAb,CAAkBrJ,OAAlB;AACA,eAAKE,UAAL,CAAgBmJ,IAAhB,CAAqBnJ,UAArB;AACA,iBAAOF,OAAP;AACD;;;iCAEQlD,C,EAAC;AACR,cAAG,KAAK4Q,OAAL,IAAgB,CAAC,CAApB,EAAsB;AACpB,iBAAK5Q,CAAL,EAAQA,CAAC,IAAG,CAAZ,EAAeA,CAAC,EAAhB,EAAmB;AACjB,mBAAKyE,SAAL,CAAezE,CAAf,IAAoB,IAApB;AACD;AACF;AACF;;;+BAEMA,C,EAAC;AACN,cAAG,KAAK4Q,OAAL,IAAgB,CAAC,CAApB,EAAsB;AACpB,gBAAI/C,CAAJ;;AACF,iBAAKA,CAAC,GAAG7N,CAAT,EAAY6N,CAAC,IAAG,CAAhB,EAAmBA,CAAC,EAApB,EAAuB;AACrB,mBAAKpJ,SAAL,CAAeoJ,CAAf,IAAoB,KAApB;AACD;AACA;AACF;;;mCAEU7N,C,EAAC;AAGV,cAAG,KAAK4Q,OAAL,IAAgB,CAAC,CAApB,EAAsB;AACpB;AACA,iBAAKA,OAAL,GAAe5Q,CAAf;;AACA,iBAAKA,CAAL,EAAQA,CAAC,IAAG,CAAZ,EAAeA,CAAC,EAAhB,EAAmB;AACjB,mBAAKyE,SAAL,CAAezE,CAAf,IAAoB,IAApB;AACD;AACF,WAND,MAOK,IAAI,KAAK4Q,OAAL,IAAgB5Q,CAApB,EAAsB;AACzB;AACA,iBAAK4Q,OAAL,GAAe,CAAC,CAAhB;;AACA,iBAAK5Q,CAAL,EAAQA,CAAC,IAAG,CAAZ,EAAeA,CAAC,EAAhB,EAAmB;AACjB,mBAAKyE,SAAL,CAAezE,CAAf,IAAoB,KAApB;AACD;AACF,WANI,MAOD;AACF;AACA;AACA,gBAAI6N,CAAC,GAAG,CAAR;;AACA,iBAAKA,CAAL,EAAQA,CAAC,GAAC,KAAKpJ,SAAL,CAAe9F,MAAzB,EAAkCkP,CAAC,EAAnC,EAAsC;AACpC,mBAAKpJ,SAAL,CAAeoJ,CAAf,IAAoB,KAApB;AACD,aANC,CAMD;;;AAED,iBAAK+C,OAAL,GAAe5Q,CAAf,CARE,CAQgB;;AAElB,iBAAKA,CAAL,EAAQA,CAAC,IAAG,CAAZ,EAAeA,CAAC,EAAhB,EAAmB;AACjB,mBAAKyE,SAAL,CAAezE,CAAf,IAAoB,IAApB;AACD,aAZC,CAYD;;AACF;AAEF;;;mCAEO,CACP;;;;;;;uBAxFU2Q,qB;AAAqB,K;;;YAArBA,qB;AAAqB,wC;AAAA;AAAA;AAAA;AAAA,O;AAAA,e;AAAA,a;AAAA,yjB;AAAA;AAAA;ACRlC;;AACI;;AAEI;;AACI;;AAA0C;AAAA,mBAAS,IAAA7K,MAAA,EAAT;AAAiB,WAAjB;;AAA1C;;AACJ;;AAEA;;AACI;;AAAI;;AAAsB;;AAC9B;;AACA;;AACI;;AAIJ;;AAEA;;AACI;;AAA0C;AAAA,mBAAS,IAAA+K,aAAA,EAAT;AAAwB,WAAxB;;AAA0B;;AACxE;;AAOJ;;AACJ;;;;AAhBmC;;AAAA;;;;;;;;;sEDHtBF,qB,EAAqB;cALjC,uDAKiC;eALvB;AACTlU,kBAAQ,EAAE,mBADD;AAETC,qBAAW,EAAE,gCAFJ;AAGTC,mBAAS,EAAE,CAAC,gCAAD;AAHF,S;AAKuB,Q;;;;gBAI/B;;;gBACA;;;;;;;;;;;;;;;;;;;;AEbH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;QAOamU,kB;;;AAEX,oCAAc;AAAA;AAAG;;;;mCAET,CACP;;;yCAGgB;AACb,cAAIjT,MAAM,CAACkT,WAAP,IAAsBjO,QAAQ,CAACkO,eAAT,CAAyBC,SAA/C,IAA4DnO,QAAQ,CAACoO,IAAT,CAAcD,SAAd,GAA0B,GAA1F,EAA+F;AAC3F,iBAAKE,UAAL,GAAkB,IAAlB;AACH,WAFD,MAEO,IAAI,KAAKA,UAAL,IAAmBtT,MAAM,CAACkT,WAA1B,IAAyCjO,QAAQ,CAACkO,eAAT,CAAyBC,SAAlE,IAA+EnO,QAAQ,CAACoO,IAAT,CAAcD,SAAd,GAA0B,EAA7G,EAAiH;AAAE,iBAAKE,UAAL,GAAkB,KAAlB;AAA0B;AAAE;;;sCAAe;AAAE,WAAC,SAASC,YAAT,GAAwB;AAAE,gBAAIC,aAAa,GAAGvO,QAAQ,CAACkO,eAAT,CAAyBC,SAAzB,IAAsCnO,QAAQ,CAACoO,IAAT,CAAcD,SAAxE;;AAAmF,gBAAII,aAAa,GAAG,CAApB,EAAuB;AACpSxT,oBAAM,CAACyT,qBAAP,CAA6BF,YAA7B;AACAvT,oBAAM,CAAC+E,QAAP,CAAgB,CAAhB,EAAmByO,aAAa,GAAIA,aAAa,GAAG,CAApD;AACH;AACJ,WAJsK;AAK1K;;;;;;;uBAhBUP,kB;AAAkB,K;;;YAAlBA,kB;AAAkB,qC;AAAA;AAAA;;;;;;;;;;;ACP/B;;AACI;;AAAO;AAAA,mBAAS,IAAAS,WAAA,EAAT;AAAsB,WAAtB;;AAAP;;AACJ;;;;AAF2B;;;;;;;;;sEDOdT,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACTrU,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,6BAAD;AAHF,S;AAKoB,Q;;;;gBAO5B,0D;iBAAa,e,EAAiB,E;;;;;;;;;;;;;;;;;;;;AEdjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOa6U,e;;;AAEX,iCAAc;AAAA;AAAG;;;;mCAET,CACP;;;;;;;uBALUA,e;AAAe,K;;;YAAfA,e;AAAe,iC;AAAA,c;AAAA,a;AAAA,6D;AAAA;AAAA;ACP5B;;AACI;;AAAgC;;AAAI;;AAAM;;AAC9C;;;;;;;;sEDKaA,e,EAAe;cAL3B,uDAK2B;eALjB;AACT/U,kBAAQ,EAAE,YADD;AAETC,qBAAW,EAAE,yBAFJ;AAGTC,mBAAS,EAAE,CAAC,yBAAD;AAHF,S;AAKiB,Q;;;;;;;;;;;;;;;;;;;;AEN5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;AC2DO;;AACC;;AACD;;;;;;AAFmD;;AAClD;;AAAA;;;;;;AAWD;;AACC;;AACD;;;;;;AAF2C;;AAC1C;;AAAA;;;;QD7DK8U,mB;;;AAIX,mCAAoBpT,KAApB,EAA2CqT,YAA3C,EAAmFnS,WAAnF,EAAyH;AAAA;;AAArG,aAAAlB,KAAA,GAAAA,KAAA;AAAuB,aAAAqT,YAAA,GAAAA,YAAA;AAAwC,aAAAnS,WAAA,GAAAA,WAAA;AAFzE,aAAA0E,IAAA,GAA6B,IAAI,0DAAJ,EAA7B;AAiBV,aAAA0N,WAAA,GAAc,CAAC,QAAD,EAAW,MAAX,EAAmB,mBAAnB,EAAwC,iBAAxC,EAA0D,iBAA1D,EACd,SADc,EACJ,QADI,CAAd;AAGA,aAAAC,MAAA,GAAS,CAAC,QAAD,EAAW,SAAX,EAAsB,QAAtB,EAAgC,QAAhC,EAA0C,UAA1C,CAAT;AACA,aAAAC,IAAA,GAAO,CAAC,YAAD,EAAe,OAAf,EAAwB,iBAAxB,EAA2C,eAA3C,EAA4D,OAA5D,CAAP;AACA,aAAAC,YAAA,GAAe,CAAC,QAAD,EAAW,MAAX,CAAf;AACA,aAAAC,UAAA,GAAa,CAAC,UAAD,EAAa,WAAb,EAA0B,WAA1B,EAAuC,MAAvC,EAA+C,SAA/C,CAAb;AACA,aAAAC,aAAA,GAAgB,CAAC,YAAD,EAAe,UAAf,EAA2B,WAA3B,CAAhB;AACA,aAAAC,OAAA,GAAU,CAAC,WAAD,EAAc,eAAd,CAAV;AACA,aAAAC,MAAA,GAAS,CAAC,UAAD,EAAa,SAAb,EAAwB,eAAxB,EAAyC,QAAzC,EAAmD,WAAnD,CAAT;AAEA,aAAAC,MAAA,GAAS,EAAT;AAEO,aAAAC,gBAAA,GAA2B,EAA3B;AACA,aAAAC,UAAA,GAAqB,EAArB;AACA,aAAAC,YAAA,GAAuB,EAAvB;AACA,aAAAC,SAAA,GAAoB,EAApB;AACA,aAAAC,OAAA,GAAkB,EAAlB;AACA,aAAAC,SAAA,GAAoB,EAApB;AACA,aAAAC,YAAA,GAAuB,EAAvB;AACA,aAAAvO,IAAA,GAAe,EAAf;AACA,aAAAzE,KAAA,GAAgB,EAAhB;AACA,aAAAiT,QAAA,GAAmB,EAAnB;AACA,aAAAC,OAAA,GAAiB,EAAjB;AACA,aAAAC,IAAA,GAAc,EAAd;AACA,aAAAC,MAAA,GAAgB,EAAhB;AACA,aAAAC,OAAA,GAAiB,EAAjB;AACA,aAAAC,KAAA,GAAgB,KAAhB;AACA,aAAAC,WAAA,GAAsB,KAAtB;AACA,aAAAC,OAAA,GAAkB,KAAlB;AACA,aAAAvG,MAAA,GAAS,EAAT;AA3CN;;;;mCAEO;AAAA;;AACL,cAAG,CAACpP,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAD,IAAoC,MAAMD,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCmB,MAA7E,EAAoF;AACnF,iBAAKN,KAAL,CAAWW,QAAX,CAAoB,CAAC,QAAD,CAApB;AACD;;AACD,eAAKO,WAAL,CAAiB4T,mBAAjB,CAAqC5V,YAAY,CAACC,OAAb,CAAqB,SAArB,CAArC,EAAsEsC,SAAtE,CAAgF,UAAAC,GAAG,EAAE;AACjF,mBAAI,CAACL,KAAL,GAAaK,GAAG,CAAC,CAAD,CAAH,CAAOL,KAApB;AACH,WAFD;AAGD;;;mCAqCO;AAEN,cAAI0T,QAAQ,GAAS,IAAI,uDAAJ,EAArB;AACAA,kBAAQ,CAAC/L,MAAT,GAAkB,KAAKiL,YAAvB;AACAc,kBAAQ,CAAC9L,UAAT,GAAsB,KAAK8K,gBAA3B;AACAgB,kBAAQ,CAACxR,WAAT,GAAuB,KAAKuC,IAA5B;AACAiP,kBAAQ,CAAC1T,KAAT,GAAiB,KAAKA,KAAtB;AACA0T,kBAAQ,CAACC,GAAT,GAAe,KAAKb,OAApB;AACAY,kBAAQ,CAAC7N,GAAT,GAAe,KAAKoH,MAApB;AACAyG,kBAAQ,CAACE,MAAT,GAAkB,KAAKf,SAAvB;AACAa,kBAAQ,CAACG,UAAT,GAAsB,KAAKb,YAA3B;AACAU,kBAAQ,CAACI,WAAT,GAAuB,KAAKf,SAA5B;AACAW,kBAAQ,CAACK,MAAT,GAAkB,KAAKV,OAAvB;AACAK,kBAAQ,CAAChM,IAAT,GAAgB,KAAKiL,UAArB;AACAe,kBAAQ,CAACN,MAAT,GAAkB,KAAKA,MAAvB;AACAM,kBAAQ,CAACM,GAAT,GAAe,MAAM,KAAKd,OAAX,GAAqB,GAArB,GAA2B,KAAKD,QAA/C;AACAS,kBAAQ,CAACO,SAAT,GAAqB,EAArB;AACAP,kBAAQ,CAACQ,QAAT,GAAoB,EAApB;;AAEA,cAAG,KAAKZ,KAAR,EAAc;AACZI,oBAAQ,CAACO,SAAT,IAAsB,QAAtB;AACD;;AACD,cAAG,KAAKV,WAAR,EAAoB;AAClBG,oBAAQ,CAACO,SAAT,IAAsB,cAAtB;AACD;;AACD,cAAG,KAAKT,OAAR,EAAgB;AACdE,oBAAQ,CAACO,SAAT,IAAsB,UAAtB;AACD;;AACDnD,eAAK,CAAC,qCAAD,CAAL;AACA,eAAKkB,YAAL,CAAkBnK,WAAlB,CAA8B6L,QAA9B;AACA,eAAK/U,KAAL,CAAWW,QAAX,CAAoB,CAAC,aAAD,CAApB;AACD;;;uCAGW;AACV8D,kBAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAAxC,CAA8CC,OAA9C,GAAwD,OAAxD;AACAH,kBAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCC,OAAzC,GAAmD,MAAnD;AACD;;;kCAESzH,C,EAAC;AACT,eAAKmR,MAAL,GAAcnR,CAAd;AAED;;;oCAEWA,C,EAAGM,E,EAAE;AACf,cAAGN,CAAC,IAAI,IAAR,EAAa;AACXsH,oBAAQ,CAACC,cAAT,CAAwBjH,EAAxB,EAA4BkH,KAA5B,CAAkCC,OAAlC,GAA4C,MAA5C;AACAH,oBAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCC,OAAzC,GAAmD,OAAnD;AACD;AACF;;;+BAEG;AACF,eAAK5E,KAAL,CAAWW,QAAX,CAAoB,CAAC,aAAD,CAApB;AACD;;;kCAEM;AAEL,cAAG,KAAKoT,gBAAL,KAAwB,EAA3B,EAA8B;AAC5B,mBAAO,KAAKD,MAAZ;AACD;;AACD,cAAG,KAAKC,gBAAL,KAA0B,QAA7B,EAAsC;AACpC,mBAAO,KAAKR,MAAZ;AACD,WAFD,MAEM,IAAG,KAAKQ,gBAAL,KAA0B,MAA7B,EAAoC;AACtC,mBAAO,KAAKP,IAAZ;AACH,WAFK,MAEA,IAAG,KAAKO,gBAAL,KAA0B,mBAA7B,EAAiD;AACpD,mBAAQ,KAAKN,YAAb;AACF,WAFK,MAEA,IAAG,KAAKM,gBAAL,KAA0B,iBAA7B,EAA+C;AACnD,mBAAQ,KAAKL,UAAb;AACD,WAFK,MAEA,IAAG,KAAKK,gBAAL,KAAyB,iBAA5B,EAA8C;AAClD,mBAAQ,KAAKJ,aAAb;AACD,WAFK,MAEA,IAAG,KAAKI,gBAAL,KAAyB,SAA5B,EAAsC;AAC1C,mBAAQ,KAAKH,OAAb;AACD,WAFK,MAEA,IAAG,KAAKG,gBAAL,KAA0B,QAA7B,EAAsC;AAC1C,mBAAO,KAAKF,MAAZ;AACD,WAFK,MAED;AACH,mBAAO,KAAKC,MAAZ;AACD;AAEF;;;sCAEU;AAET,cAAI,KAAKG,YAAL,KAAoB,EAApB,IAA0B,KAAKF,gBAAL,KAAwB,EAAlD,IAAwD,KAAKjO,IAAL,KAAY,EAApE,IACJ,KAAKqO,OAAL,KAAe,EADX,IACiB,KAAKD,SAAL,KAAiB,EADlC,IACwC,KAAKG,YAAL,KAAoB,EAD5D,IACkE,KAAKD,SAAL,KAAiB,EADnF,IAED,KAAKM,OAAL,KAAiB,EAFhB,IAEsB,KAAKD,MAAL,KAAgB,EAFtC,IAE4C,KAAKT,UAAL,KAAoB,EAFhE,IAEsE,KAAKM,QAAL,KAAkB,EAFxF,IAE8F,KAAKC,OAAL,KAAe,EAFjH,EAEoH;AAElH9P,oBAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,CAAuCC,OAAvC,GAA+C,OAA/C;AACAH,oBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CC,OAA3C,GAAmD,OAAnD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACA,mBAAO,IAAP;AACD,WAVD,MAUM,IAAG,KAAK0J,MAAL,KAAc,EAAjB,EAAoB;AACxB7J,oBAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,CAAuCC,OAAvC,GAA+C,OAA/C;AACAH,oBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CC,OAA3C,GAAmD,OAAnD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACA,mBAAO,IAAP;AACD,WAPK,MAOA,IAAI,KAAK0P,QAAL,CAAchU,MAAd,GAAqB,CAArB,IAA0B,KAAKiU,OAAL,CAAajU,MAAb,GAAoB,CAAlD,EAAoD;AACxDmE,oBAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,CAAuCC,OAAvC,GAA+C,OAA/C;AACAH,oBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CC,OAA3C,GAAmD,OAAnD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,OAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACA,mBAAO,IAAP;AACD,WAPK,MAOD;AACHH,oBAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,CAAuCC,OAAvC,GAA+C,MAA/C;AACAH,oBAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CC,OAA3C,GAAmD,MAAnD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACAH,oBAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAAlC,CAAwCC,OAAxC,GAAgD,MAAhD;AACA,mBAAO,KAAP;AACD;AACF;;;;;;;uBAtKUwO,mB,EAAmB,uH,EAAA,uJ,EAAA,sK;AAAA,K;;;YAAnBA,mB;AAAmB,sC;AAAA;AAAA;AAAA,O;AAAA,gB;AAAA,c;AAAA,67F;AAAA;AAAA;ACZhC;;AACA;;AACC;;AAAY;AAAA,mBAAS,IAAArR,IAAA,EAAT;AAAe,WAAf;;AAAiB;;AAC7B;;AACA;;AACC;;AAAgB;;AAAoC;;AACpD;;AAAgB;;AAA0B;;AAC1C;;AAAgB;;AAA0D;;AAC3E;;AACD;;AAEA;;AAAsD;AAAA,mBAAU,IAAAwM,WAAA,SAAoB,cAApB,CAAV;AAA6C,WAA7C,EAA8C,KAA9C,EAA8C;AAAA,mBAAQ,IAAAC,SAAA,QAAR;AAAyB,WAAvE;;AAAyE;;AAC/H;;AACC;;AAAM;AAAA,mBAAY,IAAAgH,QAAA,EAAZ;AAAsB,WAAtB;;AACL;;AACC;;AACC;;AACA;;AAAoC;AAAA,mBAAS,IAAA/G,YAAA,EAAT;AAAuB,WAAvB;;AAApC;;AACA;;AACD;;AAEA;;AAA4B;;AAA8B;;AAC1D;;AACA;;AAAuD;;AAAqB;;AAE5E;;AACC;;AAAW;;AAAM;;AACjB;;AAA2D;AAAA;AAAA;;AAA3D;;AACA;;AAAgB;;AAAO;;AACxB;;AAEA;;AACA;;AAAuD;;AAAyB;;AAChF;;AACC;;AAAW;;AAAM;;AACjB;;AAA2D;AAAA;AAAA;;AAA3D;;AACA;;AACD;;AACA;;AAEA;;AAAK;;AAAoB;;AACzB;;AAAuD;AAAA;AAAA;;AACtD;;AACD;;AACA;;AAAuD;AAAA;AAAA;;AACtD;;AACD;;AACA;;AAAuD;AAAA;AAAA;;AACtD;;AACD;;AAGD;;AAEA;;AACC;;AAAqB;;AACpB;;AACC;;AACC;;AAAW;;AAAmB;;AAC9B;;AAAY;AAAA;AAAA;;AACX;;AAGD;;AACD;;AACD;;AACD;;AACA;;AACC;;AACC;;AACC;;AAAW;;AAAa;;AACxB;;AAAY;AAAA;AAAA;;AACX;;AAGD;;AACD;;AACD;;AACD;;AACA;;AACC;;AACC;;AACC;;AAAW;;AAAM;;AACjB;;AAAiB;AAAA;AAAA;;AAAjB;;AACD;;AACD;;AACD;;AACA;;AACA;;AAAoB;;AACnB;;AACC;;AACC;;AAAW;;AAAe;;AAC1B;;AAA4E;AAAA;AAAA;;AAA5E;;AACD;;AACD;;AACA;;AACA;;AACC;;AACC;;AAAW;;AAAe;;AAC1B;;AAA4E;AAAA;AAAA;;AAA5E;;AACD;;AACD;;AACD;;AACA;;AACA;;AAAoB;;AACnB;;AACC;;AACC;;AAAW;;AAAe;;AAC1B;;AAA4E;AAAA;AAAA;;AAA5E;;AACD;;AACD;;AACD;;AACA;;AACA;;AAAoB;;AACnB;;AACC;;AACC;;AAAW;;AAAe;;AAC1B;;AAA4E;AAAA;AAAA;;AAA5E;;AACD;;AACD;;AACD;;AACA;;AACA;;AACC;;AACC;;AACC;;AAAuH;AAAA;AAAA;;AAAwC;;AAC/J;;AAAU;;AAAkC;;AAC7C;;AACD;;AACD;;AACA;;AACA;;AAAoB;;AAEnB;;AACC;;AACC;;AAAW;;AAAE;;AACb;;AAAgB;AAAA;AAAA;;AAAhB;;AACD;;AACD;;AACA;;AACC;;AACC;;AAAW;;AAAQ;;AACnB;;AAAwB;AAAA;AAAA;;AAAxB;;AACA;;AAAW;;AAA0B;;AACtC;;AACD;;AACD;;AACA;;AACA;;AACC;;AAAwG;;AAAK;;AAC9G;;AAED;;AAGD;;AAED;;;;;;;;AAlI+D;;AAAA;;AAQA;;AAAA;;AAML;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAYxC;;AAAA;;AACC;;AAAA;;AAWD;;AAAA;;AACC;;AAAA;;AAWI;;AAAA;;AAS2D;;AAAA;;AAOA;;AAAA;;AASA;;AAAA;;AASA;;AAAA;;AAQ2C;;AAAA;;AAC7G;;AAAA;;AAUM;;AAAA;;AAMQ;;AAAA;;AACb;;AAAA;;AAMgE;;AAAA;;;;;;;;;sEDzIpE2E,mB,EAAmB;cAL/B,uDAK+B;eALrB;AACThV,kBAAQ,EAAE,iBADD;AAETC,qBAAW,EAAE,8BAFJ;AAGTC,mBAAS,EAAE,CAAC,8BAAD;AAHF,S;AAKqB,Q;;;;;;;;;;gBAE7B;;;;;;;;;;;;;;;;;;;;AEbH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACwBI;;AACI;;AACJ;;;;AAF8C;;;;;;;;;;AAI9C;;AACI;;AACJ;;;;AAFkD;;;;;;;;;;AAIlD;;AAGI;;AAEA;;AAAqB;;AAAmB;;AACxC;;AAAgB;;AAAsB;;AACtC;;AACI;;AAAqB;;AAAiB;;AACtC;;AACI;;AACA;;AAAG;;AAAmC;;AAC1C;;AACA;;AACJ;;AAEJ;;;;;;AAhBoD;;AAG3C;;AAAA;;AAEgB;;AAAA;;AACL;;AAAA;;AAES;;AAAA;;AAGd;;AAAA;;;;QD5BNmX,kB;;;AAoFX,kCAAoB1S,MAApB,EACoBC,OADpB,EAEoBgF,yBAFpB,EAGoBa,gBAHpB,EAIoB3F,oBAJpB,EAIiE;AAAA;;AAJ7C,aAAAH,MAAA,GAAAA,MAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAgF,yBAAA,GAAAA,yBAAA;AACA,aAAAa,gBAAA,GAAAA,gBAAA;AACA,aAAA3F,oBAAA,GAAAA,oBAAA;AApFpB,aAAA/E,KAAA,GAAQ,QAAR;AACA,aAAAuX,QAAA,GAAW,EAAX;AACA,aAAAjB,MAAA,GAAS,OAAT;AACA,aAAAkB,SAAA,GAAY,EAAZ;AACA,aAAAC,MAAA,GAAS,EAAT;AACA,aAAAC,UAAA,GAAa,EAAb;AACA,aAAAC,QAAA,GAAW,EAAX,CA8EiE,CARjE;;AAEA,aAAAC,QAAA,GAAU,KAAKD,QAAL,CAAc,CAAd,CAAV;AAOc,aAAKA,QAAL,GAAgB,EAAhB;AACA,aAAKH,SAAL,GAAiB,EAAjB;AACA;;;;oCAhFL;AACP,iBAAO,KAAKA,SAAL,CAAerV,MAAf,GAAwB,CAA/B;AACD;;;mCAGO;AAEN,cAAIqB,CAAJ;AACA,cAAIqU,KAAJ;AACA,eAAKL,SAAL,GAAiB,EAAjB;;AACA,eAAKhU,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKmU,QAAL,CAAcxV,MAA9B,EAAsCqB,CAAC,EAAvC,EAA2C;AACzC;AACA;AACAqU,iBAAK,GAAG,KAAKC,MAAL,CAAYtU,CAAZ,CAAR;;AACA,gBAAGqU,KAAK,IAAI,CAAC,CAAV,IAAeA,KAAK,CAAC,QAAD,CAAL,CAAgB1K,WAAhB,GAA8B4K,QAA9B,CAAuC,KAAKN,MAAL,CAAYtK,WAAZ,EAAvC,CAAlB,EAAoF;AAClF,mBAAKqK,SAAL,CAAe1O,IAAf,CAAoB+O,KAApB;AACD;AAEF;;AAAA;AACF;;;kCAEM;AACL,cAAIrU,CAAJ;AACA,cAAIqU,KAAJ;AACA,eAAKL,SAAL,GAAiB,EAAjB;;AACA,eAAKhU,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKmU,QAAL,CAAcxV,MAA9B,EAAsCqB,CAAC,EAAvC,EAA2C;AACzC;AACA;AACAqU,iBAAK,GAAG,KAAKC,MAAL,CAAYtU,CAAZ,CAAR;;AACA,gBAAGqU,KAAK,IAAI,CAAC,CAAb,EAAe;AACb,mBAAKL,SAAL,CAAe1O,IAAf,CAAoB+O,KAApB;AACD;AAGF;;AAAA;AACF;;;+BAEMrU,C,EAAQ;AACb,cAAIqH,MAAM,GAAG,KAAK8M,QAAL,CAAcnU,CAAd,CAAb,CADa,CAEb;;AAGA,kBAAO,KAAK8S,MAAZ;AACE,iBAAK,YAAL;AACE,kBAAI5N,QAAQ,CAACmC,MAAM,CAAC,QAAD,CAAN,CAAiBmN,MAAjB,CAAwB,CAAxB,EAA0B,CAA1B,CAAD,CAAR,IAA0C,GAA9C,EAAmD;AACjD;AACA,uBAAOnN,MAAP;AACD;;AACD;;AACF,iBAAK,YAAL;AACE,kBAAInC,QAAQ,CAACmC,MAAM,CAAC,QAAD,CAAN,CAAiBmN,MAAjB,CAAwB,CAAxB,EAA0B,CAA1B,CAAD,CAAR,IAA0C,GAA9C,EAAmD;AACjD;AACA,uBAAOnN,MAAP;AACD;;AACD;;AACF,iBAAK,YAAL;AACE,kBAAInC,QAAQ,CAACmC,MAAM,CAAC,QAAD,CAAN,CAAiBmN,MAAjB,CAAwB,CAAxB,EAA0B,CAA1B,CAAD,CAAR,IAA0C,GAA9C,EAAmD;AACjD;AACA,uBAAOnN,MAAP;AACD;;AACD;;AACF;AACI;AACA,qBAAOA,MAAP;AACF;AAtBJ;;AAwBA,iBAAO,CAAC,CAAR;AACD;;;mCAeO;AAAA;;AACN;AAEA,cAAG9J,YAAY,CAACC,OAAb,CAAqB,SAArB,KAAkC,MAArC,EAA4C;AAC1C,gBAAIO,MAAM,GAAGF,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB,GAAtC;AACA,gBAAIgB,OAAO,GAAGhB,MAAM,GAAG,OAAvB;AACAF,kBAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBe,OAAvB;AACD,WAPK,CASN;;;AACA,eAAKiV,SAAL,GAAiB,KAAKG,QAAtB;AAEA;;;;AAGA,cAAG5W,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,SAAnC,EAA6C;AACzC,iBAAKwW,SAAL,GAAiB,EAAjB;AACA,iBAAKG,QAAL,GAAgB,EAAhB;AACA,iBAAK9N,yBAAL,CAA+BE,sBAA/B,CAAsDhJ,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAtD,EAAuFsC,SAAvF,CAAiG,UAAAC,GAAG,EAAE;AAClG,kBAAIC,CAAJ;AACA,qBAAI,CAACkU,UAAL,GAAkB,EAAlB;;AACA,mBAAKlU,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGD,GAAG,CAACpB,MAApB,EAA6BqB,CAAC,EAA9B,EAAiC;AAC/B,uBAAI,CAACkU,UAAL,CAAgB5O,IAAhB,CAAqBvF,GAAG,CAACC,CAAD,CAAH,CAAOyG,OAA5B;AACD,eALiG,CAOlG;;;AACA,mBAAIzG,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG,OAAI,CAACkU,UAAL,CAAgBvV,MAA/B,EAAwCqB,CAAC,EAAzC,EAA4C;AAC1C,oBAAGD,GAAG,CAACC,CAAD,CAAH,CAAO0G,MAAP,IAAiB,WAAjB,IAAgC3G,GAAG,CAACC,CAAD,CAAH,CAAO0G,MAAP,IAAiB,WAApD,EAAiE;AAC7D,yBAAI,CAACQ,gBAAL,CAAsBP,QAAtB,CAA+B,OAAI,CAACuN,UAAL,CAAgBlU,CAAhB,CAA/B,EAAmDzE,IAAnD,CAAwD,UAAAwJ,IAAI,EAAE;AAG5D,2BAAI,CAACoP,QAAL,CAAc7O,IAAd,CAAmBP,IAAnB;;AACA,2BAAI,CAACiP,SAAL,CAAe1O,IAAf,CAAoBP,IAApB,EAJ4D,CAO5D;;AACC,mBARH;AAWD;AACF;AACJ,aAvBH;AAwBD;AAEH;;;;;AAGA,cAAGxH,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,aAAnC,EAAiD;AAC/C,iBAAKwW,SAAL,GAAiB,EAAjB;AACA,iBAAKG,QAAL,GAAgB,EAAhB;AACA,iBAAK5S,oBAAL,CAA0B4R,mBAA1B,CAA8C5V,YAAY,CAACC,OAAb,CAAqB,SAArB,CAA9C,EAA+EsC,SAA/E,CAAyF,UAAAC,GAAG,EAAE;AAC5F,kBAAIL,KAAK,GAAGK,GAAG,CAAC,CAAD,CAAH,CAAOL,KAAnB;;AAEA,qBAAI,CAACwH,gBAAL,CAAsBvB,gBAAtB,CAAuCjG,KAAvC,EAA8CI,SAA9C,CAAwD,UAAAiF,IAAI,EAAE;AAC5D,oBAAI/E,CAAJ;;AACA,qBAAIA,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAC+E,IAAI,CAACpG,MAAlB,EAA2BqB,CAAC,EAA5B,EAA+B;AAC7B;AACA,yBAAI,CAACmU,QAAL,CAAc7O,IAAd,CAAmBP,IAAI,CAAC/E,CAAD,CAAvB;;AACA,yBAAI,CAACgU,SAAL,CAAe1O,IAAf,CAAoBP,IAAI,CAAC/E,CAAD,CAAxB,EAH6B,CAI7B;;AACD;AAEF,eATD;AAUD,aAbD;AAcC;AAEF;;;2CAGa;AACd,iBAAOzC,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,SAAvC;AACD;;;+CACmB;AAClB,iBAAOD,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,aAAvC;AACD;;;;;;;uBAvKUsW,kB,EAAkB,+H,EAAA,uH,EAAA,0K,EAAA,uJ,EAAA,sK;AAAA,K;;;YAAlBA,kB;AAAkB,qC;AAAA,e;AAAA,a;AAAA,g0B;AAAA;AAAA;AChB/B;;AACA;;AACI;;AACI;;AACI;;AAEI;;AAA+D;AAAA;AAAA,aAAoB,QAApB,EAAoB;AAAA,mBAAW,IAAAW,QAAA,EAAX;AAAqB,WAAzC;;AAA/D;;AAA4H;;AAAI;;AAEpI;;AACJ;;AACA;;AACA;;AAAsB;AAAA;AAAA,aAAoB,QAApB,EAAoB;AAAA,mBAAW,IAAAC,OAAA,EAAX;AAAoB,WAAxC;;AAElB;;AAAuB;;AAAK;;AAC5B;;AAA2B;;AAAU;;AACrC;;AAA2B;;AAAU;;AACrC;;AAA2B;;AAAU;;AACrC;;AAAuB;;AAAM;;AAC7B;;AAAkC;;AAAU;;AAEhD;;AACJ;;AACJ;;AACA;;AAEI;;AAIA;;AAIA;;AAoBJ;;;;AA/C+E;;AAAA;;AAKjD;;AAAA;;AAOV;;AAAA;;AAA0B;;AAAA;;AAOvB;;AAAA;;AAIA;;AAAA;;AAID;;AAAA;;;;;;;;;sEDjBTZ,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACTrX,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,6BAAD;AAHF,S;AAKoB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEhB/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;AC0BA;;AACI;;AACJ;;;;;;;;;;AAEI;;AAGI;;AAEA;;AAAqB;;AAAmB;;AACxC;;AAAgB;;AAAwB;;AACxC;;AACI;;AAAqB;;AAAmB;;AACxC;;AACI;;AACA;;AAAG;;AAAmC;;AAC1C;;AACA;;AACJ;;AAEJ;;;;;;AAhBmD;;AAG1C;;AAAA;;AAEgB;;AAAA;;AACL;;AAAA;;AAES;;AAAA;;AAGd;;AAAA;;;;;;AAZnB;;AACI;;AAkBJ;;;;;;AAlBsB;;AAAA;;;;;;;;QDTTgY,qB;;;AAwJX,qCAAoBvT,MAApB,EACoBC,OADpB,EAEoBC,OAFpB,EAGoB4F,gBAHpB,EAGsD;AAAA;;AAHlC,aAAA9F,MAAA,GAAAA,MAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAA4F,gBAAA,GAAAA,gBAAA;AAvJpB,aAAA1K,KAAA,GAAQ,QAAR;AACA,aAAAuX,QAAA,GAAW,EAAX;AACA,aAAAC,SAAA,GAAY,EAAZ;AACA,aAAAlB,MAAA,GAAS,OAAT;AACA,aAAAmB,MAAA,GAAS,EAAT;AACA,aAAAE,QAAA,GAAW,EAAX;AAOA,aAAAxS,KAAA,GAAQ,EAAR;AAOO,aAAAiT,YAAA,GAAoB,EAApB;AACA,aAAAC,WAAA,GAAmB,CAAnB;AA+HA,aAAAC,SAAA,GAAY,EAAZ;AAMO,aAAKtO,MAAL,GAAc,EAAd;AACA;;;;oCAnIL;AACP,iBAAO,KAAKwN,SAAL,CAAerV,MAAf,GAAwB,CAA/B;AACD;;;mCAEO;AAEN,cAAIqB,CAAJ;AACA,cAAIqU,KAAJ;AACA,eAAKL,SAAL,GAAiB,EAAjB;;AACA,eAAKhU,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKmU,QAAL,CAAcxV,MAA9B,EAAsCqB,CAAC,EAAvC,EAA2C;AACzC;AACA;AACAqU,iBAAK,GAAG,KAAKC,MAAL,CAAYtU,CAAZ,CAAR;;AACA,gBAAGqU,KAAK,IAAI,CAAC,CAAV,IAAeA,KAAK,CAAChN,MAAN,CAAasC,WAAb,GAA2B4K,QAA3B,CAAoC,KAAKN,MAAL,CAAYtK,WAAZ,EAApC,CAAlB,EAAiF;AAC/E,mBAAKqK,SAAL,CAAe1O,IAAf,CAAoB+O,KAApB;AACD;AAGF;;AAAA;AACF;;;kCAGM;AACL,cAAIrU,CAAJ;AACA,cAAIqU,KAAJ;AACA,eAAKL,SAAL,GAAiB,EAAjB;;AACA,eAAKhU,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKmU,QAAL,CAAcxV,MAA9B,EAAsCqB,CAAC,EAAvC,EAA2C;AACzC;AACA;AACAqU,iBAAK,GAAG,KAAKC,MAAL,CAAYtU,CAAZ,CAAR;;AACA,gBAAGqU,KAAK,IAAI,CAAC,CAAb,EAAe;AACb,mBAAKL,SAAL,CAAe1O,IAAf,CAAoB+O,KAApB;AACD;AAGF;;AAAA;AACF;;;+BAEMrU,C,EAAQ;AACb,cAAIqH,MAAM,GAAG,KAAK8M,QAAL,CAAcnU,CAAd,CAAb,CADa,CAEb;;AAGA,kBAAO,KAAK8S,MAAZ;AACE,iBAAK,YAAL;AACE,kBAAI5N,QAAQ,CAACmC,MAAM,CAACyL,MAAP,CAAc0B,MAAd,CAAqB,CAArB,EAAuBnN,MAAM,CAACyL,MAAP,CAAcnU,MAAd,GAAuB,CAA9C,CAAD,CAAR,IAA8D,GAAlE,EAAuE;AACrE;AACA,uBAAO0I,MAAP;AACD;;AACD;;AACF,iBAAK,YAAL;AACE,kBAAInC,QAAQ,CAACmC,MAAM,CAACyL,MAAP,CAAc0B,MAAd,CAAqB,CAArB,EAAuBnN,MAAM,CAACyL,MAAP,CAAcnU,MAAd,GAAuB,CAA9C,CAAD,CAAR,IAA8D,GAAlE,EAAuE;AACrE;AACA,uBAAO0I,MAAP;AACD;;AACD;;AACF,iBAAK,YAAL;AACE,kBAAInC,QAAQ,CAACmC,MAAM,CAACyL,MAAP,CAAc0B,MAAd,CAAqB,CAArB,EAAuBnN,MAAM,CAACyL,MAAP,CAAcnU,MAAd,GAAuB,CAA9C,CAAD,CAAR,IAA8D,GAAlE,EAAuE;AACrE;AACA,uBAAO0I,MAAP;AACD;;AACD;;AACF;AACI;AACA,qBAAOA,MAAP;AACF;AAtBJ;;AA0BA,iBAAO,CAAC,CAAR;AACD;AA+DC;;AACA;;;;;;;;;;;;;;;;;;;;;;;;iCAsBQ7L,C,EAAC;AAAA;;AACT,cAAMM,EAAE,GAAGqJ,IAAI,CAACkK,MAAL,GAAchM,QAAd,CAAuB,EAAvB,EAA2BiM,SAA3B,CAAqC,CAArC,CAAX,CADS,CAC2C;;AACpD,cAAMC,IAAI,GAAG/T,CAAC,CAACgU,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb,CAFS,CAEuB;;AAChC,cAAMC,QAAQ,0BAAmB5T,EAAnB,CAAd,CAHS,CAG8B;;AACvC,cAAMwP,GAAG,GAAG,KAAKpE,gBAAL,CAAsB0I,UAAtB,CAAiCF,QAAjC,CAAZ;AACA,cAAMG,IAAI,GAAG,KAAK3I,gBAAL,CAAsB4I,WAAtB,CAAkCJ,QAAlC,EAA4CH,IAA5C,CAAb,CALS,CAOT;;AACA,eAAKQ,aAAL,GAAqBF,IAAI,CAACG,iBAAL,EAArB;AACAH,cAAI,CAACI,eAAL,GAAuBC,IAAvB,CAA4B,gEAAS,YAAM;AACvC,mBAAI,CAACC,QAAL,GAAgB7E,GAAG,CAAC8E,cAAJ,EAAhB;AAEH,WAH2B,CAA5B,EAIKtQ,SAJL;AASA;;;qCAEU;AACRpC,iBAAO,CAACC,GAAR,CAAY,OAAZ;AACA,cAAIwJ,KAAK,GAAS,IAAI,uDAAJ,EAAlB;AACAA,eAAK,CAACC,IAAN,GAAa,SAAb;AACAD,eAAK,CAACE,MAAN,GAAe,OAAf;AACAF,eAAK,CAACG,UAAN,GAAmB,QAAnB;AACAH,eAAK,CAACzH,KAAN,GAAc,0BAAd;AACAyH,eAAK,CAAC5B,GAAN,GAAY,KAAK8K,cAAL,CAAoBC,aAApB,CAAkCC,KAA9C;AACA,eAAKrJ,gBAAL,CAAsBK,WAAtB,CAAkCJ,KAAlC;AAED;;;mCAMK;AAAA;;AACN;AAEA;AACA,cAAG5J,YAAY,CAACC,OAAb,CAAqB,SAArB,KAAkC,MAArC,EAA4C;AAC1C,gBAAIO,MAAM,GAAGF,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB,GAAtC;AACA,gBAAIgB,OAAO,GAAGhB,MAAM,GAAG,OAAvB;AACAF,kBAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBe,OAAvB;AACD;;AAED,cAAIjD,EAAE,GAAG,KAAKsF,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAT,CAVM,CAU4C;;;AAClDnG,sBAAY,CAAC0C,OAAb,CAAqB,MAArB,EAA6BnE,EAA7B,EAXM,CAW2B;;AAEjC,eAAKiY,QAAL,GAAgBjY,EAAE,CAAC6N,WAAH,EAAhB,CAbM,CAa4B;;AAKlC,eAAKoL,QAAL,GAAc,KAAK7N,gBAAL,CAAsB8N,eAAtB,GAAwClV,SAAxC,CAAkD,UAAAgL,IAAI,EAAE;AACpE,mBAAI,CAACtE,MAAL,GAAYsE,IAAZ;AACD,WAFa,CAAd;AAIA,eAAK5D,gBAAL,CAAsB+N,iBAAtB,CAAwC,KAAK7T,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAxC,EAAiF5D,SAAjF,CAA2F,UAAAC,GAAG,EAAE;AAC9F,mBAAI,CAACyG,MAAL,GAAYzG,GAAZ,CAD8F,CAC7E;;AACjB,gBAAIC,CAAC,GAAG,CAAR;AACA,gBAAIkV,OAAJ,CAH8F,CAGlF;;AACZ,mBAAI,CAAClB,SAAL,GAAiB,EAAjB,CAJ8F,CAI1E;;AACpB,mBAAI,CAACG,QAAL,GAAgB,EAAhB,CAL8F,CAK5E;;AAElB,iBAAKnU,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAC,OAAI,CAACwG,MAAL,CAAY7H,MAA1B,EAAkCqB,CAAC,EAAnC,EAAsC;AACpC;AACAkV,qBAAO,GAAG,IAAI,uDAAJ,EAAV;AACAA,qBAAO,CAACpZ,EAAR,GAAa,OAAI,CAAC0K,MAAL,CAAYxG,CAAZ,EAAelE,EAA5B;AACAoZ,qBAAO,CAAC7N,MAAR,GAAiB,OAAI,CAACb,MAAL,CAAYxG,CAAZ,EAAeqH,MAAhC;AACA6N,qBAAO,CAAC5N,UAAR,GAAqB,OAAI,CAACd,MAAL,CAAYxG,CAAZ,EAAesH,UAApC;AACA4N,qBAAO,CAACtT,WAAR,GAAsB,OAAI,CAAC4E,MAAL,CAAYxG,CAAZ,EAAe4B,WAArC;AACAsT,qBAAO,CAACC,QAAR,GAAmB,OAAI,CAAC3O,MAAL,CAAYxG,CAAZ,EAAemV,QAAlC;AACAD,qBAAO,CAACxV,KAAR,GAAgB,OAAI,CAAC8G,MAAL,CAAYxG,CAAZ,EAAeN,KAA/B;AACAwV,qBAAO,CAAC7B,GAAR,GAAc,OAAI,CAAC7M,MAAL,CAAYxG,CAAZ,EAAeqT,GAA7B;AACA6B,qBAAO,CAAC3P,GAAR,GAAc,OAAI,CAACiB,MAAL,CAAYxG,CAAZ,EAAeuF,GAA7B;AACA2P,qBAAO,CAACxB,GAAR,GAAc,OAAI,CAAClN,MAAL,CAAYxG,CAAZ,EAAe0T,GAA7B;AACAwB,qBAAO,CAAC5B,MAAR,GAAiB,OAAI,CAAC9M,MAAL,CAAYxG,CAAZ,EAAesT,MAAhC;AACA4B,qBAAO,CAAC3B,UAAR,GAAqB,OAAI,CAAC/M,MAAL,CAAYxG,CAAZ,EAAeuT,UAApC;AACA2B,qBAAO,CAAC1B,WAAR,GAAsB,OAAI,CAAChN,MAAL,CAAYxG,CAAZ,EAAewT,WAArC;AACA0B,qBAAO,CAACzB,MAAR,GAAiB,OAAI,CAACjN,MAAL,CAAYxG,CAAZ,EAAeyT,MAAhC;AACAyB,qBAAO,CAACvB,SAAR,GAAoB,OAAI,CAACnN,MAAL,CAAYxG,CAAZ,EAAe2T,SAAnC;AACAuB,qBAAO,CAACpC,MAAR,GAAiB,OAAI,CAACtM,MAAL,CAAYxG,CAAZ,EAAe8S,MAAhC;AACAoC,qBAAO,CAAC9N,IAAR,GAAe,OAAI,CAACZ,MAAL,CAAYxG,CAAZ,EAAeoH,IAA9B;AACA8N,qBAAO,CAACtB,QAAR,GAAmB,OAAI,CAACpN,MAAL,CAAYxG,CAAZ,EAAe4T,QAAlC;AACAsB,qBAAO,CAAClK,MAAR,GAAiB,OAAI,CAACxE,MAAL,CAAYxG,CAAZ,EAAegL,MAAhC;;AACA,qBAAI,CAACmJ,QAAL,CAAc7O,IAAd,CAAmB4P,OAAnB;;AACA,qBAAI,CAAClB,SAAL,CAAe1O,IAAf,CAAoB4P,OAApB;AAED,aA/B6F,CAgC9F;;AACC,WAjCH;AAwCE;;;;;;;;;;;AAaA;AAYH;;;sCASU;AAET,eAAKH,QAAL,CAAcK,WAAd;AACD;;;;;;;uBA9TUT,qB,EAAqB,+H,EAAA,uH,EAAA,yI,EAAA,uJ;AAAA,K;;;YAArBA,qB;AAAqB,wC;AAAA;AAAA;;;;;;;;;;;;;;;ACrBlC;;AACA;;AACI;;AACI;;AACJ;;AACA;;AACI;;AACI;;AAEI;;AAA+D;AAAA;AAAA,aAAoB,QAApB,EAAoB;AAAA,mBAAW,IAAAF,QAAA,EAAX;AAAqB,WAAzC;;AAA/D;;AAA4H;;AAAI;;AAEpI;;AACJ;;AACA;;AACA;;AAAsB;AAAA;AAAA,aAAoB,QAApB,EAAoB;AAAA,mBAAW,IAAAC,OAAA,EAAX;AAAoB,WAAxC;;AAElB;;AAAuB;;AAAK;;AAC5B;;AAA2B;;AAAU;;AACrC;;AAA2B;;AAAU;;AACrC;;AAA2B;;AAAU;;AACrC;;AAAuB;;AAAM;;AAC7B;;AAAkC;;AAAU;;AAEhD;;AACJ;;AACJ;;AACA;;AAGA;;;;AA7BY;;AAEa;;AAAA;;AAOsD;;AAAA;;AAKjD;;AAAA;;AAOV;;AAAA;;AAA0B;;AAAA;;AAKxB;;AAAA;;AAGD;;AAAA;;;;;;;;;sEDRRC,qB,EAAqB;cATjC,uDASiC;eATvB;AACTlY,kBAAQ,EAAE,mBADD;AAETC,qBAAW,EAAE,gCAFJ;AAGTC,mBAAS,EAAE,CAAC,gCAAD;AAHF,S;AASuB,Q;;;;;;;;;;;;gBAa/B,uD;iBAAU,W;;;;;;;;;;;;;;;;;;;;AElCb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;QASa0Y,yB;;;AAIX,2CAAc;AAAA;;AAFd,aAAAC,YAAA,GAAe,EAAf;AAEiB;AACnB;;;;;;;;;mCAQU;AACN,cAAG/X,YAAY,CAACC,OAAb,CAAqB,SAArB,KAAkC,MAArC,EAA4C;AAC1C,gBAAIO,MAAM,GAAGF,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB,GAAtC;AACA,gBAAIgB,OAAO,GAAGhB,MAAM,GAAG,OAAvB;AACAF,kBAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBe,OAAvB;AACD;AAEF;;;;;;;uBApBUsW,yB;AAAyB,K;;;YAAzBA,yB;AAAyB,4C;AAAA,e;AAAA,c;AAAA,gmI;AAAA;AAAA;ACTtC;;AAEA;;AACI;;AACJ;;AAMA;;AAIA;;AACI;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACJ;;AAGA;;AACI;;AACI;;AACA;;AAAI;;AAAM;;AACd;;AACA;;AACI;;AACA;;AAAI;;AAAe;;AACvB;;AACA;;AACI;;AACA;;AAAI;;AAAiB;;AACzB;;AACA;;AACI;;AACA;;AAAI;;AAAe;;AACvB;;AACA;;AACI;;AACA;;AAAI;;AAAO;;AACf;;AACA;;AACI;;AACA;;AAAI;;AAAM;;AACd;;AACA;;AACI;;AACA;;AAAI;;AAAI;;AACZ;;AACJ;;;;AApDqB;;AAAA;;AAa4C;;AAAA;;AACK;;AAAA;;AACE;;AAAA;;AACC;;AAAA;;AACN;;AAAA;;AACF;;AAAA;;AACF;;AAAA;;AAKe;;AAAA;;AAIK;;AAAA;;AAIE;;AAAA;;AAIC;;AAAA;;AAIP;;AAAA;;AAID;;AAAA;;AAIF;;AAAA;;;;;;;;;sEDzC/DA,yB,EAAyB;cALrC,uDAKqC;eAL3B;AACT5Y,kBAAQ,EAAE,uBADD;AAETC,qBAAW,EAAE,oCAFJ;AAGTC,mBAAS,EAAE,CAAC,oCAAD;AAHF,S;AAK2B,Q;;;;;;;;;;;;;;;;;;;;AETtC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACkCA;;AACI;;AACJ;;;;;;;;;;AAEI;;AACI;;AACA;;AAAqB;;AAAkB;;AAC3C;;;;;;AAHmD;;AAC1C;;AAAA;;AACgB;;AAAA;;;;;;AAH7B;;AACI;;AAIJ;;;;;;AAJuB;;AAAA;;;;;;;;QD9BV4Y,mB;;;AAqFX,mCAAoBnU,MAApB,EAAmDC,OAAnD,EAAoE;AAAA;;AAAhD,aAAAD,MAAA,GAAAA,MAAA;AAA+B,aAAAC,OAAA,GAAAA,OAAA;AAnFnD,aAAAmU,SAAA,GAAY,EAAZ;AACA,aAAAvB,MAAA,GAAS,EAAT;AA0FE,aAAAwB,OAAA,GAAU,EAAV;AAIA,aAAA3D,YAAA,GAAe,CACb;AACE,kBAAQ,QADV;AAEE,oBAAU;AAFZ,SADa,EAKb;AACE,kBAAQ,MADV;AAEE,oBAAU;AAFZ,SALa,CAAf;AAUA,aAAAE,aAAA,GAAgB,CACd;AACE,kBAAQ,UADV;AAEE,oBAAU;AAFZ,SADc,EAKd;AACE,kBAAQ,YADV;AAEE,oBAAU;AAFZ,SALc,EASd;AACE,kBAAQ,WADV;AAEE,oBAAU;AAFZ,SATc,CAAhB;AAcA,aAAAD,UAAA,GAAa,CACX;AACE,kBAAQ,WADV;AAEE,oBAAU;AAFZ,SADW,EAKX;AACE,kBAAQ,UADV;AAEE,oBAAU;AAFZ,SALW,EASX;AACE,kBAAQ,WADV;AAEE,oBAAU;AAFZ,SATW,EAaX;AACE,kBAAQ,MADV;AAEE,oBAAU;AAFZ,SAbW,EAiBX;AACE,kBAAQ,SADV;AAEE,oBAAU;AAFZ,SAjBW,CAAb;AAsBA,aAAAF,IAAA,GAAO,CACL;AACE,kBAAQ,OADV;AAEE,oBAAU;AAFZ,SADK,EAKL;AACE,kBAAS,YADX;AAEE,oBAAU;AAFZ,SALK,EASL;AACE,kBAAQ,iBADV;AAEE,oBAAU;AAFZ,SATK,EAaL;AACE,kBAAQ,eADV;AAEE,oBAAU;AAFZ,SAbK,EAiBL;AACE,kBAAQ,OADV;AAEE,oBAAU;AAFZ,SAjBK,CAAP;AAsBA,aAAAK,MAAA,GAAS,CACP;AACE,kBAAQ,QADV;AAEE,oBAAU;AAFZ,SADO,EAKP;AACE,kBAAQ,SADV;AAEE,oBAAU;AAFZ,SALO,EASP;AACE,kBAAQ,SADV;AAEE,oBAAU;AAFZ,SATO,EAaP;AACE,kBAAQ,cADV;AAEE,oBAAU;AAFZ,SAbO,EAiBP;AACE,kBAAQ,WADV;AAEE,oBAAU;AAFZ,SAjBO,CAAT;AAsBA,aAAAD,OAAA,GAAU,CACR;AACE,kBAAQ,WADV;AAEE,oBAAY;AAFd,SADQ,EAKR;AACE,kBAAQ,eADV;AAEE,oBAAY;AAFd,SALQ,CAAV;AAUA,aAAAL,MAAA,GAAS,CACP;AACE,kBAAQ,QADV;AAEE,oBAAY;AAFd,SADO,EAKP;AACE,kBAAQ,QADV;AAEE,oBAAU;AAFZ,SALO,EASP;AACE,kBAAQ,SADV;AAEE,oBAAU;AAFZ,SATO,EAaP;AACE,kBAAQ,QADV;AAEE,oBAAU;AAFZ,SAbO,CAAT;AAmBA,aAAAD,WAAA,GAAc,CAAC,KAAKC,MAAN,CAAd;AACA,aAAA7M,IAAA,GAAO,KAAK4M,WAAL,CAAiB,KAAK+D,aAAtB,CAAP;AAlID;;;;kCAlFM;AACL,iBAAO,KAAKF,SAAL,CAAe7W,MAAf,GAAwB,CAA/B;AACD;;;mCACO;AACN,cAAIqB,CAAJ;AACA,cAAIoH,IAAJ;AACA,eAAKoO,SAAL,GAAiB,EAAjB;;AACA,eAAKxV,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAK2R,WAAL,CAAiB,CAAjB,EAAoBhT,MAApC,EAA4CqB,CAAC,EAA7C,EAAiD;AAC/C;AACA;AACAoH,gBAAI,GAAG,KAAKuK,WAAL,CAAiB,CAAjB,EAAoB3R,CAApB,CAAP;;AACA,gBAAGoH,IAAI,CAAC,MAAD,CAAJ,CAAauC,WAAb,GAA2B4K,QAA3B,CAAoC,KAAKN,MAAL,CAAYtK,WAAZ,EAApC,CAAH,EAAkE;AAChE,mBAAK6L,SAAL,CAAelQ,IAAf,CAAoB8B,IAApB;AACD;AACF,WAXK,CAYN;;AAED;;;iCAEQuO,W,EAAa;AACpBjY,iBAAO,CAACC,GAAR,CAAYgY,WAAZ;AACApY,sBAAY,CAAC0C,OAAb,CAAqB,YAArB,EAAmC0V,WAAnC;AACA,eAAKC,aAAL,GAAqBrY,YAAY,CAACC,OAAb,CAAqB,YAArB,CAArB;AACA,eAAK8J,UAAL,GAAkB,KAAKsO,aAAvB;AAGA,eAAKtO,UAAL,GAAkBqO,WAAlB;;AACA,kBAAO,KAAKC,aAAZ;AACE,iBAAK,QAAL;AAAe;AACZ,qBAAKjE,WAAL,CAAiB,CAAjB,IAAsB,KAAKC,MAA3B;AACA,qBAAKtK,UAAL,GAAkB,QAAlB;AACA;AACF;;AACD,iBAAK,eAAL;AAAsB;AACnB,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKG,YAA3B;AACA,qBAAKxK,UAAL,GAAkB,mBAAlB;AACA;AACF;;AACD,iBAAK,aAAL;AAAoB;AAClB,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKI,UAA3B;AACA,qBAAKzK,UAAL,GAAkB,iBAAlB;AACA;AACF;;AACD,iBAAK,gBAAL;AAAuB;AACtB,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKK,aAA3B;AACA,qBAAK1K,UAAL,GAAkB,iBAAlB;AACA;AACA;;AACD,iBAAK,QAAL;AAAe;AACd,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKO,MAA3B;AACA,qBAAK5K,UAAL,GAAkB,QAAlB;AACA;AACD;;AACD,iBAAK,MAAL;AAAa;AACX,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKE,IAA3B;AACA,qBAAKvK,UAAL,GAAkB,MAAlB;AACA;AACD;;AACD,iBAAK,SAAL;AAAgB;AACd,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKM,OAA3B;AACA,qBAAK3K,UAAL,GAAkB,SAAlB;AACA;AACD;;AACC;AAAS;AACP,qBAAKA,UAAL,GAAkB,QAAlB;AACA,qBAAKsO,aAAL,GAAqB,QAArB;AACC;AACF;AAxCH;;AA6CD,eAAKJ,SAAL,GAAiB,KAAK7D,WAAL,CAAiB,CAAjB,CAAjB;AAMF;;;mCAwIS;AAEN,cAAGpU,YAAY,CAACC,OAAb,CAAqB,SAArB,KAAkC,MAArC,EAA4C;AAC1C,gBAAIO,MAAM,GAAGF,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB,GAAtC;AACA,gBAAIgB,OAAO,GAAGhB,MAAM,GAAG,OAAvB;AACAF,kBAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBe,OAAvB;AACD;;AAED,eAAK6W,aAAL,GAAqBrY,YAAY,CAACC,OAAb,CAAqB,YAArB,CAArB;AACA,eAAK8J,UAAL,GAAkB,KAAKsO,aAAvB;AACA,eAAKtO,UAAL,CAAgB,CAAhB,EAAmBqC,WAAnB;;AAIA,kBAAO,KAAKiM,aAAZ;AACE,iBAAK,QAAL;AAAe;AACZ,qBAAKjE,WAAL,CAAiB,CAAjB,IAAsB,KAAKC,MAA3B;AACA,qBAAKtK,UAAL,GAAkB,QAAlB;AACA;AACF;;AACD,iBAAK,eAAL;AAAsB;AACnB,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKG,YAA3B;AACA,qBAAKxK,UAAL,GAAkB,mBAAlB;AACA;AACF;;AACD,iBAAK,aAAL;AAAoB;AAClB,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKI,UAA3B;AACA,qBAAKzK,UAAL,GAAkB,iBAAlB;AACA;AACF;;AACD,iBAAK,gBAAL;AAAuB;AACtB,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKK,aAA3B;AACA,qBAAK1K,UAAL,GAAkB,iBAAlB;AACA;AACA;;AACD,iBAAK,QAAL;AAAe;AACd,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKO,MAA3B;AACA,qBAAK5K,UAAL,GAAkB,QAAlB;AACA;AACD;;AACD,iBAAK,MAAL;AAAa;AACX,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKE,IAA3B;AACA,qBAAKvK,UAAL,GAAkB,MAAlB;AACA;AACD;;AACD,iBAAK,SAAL;AAAgB;AACd,qBAAKqK,WAAL,CAAiB,CAAjB,IAAsB,KAAKM,OAA3B;AACA,qBAAK3K,UAAL,GAAkB,SAAlB;AACA;AACD;;AACC;AAAS;AACP,qBAAKA,UAAL,GAAkB,QAAlB;AACC;AACF;AAvCH;;AA0CD,eAAKkO,SAAL,GAAiB,KAAK7D,WAAL,CAAiB,CAAjB,CAAjB;AAIA;;;yCAEa,CACX;AACA;AACF;;;;;;;uBA5RU4D,mB,EAAmB,+H,EAAA,uH;AAAA,K;;;YAAnBA,mB;AAAmB,sC;AAAA,e;AAAA,a;AAAA,i4B;AAAA;AAAA;ACRhC;;AACA;;AACI;;AACI;;AACJ;;AAEA;;AACI;;AACI;;AAEI;;AAAwE;AAAA;AAAA,aAAoB,QAApB,EAAoB;AAAA,mBAAW,IAAAd,QAAA,EAAX;AAAqB,WAAzC;;AAAxE;;AAAqI;;AAAI;;AAC7I;;AACJ;;AACA;;AASA;;AAAQ;AAAA,mBAAU,IAAAoB,QAAA,qBAAV;AAAuC,WAAvC;;AACJ;;AAA2C;;AAAc;;AACzD;;AAAuB;;AAAM;;AAC7B;;AAA+B;;AAAe;;AAC9C;;AAA4B;;AAAe;;AAC3C;;AAA8B;;AAAiB;;AAC/C;;AAAwB;;AAAO;;AAC/B;;AAAqB;;AAAI;;AACzB;;AAAuB;;AAAM;;AACjC;;AACJ;;AACJ;;AACA;;AAGA;;AAMA;;;;AAzCyB;;AAAA;;AAQ+D;;AAAA;;AAapE;;AAAA;;AAAmC;;AAAA;;AAWjC;;AAAA;;AAGD;;AAAA;;;;;;;;;sED7BRN,mB,EAAmB;cAL/B,uDAK+B;eALrB;AACT9Y,kBAAQ,EAAE,iBADD;AAETC,qBAAW,EAAE,8BAFJ;AAGTC,mBAAS,EAAE,CAAC,8BAAD;AAHF,S;AAKqB,Q;;;;;;;;;;;;;;;;;;;;;;;;AERhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;AC8BG;;AACG;;AAAQ;AAAA;;AAAA;;AAAA;AAAA;;AAAuF;;AAAe;;AACjH;;;;;;;;AACA;;AACG;;AAAQ;AAAA;;AAAA;;AAAA;AAAA;;AAAgG;;AAAK;;AAChH;;;;;;AACA;;AACG;;AAAsE;;AAAa;;AACtF;;;;;;AACA;;AACG;;AAAsE;;AAAmB;;AAC5F;;;;;;;;AA6BM;;AACE;;AAAQ;AAAA;;AAAA;;AAAA;AAAA;;AAAsF;;AAAK;;AACtG;;;;;;AACA;;AACC;;AAAsE;;AAAa;;AACtF;;;;;;;;AAGD;;AACC;;AAAQ;AAAA;;AAAA;;AAAA;AAAA;;AAAoF;;AAAK;;AAClG;;;;;;;;AACA;;AACC;;AAAQ;AAAA;;AAAA;;AAAA;AAAA;;AAAuF;;AAAiB;;AACnH;;;;QDzDUmZ,c;;;AAgDX,8BAAoB1U,MAApB,EACoBC,OADpB,EAEoBC,OAFpB,EAGoBC,oBAHpB,EAIoBC,qBAJpB,EAKoBC,yBALpB,EAMoB4E,yBANpB,EAMuE;AAAA;;AANnD,aAAAjF,MAAA,GAAAA,MAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAAC,oBAAA,GAAAA,oBAAA;AACA,aAAAC,qBAAA,GAAAA,qBAAA;AACA,aAAAC,yBAAA,GAAAA,yBAAA;AACA,aAAA4E,yBAAA,GAAAA,yBAAA;AApDpB;;;;;;;;;;;;;;;;;AAmBO,aAAA0P,OAAA,GAAU,EAAV;AAEA,aAAA3I,WAAA,GAAc,EAAd;AAEA,aAAA4I,cAAA,GAAiB,EAAjB;AACA,aAAAC,kBAAA,GAAqB,EAArB;AAOA,aAAAC,IAAA,GAAO,IAAP;AACA,aAAAC,SAAA,GAAY,KAAZ;AACA,aAAAC,WAAA,GAAc,KAAd;AACA,aAAAC,eAAA,GAAkB,KAAlB;AAMP,aAAA1U,KAAA,GAAQ,EAAR;AAec;;AACA,aAAK6E,MAAL,GAAc,EAAd;AACA,aAAKW,KAAL,GAAa,IAAI,uDAAJ,EAAb;AACA,aAAKiG,WAAL,GAAmB,EAAnB;AACA,aAAK4I,cAAL,GAAsB,EAAtB;AACA;AAEd;;;;;;;;uCAKe5I,W,EAAuB;AACpC,cAAG7P,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,aAAnC,EAAiD;AAC/C,iBAAK0Y,IAAL,GAAY,KAAZ;AACD,WAFD,MAEK;AAAE;AACL,iBAAI,IAAIlW,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACoN,WAAW,CAACzO,MAA3B,EAAmCqB,CAAC,EAApC,EAAuC;AACrC,kBAAGoN,WAAW,CAACpN,CAAD,CAAX,CAAeiO,SAAf,IAA4B1Q,YAAY,CAACC,OAAb,CAAqB,SAArB,CAA/B,EAAgE;AAC9D,qBAAK0Y,IAAL,GAAU,KAAV,CAD8D,CAC7C;;AACjB,oBAAG9I,WAAW,CAACpN,CAAD,CAAX,CAAe0G,MAAf,IAAyB,UAA5B,EAAuC;AACrC,uBAAKyP,SAAL,GAAe,IAAf,CADqC,CACf;AACvB,iBAFD,MAEM,IAAG/I,WAAW,CAACpN,CAAD,CAAX,CAAe0G,MAAf,IAAyB,WAA5B,EAAwC;AAC5C,uBAAK2P,eAAL,GAAqB,IAArB;AACD,iBAFK,MAEA,IAAGjJ,WAAW,CAACpN,CAAD,CAAX,CAAe0G,MAAf,IAAyB,QAA5B,EAAqC;AACzC,uBAAK2P,eAAL,GAAqB,KAArB,CADyC,CACd;;AAC3B,uBAAKF,SAAL,GAAe,KAAf,CAFyC,CAEd;;AAC3B,uBAAKC,WAAL,GAAmB,IAAnB,CAHyC,CAGd;AAC5B;AACF;AACF;AACF;AACF;AAED;;;;;iCAGM;AAAA;;AACF,cAAI9H,aAAa,GAAa,IAAI,+DAAJ,EAA9B;AACAA,uBAAa,CAACL,SAAd,GAA0B1Q,YAAY,CAACC,OAAb,CAAqB,SAArB,CAA1B;AACA8Q,uBAAa,CAAC7H,OAAd,GAAwB,KAAKrF,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAxB;AACA4K,uBAAa,CAAC5H,MAAd,GAAuB,WAAvB;AACA,eAAKlF,qBAAL,CAA2BmF,QAA3B,CAAoC,KAAKvF,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAApC,EAA6EnI,IAA7E,CAAkF,UAACwJ,IAAD,EAAU;AAC1FuJ,yBAAa,CAACgI,aAAd,GAA8BvR,IAAI,CAACrF,KAAnC;;AACA,mBAAI,CAAC2G,yBAAL,CAA+BkQ,eAA/B,CAA+CjI,aAA/C;AACD,WAHD;AAMH;AACD;;;;0CAEe;AACbxL,kBAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CC,OAA7C,GAAuD,OAAvD;AACD;AAED;;;;iCAEM;AACJH,kBAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACD;AAED;;;;;gCAGK;AAAA;;AACH,eAAKoD,yBAAL,CAA+BoI,sBAA/B,CAAsD,KAAKrN,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAtD,EAA+F5D,SAA/F,CAAyG,UAAAC,GAAG,EAAE;AAC5G,gBAAIC,CAAJ;AACA,gBAAIsO,aAAa,GAAa,IAAI,+DAAJ,EAA9B;;AACA,iBAAItO,CAAC,GAAC,CAAN,EAASA,CAAC,GAACD,GAAG,CAACpB,MAAf,EAAuBqB,CAAC,EAAxB,EAA2B;AACzB,kBAAGD,GAAG,CAACC,CAAD,CAAH,CAAOiO,SAAP,IAAoB1Q,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAvB,EAAuD;AACrD8Q,6BAAa,GAAGvO,GAAG,CAACC,CAAD,CAAnB;AACAsO,6BAAa,CAAC5H,MAAd,GAAuB,QAAvB;;AACA,uBAAI,CAACL,yBAAL,CAA+BmI,eAA/B,CAA+CF,aAA/C;AACD;AACF;AACF,WAVD;AAWD;;;mCAEO;AAAA;;AAEN;AAEA;AACA,cAAIkI,MAAM,GAAG,KAAKpV,MAAL,CAAYoC,QAAZ,CAAqBC,QAArB,CAA8BC,GAA9B,CAAkC,IAAlC,CAAb;AAEA;;;;AAEA,cAAInG,YAAY,CAACC,OAAb,CAAqB,SAArB,KAAiC,IAArC,EAA0C;AACxCD,wBAAY,CAACE,KAAb;AACAC,mBAAO,CAACC,GAAR,CAAY,oBAAZ;AACA,gBAAIC,SAAS,GAAGC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB,QAAzC;AACAF,kBAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBJ,SAAvB;AACD;;AAED,cAAI6Y,OAAO,GAAG,KAAKjV,qBAAL,CAA2BmF,QAA3B,CAAoC6P,MAApC,EAA4Cjb,IAA5C,CAAiD,UAACwJ,IAAD,EAAU;AAEvE,gBAAI0R,OAAO,GAAS,IAAI,uDAAJ,EAApB;AACAA,mBAAO,CAACnP,UAAR,GAAqBvC,IAAI,CAACuC,UAA1B;AACAmP,mBAAO,CAACpP,MAAR,GAAiBtC,IAAI,CAACsC,MAAtB;AACAoP,mBAAO,CAAC7U,WAAR,GAAsBmD,IAAI,CAACnD,WAA3B;AACA6U,mBAAO,CAACtB,QAAR,GAAmBpQ,IAAI,CAACoQ,QAAxB;AACAsB,mBAAO,CAAC/W,KAAR,GAAgBqF,IAAI,CAACrF,KAArB;AACA+W,mBAAO,CAACpD,GAAR,GAActO,IAAI,CAACsO,GAAnB;AACAoD,mBAAO,CAAC3a,EAAR,GAAaiJ,IAAI,CAACjJ,EAAlB;AACA2a,mBAAO,CAAClR,GAAR,GAAcR,IAAI,CAACQ,GAAnB;AACAkR,mBAAO,CAACnD,MAAR,GAAiBvO,IAAI,CAACuO,MAAtB;AACAmD,mBAAO,CAAClD,UAAR,GAAqBxO,IAAI,CAACwO,UAA1B;AACAkD,mBAAO,CAACjD,WAAR,GAAsBzO,IAAI,CAACyO,WAA3B;AACAiD,mBAAO,CAAChD,MAAR,GAAiB1O,IAAI,CAAC0O,MAAtB;AACAgD,mBAAO,CAACrP,IAAR,GAAerC,IAAI,CAACqC,IAApB;AACAqP,mBAAO,CAAC3D,MAAR,GAAiB/N,IAAI,CAAC+N,MAAtB;AACA2D,mBAAO,CAAC9C,SAAR,GAAoB5O,IAAI,CAAC4O,SAAzB;AACA8C,mBAAO,CAAC/C,GAAR,GAAc3O,IAAI,CAAC2O,GAAnB;AACA+C,mBAAO,CAACzL,MAAR,GAAiBjG,IAAI,CAACiG,MAAtB;AACAyL,mBAAO,CAAC7C,QAAR,GAAmB7O,IAAI,CAAC6O,QAAxB,CApBuE,CAoBrC;;AAClC,gBAAI8C,QAAQ,GAAG3R,IAAf;AAEA,mBAAI,CAACoC,KAAL,GAAasP,OAAb;AAEA;;AAEA,mBAAI,CAACjV,qBAAL,CAA2BmV,SAA3B,CAAqC,OAAI,CAACxP,KAAL,CAAWrL,EAAhD,EAAoDgE,SAApD,CAA8D,UAAAC,GAAG,EAAE;AACjE,qBAAI,CAACgW,OAAL,GAAe,EAAf;AACE,kBAAI/V,CAAJ;;AACA,mBAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAACD,GAAG,CAACpB,MAAlB,EAA2BqB,CAAC,EAA5B,EAA+B;AAC7B,uBAAI,CAAC+V,OAAL,CAAazQ,IAAb,CAAkB;AAACxD,qBAAG,EAAE/B,GAAG,CAACC,CAAD,CAAH,CAAOoP;AAAb,iBAAlB;AACD;;AACH,kBAAG,OAAI,CAAC2G,OAAL,CAAapX,MAAb,IAAqB,CAAxB,EAA0B;AACxB,uBAAI,CAACoX,OAAL,CAAazQ,IAAb,CAAkB;AAACxD,qBAAG,EAAE2U,OAAO,CAAClR;AAAd,iBAAlB;AACD;AACF,aATD;;AAWA,mBAAI,CAAChE,oBAAL,CAA0B1B,kBAA1B,CAA6C4W,OAAO,CAAC/W,KAArD,EAA4DI,SAA5D,CAAsE,UAAAC,GAAG,EAAE;AACzE,qBAAI,CAAC6W,iBAAL,GAAyB7W,GAAG,CAAC,CAAD,CAAH,CAAOwE,MAAhC;AACD,aAFD;AAIA;;;AACE,mBAAI,CAAC8B,yBAAL,CAA+BoI,sBAA/B,CAAsD,OAAI,CAACtH,KAAL,CAAWrL,EAAjE,EAAqEgE,SAArE,CAA+E,UAAAC,GAAG,EAAE;AAClF,qBAAI,CAACqN,WAAL,GAAmB,EAAnB;AACA,kBAAIpN,CAAJ;;AACA,mBAAIA,CAAC,GAAC,CAAN,EAASA,CAAC,GAACD,GAAG,CAACpB,MAAf,EAAuBqB,CAAC,EAAxB,EAA2B;AACzB,uBAAI,CAACoN,WAAL,CAAiB9H,IAAjB,CAAsB;AAAC2I,2BAAS,EAAElO,GAAG,CAACC,CAAD,CAAH,CAAOiO,SAAnB;AAA8BvH,wBAAM,EAAE3G,GAAG,CAACC,CAAD,CAAH,CAAO0G;AAA7C,iBAAtB;AACD,eALiF,CAOlF;;;AACA,qBAAI,CAACmQ,cAAL,CAAoB,OAAI,CAACzJ,WAAzB;AAEA;;;AACA,qBAAI,CAAC7L,oBAAL,CAA0BuV,WAA1B,GAAwChX,SAAxC,CAAkD,UAAAC,GAAG,EAAE;AACvD,uBAAI,CAACiW,cAAL,GAAsB,EAAtB;AACA,oBAAIhW,CAAJ,EAAO6N,CAAP,CAFuD,CAGvD;;AACA,qBAAI7N,CAAC,GAAC,CAAN,EAASA,CAAC,GAAC,OAAI,CAACoN,WAAL,CAAiBzO,MAA5B,EAAoCqB,CAAC,EAArC,EAAwC;AACtC;AACA,uBAAI6N,CAAC,GAAC,CAAN,EAASA,CAAC,GAAC9N,GAAG,CAACpB,MAAf,EAAuBkP,CAAC,EAAxB,EAA2B;AACzB;AACA,wBAAG,OAAI,CAACT,WAAL,CAAiBpN,CAAjB,EAAoBiO,SAApB,IAAiClO,GAAG,CAAC8N,CAAD,CAAH,CAAO/R,EAAxC,KAA+C,OAAI,CAACsR,WAAL,CAAiBpN,CAAjB,EAAoB0G,MAApB,IAA4B,UAA5B,IAA0C,OAAI,CAAC0G,WAAL,CAAiBpN,CAAjB,EAAoB0G,MAApB,IAA4B,QAArH,CAAH,EAAkI;AAChI;AACA,6BAAI,CAACsP,cAAL,CAAoB1Q,IAApB,CAAyB;AAACxD,2BAAG,EAAE/B,GAAG,CAAC8N,CAAD,CAAH,CAAO3J;AAAb,uBAAzB;;AAEA,0BAAInE,GAAG,CAAC8N,CAAD,CAAH,CAAO3N,IAAP,IAAe,SAAnB,EAA8B;AAC5B,+BAAI,CAAC+V,kBAAL,CAAwB3Q,IAAxB,CAA6B,CAAC,gBAAD,EAAkBvF,GAAG,CAAC8N,CAAD,CAAH,CAAO/R,EAAzB,CAA7B;AACD,uBAFD,MAEK;AACH,+BAAI,CAACma,kBAAL,CAAwB3Q,IAAxB,CAA6B,CAAC,oBAAD,EAAsBvF,GAAG,CAAC8N,CAAD,CAAH,CAAO/R,EAA7B,CAA7B;AACD;AACF;AACF;;AACD4a,0BAAQ,CAAC1L,MAAT,GAAkB+L,MAAM,CAAC,OAAI,CAACf,cAAL,CAAoBrX,MAArB,CAAxB;;AACA,yBAAI,CAAC6C,qBAAL,CAA2BwV,WAA3B,CAAuCN,QAAvC;AACD;AACF,eAtBC;AAuBH,aAlCC;AAoCJ,WA/Ec,CAAd;AAgFD;;;;;;;uBAtOUZ,c,EAAc,+H,EAAA,uH,EAAA,yI,EAAA,sK,EAAA,uJ,EAAA,0K,EAAA,0K;AAAA,K;;;YAAdA,c;AAAc,gC;AAAA;AAAA;;;;;;;;;;;;;;;AC1B3B;;AAEA;;AACG;;AACG;;AAAI;;AAAG;;AAAQ;;AAAI;;AAAoB;;AAAgB;;AAAO;;AACjE;;AACA;;AACG;;AACG;;AACH;;AACH;;AAEA;;AACG;;AAAkD;;AAAiB;;AACnE;;AACA;;AACA;;AACA;;AAGA;;AAAG;;AAAiC;;AACpC;;AACA;;AAA+C;;AAAa;;AAC5D;;AACA;;AACA;;AAA+C;;AAAe;;AAEjE;;AAGA;;AAGA;;AAGA;;AAGA;;AAIH;;AAEA;;AACG;;AAAG;;AAAqB;;AAA0B;;AAAqB;;AAAO;;AAC9E;;AAAG;;AAAgB;;AAAmB;;AAAgB;;AAAO;;AAC7D;;AAAG;;AAAe;;AAAmB;;AAAa;;AAAO;;AACzD;;AAAG;;AAAmB;;AAAkB;;AAAO;;AAC/C;;AACG;;AACH;;AACA;;AAAG;;AAA0B;;AAC7B;;AACG;;AACH;;AACA;;AAAG;;AAAe;;AAAmB;;AAAqB;;AAAO;;AACjE;;AAAG;;AAAsB;;AAAmB;;AAAoB;;AAAO;;AAC1E;;AAEA;;AACG;;AACE;;AAAI;;AAAG;;AAAoC;;AAAI;;AAC/C;;AACA;;AACI;;AACE;;AAAI;;AAA6C;;AACnD;;AACA;;AACA;;AAGD;;AAGH;;AACA;;AACA;;AAGA;;AAGF;;AACF;;;;AAjF4C;;AAAA;;AAI1B;;AAAA;;AAKqC;;AAAA;;AASH;;AAAA;;AAGA;;AAAA;;AAK7C;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAO6C;;AAAA;;AACZ;;AAAA;;AACD;;AAAA;;AACf;;AAAA;;AAEnB;;AAAA;;AAIU;;AAAA,iGAAyB,OAAzB,EAAyB,sBAAzB;;AAEwB;;AAAA;;AACO;;AAAA;;AAYjC;;AAAA;;AAGD;;AAAA;;AAKH;;AAAA;;AAGA;;AAAA;;;;;;;;;sEDvDGA,c,EAAc;cAN1B,uDAM0B;eANhB;AACTrZ,kBAAQ,EAAE,WADD;AAETC,qBAAW,EAAE,wBAFJ;AAGTC,mBAAS,EAAE,CAAC,wBAAD;AAHF,S;AAMgB,Q;;;;;;;;;;;;;;;;;;gBAuCxB,uD;iBAAU,W;;;;;;;;;;;;;;;;;;;;AEjEb;AAAA;;;AAAA;AAAA;AAAA,O,CAAA;AACA;AACA;;;AAEO,QAAMsa,WAAW,GAAG;AACzBC,gBAAU,EAAE,KADa;AAGzBpa,cAAQ,EAAE;AACRqa,cAAM,EAAE,yCADA;AAERC,kBAAU,EAAE,gCAFJ;AAGRC,mBAAW,EAAE,uCAHL;AAIRC,iBAAS,EAAE,gBAJH;AAKRC,qBAAa,EAAE,4BALP;AAMRC,yBAAiB,EAAE,cANX;AAORC,aAAK,EAAE,2CAPC;AAQRC,qBAAa,EAAE;AARP;AAHe,KAApB;AAiBP;;;;;;;AAOA;;;;;;;;;;;;;;;;;AC5BA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,QAAI,sEAAYR,UAAhB,EAA4B;AAC1B;AACD;;AAED,gFAAyBS,eAAzB,CAAyC,yDAAzC,WACS,UAAApO,GAAG;AAAA,aAAI7L,OAAO,CAACuL,KAAR,CAAcM,GAAd,CAAJ;AAAA,KADZ","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule, PreloadAllModules } from '@angular/router';\r\nimport { Page1Component } from './page1/page1.component';\r\nimport { InicioSesionComponent } from './inicio-sesion/inicio-sesion.component';\r\nimport { RegistroComponent } from './registro/registro.component';\r\nimport { PerfilOrganizadorComponent } from './perfiles/perfil-organizador/perfil-organizador.component';\r\nimport { PerfilViajeroComponent } from './perfiles/perfil-viajero/perfil-viajero.component';\r\nimport { CrearViajeComponent } from './viajes/crear-viaje/crear-viaje.component';\r\nimport { MisViajesComponent } from './viajes/mis-viajes/mis-viajes.component';\r\nimport { UnirseCiudadComponent } from './viajes/unirse-ciudad/unirse-ciudad.component';\r\nimport { UnirsePaisComponent } from './viajes/unirse-pais/unirse-pais.component';\r\nimport { UnirseContinenteComponent } from './viajes/unirse-continente/unirse-continente.component';\r\nimport { ViajeComponent } from './viajes/viaje/viaje.component';\r\nimport { NotFound404Component } from './not-found404/not-found404.component';\r\nimport { PrivacidadComponent } from './privacidad/privacidad.component';\r\nimport { LogrosComponent } from './logros/logros.component';\r\nimport { BienvenidaComponent } from './bienvenida/bienvenida.component';\r\nimport { PedirImagenComponent } from './shared/pedir-imagen/pedir-imagen.component';\r\nimport { PruebasComponent} from './pruebas/pruebas.component';\r\n\r\nconst routes: Routes = [\r\n  {path:'page1', component:Page1Component},\r\n  {path:'inicio-sesion', component:InicioSesionComponent},\r\n  {path:'registro', component:RegistroComponent},\r\n  {path:'perfil-organizador/:id', component:PerfilOrganizadorComponent},\r\n  {path:'perfil-viajero/:id', component:PerfilViajeroComponent},\r\n  {path:'crear-viaje', component:CrearViajeComponent},\r\n  {path:'mis-viajes', component:MisViajesComponent},\r\n  {path:'unirse-ciudad/:id', component:UnirseCiudadComponent},\r\n  {path:'unirse-pais', component:UnirsePaisComponent},\r\n  {path:'unirse-continente', component:UnirseContinenteComponent},\r\n  {path:'viaje/:id', component:ViajeComponent},\r\n  {path:'privacidad', component:PrivacidadComponent},\r\n  {path:'not-found404', component: NotFound404Component},\r\n  {path:'logros', component: LogrosComponent},\r\n  {path:'bienvenida', component: BienvenidaComponent},\r\n  {path:'pedir-imagen', component: PedirImagenComponent},\r\n  {path:'pruebas', component: PruebasComponent},\r\n  {path:'**', pathMatch: 'full', redirectTo: 'page1'}\r\n  \r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'Tripmefy';\r\n}\r\n","<section class=\"general-container\">\r\n  <router-outlet></router-outlet>\r\n</section>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatSliderModule } from '@angular/material/slider';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\n// ELEMENTOS UI ESPEC√çFICOS:\r\nimport {MatExpansionModule} from '@angular/material/expansion';\r\nimport {MatMenuModule} from '@angular/material/menu';\r\nimport {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\r\nimport {MatSnackBarModule} from '@angular/material/snack-bar';\r\nimport {MatTableModule} from '@angular/material/table';\r\nimport {MatToolbarModule} from '@angular/material/toolbar';\r\nimport {MatTooltipModule} from '@angular/material/tooltip';\r\n\r\n\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatRadioModule } from '@angular/material/radio';\r\n\r\nimport { AngularFireModule } from '@angular/fire';\r\nimport { AngularFirestoreModule } from '@angular/fire/firestore';\r\nimport { AngularFireStorageModule } from '@angular/fire/storage';\r\nimport { AngularFireAuthModule } from '@angular/fire/auth';\r\nimport { environment } from '../environments/environment';\r\n\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\r\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\r\nimport { ModalModule } from 'ngx-bootstrap/modal';\r\n\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { InicioSesionComponent } from './inicio-sesion/inicio-sesion.component';\r\nimport { NotFound404Component } from './not-found404/not-found404.component';\r\nimport { Page1Component } from './page1/page1.component';\r\nimport { PrivacidadComponent } from './privacidad/privacidad.component';\r\nimport { RegistroComponent } from './registro/registro.component';\r\nimport { FooterComponent } from './shared/footer/footer.component';\r\nimport { HeaderComponent } from './shared/header/header.component';\r\nimport { PerfilOrganizadorComponent } from './perfiles/perfil-organizador/perfil-organizador.component';\r\nimport { PerfilViajeroComponent } from './perfiles/perfil-viajero/perfil-viajero.component';\r\nimport { CrearViajeComponent } from './viajes/crear-viaje/crear-viaje.component';\r\nimport { MisViajesComponent } from './viajes/mis-viajes/mis-viajes.component';\r\nimport { UnirseCiudadComponent } from './viajes/unirse-ciudad/unirse-ciudad.component';\r\nimport { UnirseContinenteComponent } from './viajes/unirse-continente/unirse-continente.component';\r\nimport { UnirsePaisComponent } from './viajes/unirse-pais/unirse-pais.component';\r\nimport { ViajeComponent } from './viajes/viaje/viaje.component';\r\nimport { CarouselComponent } from './carousel/carousel.component';\r\n\r\n\r\nimport { LogrosComponent } from './logros/logros.component';\r\nimport { BienvenidaComponent } from './bienvenida/bienvenida.component';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { VolverComponent } from './shared/volver/volver.component';\r\n\r\n\r\nimport { BotonComponent } from './shared/boton/boton.component';\r\n\r\n\r\nimport { ScrollTopComponent } from './shared/scroll-top/scroll-top.component';\r\nimport { PedirImagenComponent } from './shared/pedir-imagen/pedir-imagen.component';\r\nimport { PruebasComponent } from './pruebas/pruebas.component';\r\nimport { PuntuacionPuComponent } from './shared/puntuacion-pu/puntuacion-pu.component';\r\nimport { ComentarioPuComponent } from './shared/comentario-pu/comentario-pu.component';\r\nimport { EdicionPuComponent } from './shared/edicion-pu/edicion-pu.component';\r\nimport { MensajeComponent } from './shared/mensaje/mensaje.component';\r\n\r\n\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    InicioSesionComponent,\r\n    NotFound404Component,\r\n    Page1Component,\r\n    PrivacidadComponent,\r\n    RegistroComponent,\r\n    FooterComponent,\r\n    HeaderComponent,\r\n    PerfilOrganizadorComponent,\r\n    PerfilViajeroComponent,\r\n    CrearViajeComponent,\r\n    MisViajesComponent,\r\n    UnirseCiudadComponent,\r\n    UnirseContinenteComponent,\r\n    UnirsePaisComponent,\r\n    ViajeComponent,\r\n    CarouselComponent,\r\n    VolverComponent,\r\n    LogrosComponent,\r\n    BienvenidaComponent,\r\n    VolverComponent,\r\n\r\n    ScrollTopComponent,\r\n\r\n    BotonComponent,\r\n\r\n    PedirImagenComponent,\r\n\r\n    PruebasComponent,\r\n    PuntuacionPuComponent,\r\n    ComentarioPuComponent,\r\n    EdicionPuComponent,\r\n    MensajeComponent,\r\n  ],\r\n  imports: [\r\n\r\n    AngularFireModule.initializeApp(environment.firebase),\r\n    CommonModule,\r\n    AngularFirestoreModule,\r\n    AngularFireAuthModule,\r\n    AngularFireStorageModule,\r\n  \r\n    BsDropdownModule.forRoot(),\r\n    TooltipModule.forRoot(),\r\n    ModalModule.forRoot(),\r\n\r\n    BrowserModule,\r\n    FormsModule,\r\n    AppRoutingModule,\r\n    BrowserAnimationsModule,\r\n    FormsModule,\r\n    MatButtonModule,\r\n    MatCardModule,\r\n    MatSelectModule,\r\n    MatDatepickerModule,\r\n    MatBadgeModule,\r\n    MatFormFieldModule,\r\n    MatIconModule,\r\n    MatInputModule,\r\n    MatSliderModule,\r\n    MatRadioModule,\r\n    MatCheckboxModule,\r\n    MatDialogModule,\r\n    MatTableModule,\r\n    MatExpansionModule,\r\n    MatSnackBarModule,\r\n    MatTooltipModule,\r\n    MatToolbarModule,\r\n    MatProgressSpinnerModule,\r\n    MatMenuModule,\r\n    RouterModule,\r\n\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-bienvenida',\r\n  templateUrl: './bienvenida.component.html',\r\n  styleUrls: ['./bienvenida.component.scss']\r\n})\r\nexport class BienvenidaComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  textoMotivacion = \"\";\r\n  textoAccion = \"\";\r\n  organizador:boolean;\r\n\r\n  textoViajero = [\r\n    {\r\n      'motivacion': '¬°Hola viajero! ¬øEst√°s cansado del mismo rollo de siempre? Organizar un viaje durante meses para que acabe saliendo mal, o peor, que ni siquiera acabe llev√°ndose a cabo. Las agencias de viajes son costosas y las ofertas no suelen adaptarse a lo buscado. Pues est√°s de suerte, porque has llegado a la p√°gina que satisface todas tus necesidades. Busca ofertas de agencias, √∫nete y vete de viaje con gente como t√∫. ¬øA qu√© esperas? ¬°Y no olvides rellenar tu perfil! ser√° la forma de conocerte para los dem√°s viajeros. ¬øA qu√© esperas? Dale al bot√≥n y comienza a vivir aventuras inolvidables con gente diferente y al mejor precio.',\r\n      'accion': 'Busca tu primera aventura'\r\n\r\n    }\r\n  ]\r\n\r\n\r\n  textoOrganizador = [\r\n    {\r\n      'motivacion': '¬°Hola organizador! Atraer a la gente cada vez es m√°s complicado. Internet ha puesto al alcance de cualquiera organizar un viaje, y los j√≥venes no quieren destinar una parte del dinero a las comisiones de las agencias. Con Tripmefy tendr√°s la oportunidad de acercar tu negocio a un p√∫blico joven, subiendo ofertas de baja demanda, permitiras unirse a millones de usuarios que querr√°n llevar a cabo ese viaje. Los pagos se realizan de forma totalmente segura atrav√©s de paypal, adem√°s, podr√°s aceptar o rechazar a los solicitantes bas√°ndote en su perfil, comentarios y puntuaciones. Consigue visibilidad entre el p√∫blico joven, vende m√°s y lleva tu negocio al siguiente nivel. ¬øA qu√© esperas? Haz click en crear y sube tu primera oferta ',\r\n      'accion': 'Sube tu primera oferta'\r\n    }\r\n  ]\r\n\r\n\r\n  ngOnInit(): void {\r\n\r\n    /**Obtener variable global tipo y meterla en usuario (falta) */\r\n\r\n    /**ESTO SIRVE PARA PRUEBAS DE TIPO DE USUARIO */\r\n\r\n    // localStorage.setItem('usuario', 'viajero');\r\n    //localStorage.setItem('usuario', 'organizador');\r\n\r\n    /*SI SE INTENTA ACCEDER A ESTA PAGINA SIN HABER INICIADO SESION RETORNAREMOS\r\n    A LA PAGINA PRINCIPAL */\r\n    if (localStorage.getItem('usuario')==null){\r\n      localStorage.clear();\r\n      console.log(\"Any user is logged\");\r\n      var pagInicio = window.location.origin + '/page1'; \r\n      window.location.assign(pagInicio);\r\n    }\r\n\r\n\r\n\r\n    let usuario = localStorage.getItem('tipo');\r\n\r\n    /**Este switch evalua la variable usuario y decide qu√© texto mostrar */\r\n    switch(usuario){\r\n      case 'viajero':\r\n        this.textoMotivacion = this.textoViajero[0][\"motivacion\"];\r\n        this.textoAccion = this.textoViajero[0][\"accion\"];\r\n        this.organizador = false;\r\n        break;\r\n      case 'organizador':\r\n      this.textoMotivacion = this.textoOrganizador[0][\"motivacion\"];\r\n      this.textoAccion = this.textoOrganizador[0][\"accion\"];\r\n      this.organizador = true;\r\n        break;\r\n      default:\r\n      this.textoMotivacion = this.textoViajero[0][\"motivacion\"];\r\n      this.textoAccion = this.textoViajero[0][\"accion\"];\r\n        break;\r\n\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","<app-header titulo = \"Aqu√≠ empieza todo\"></app-header>\r\n<div class=\"contenido\">\r\n    <div class=\"tarjeta\">\r\n        <h1>¬° Bienvenido !</h1>\r\n        <div class=\"principal\">\r\n            <div class=\"videoViajero\" *ngIf=\"organizador == false\">\r\n                <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/nWrR_AraVUE\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\r\n            </div>\r\n            <div class=\"videoOrganizador\" *ngIf=\"organizador == true\">\r\n                <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/QHfSASXi-nA\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\r\n            </div>\r\n            <p>{{textoMotivacion}}</p>\r\n        </div>\r\n        <div class=\"inferior\">\r\n            <h2>{{textoAccion}}</h2>\r\n            <!--<button [routerLink]=\"['/mis-viajes']\">COMENZAR</button>-->\r\n            <app-boton texto=\"COMENZAR\" [routerLink]=\"['/mis-viajes']\"></app-boton>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, Input,OnInit , Output, EventEmitter} from \"@angular/core\";\r\nimport { trigger, transition, style, animate } from \"@angular/animations\";\r\nimport { ActivatedRoute }  from '@angular/router';\r\nimport { Router } from '@angular/router'; //Para redirigir a una p√°gina\r\n\r\n@Component({\r\n  selector: \"carousel\",\r\n  templateUrl: \"./carousel.component.html\",\r\n  styleUrls: [\"./carousel.component.scss\"],\r\n  animations: [\r\n    trigger('carouselAnimation', [\r\n      transition('void => *', [\r\n        style({ opacity: 0 }),\r\n        animate('300ms', style({ opacity: 1 }))\r\n      ]),\r\n      transition('* => void', [\r\n        animate('300ms', style({ opacity: 0 }))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\n\r\nexport class CarouselComponent {\r\n  @Input() slides;\r\n  @Input() links;\r\n\r\n  currentSlide = 0;\r\n  /**misLinks se emplea para pasar por parametro los links correspodientes a las im√°genes, en el mismo orden.\r\n   * Debe tener la siguiente estructura:\r\n   * [\r\n   *  [parte1, id1],\r\n   *  [parte2, id2],\r\n   *      ...\r\n   *  [parte3, id3]\r\n   * ]\r\n   */\r\n  primero = \"\";\r\n  segundo = \"\";\r\n\r\n  constructor(private _activatedRoute: ActivatedRoute,\r\n    private route: Router) {\r\n    \r\n  }\r\n\r\n  onPreviousClick() {\r\n    const previous = this.currentSlide - 1;\r\n    this.currentSlide = previous < 0 ? this.slides.length - 1 : previous;\r\n    //console.log(\"previous clicked, new current slide is: \", this.currentSlide);\r\n\r\n\r\n  }\r\n\r\n  onNextClick() {\r\n    const next = this.currentSlide + 1;\r\n    this.currentSlide = next === this.slides.length ? 0 : next;\r\n    //console.log(\"next clicked, new current slide is: \", this.currentSlide);\r\n\r\n  }\r\n\r\n  onClick(){\r\n\r\n    if(this.links == undefined || this.links.length <= 0){\r\n      //si no tenemos links devolvemos un cero y ya, no hacemos nada\r\n      return 0;\r\n    }else{\r\n       //si tenemos links hacemos lo siguiente\r\n\r\n       var origin = window.location.origin + '/'; //obtenemos la parte de la izquierda de la url\r\n\r\n      //var datos = window.location.pathname;\r\n      //var routerLink = datos.split('/');\r\n\r\n      var primero = '/' + this.links[this.currentSlide][0] + '/'; //primero corresponde a la primera posicion del slide donde estemos\r\n      var segundo = this.links[this.currentSlide][1]\r\n      //var segundo = 'yhySIyMyRGwIqtwEeuZV';\r\n      this.primero = primero;\r\n      this.segundo = segundo;\r\n\r\n\r\n      var destino = primero + segundo;\r\n      \r\n      this.route.navigate([destino]);\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n}\r\n","<!-- carousel -->\r\n<div class=\"carousel\">\r\n  <!--si hemos pasado link, se pone este a block-->\r\n \r\n    <ng-container  *ngFor=\"let slide of slides; let i = index; let link of misLinks\">\r\n      <img\r\n        *ngIf=\"i === currentSlide\"\r\n        [src]=\"slide.src\"\r\n        (click)=\"onClick()\"\r\n        class=\"slide\"\r\n        @carouselAnimation\r\n      />\r\n    </ng-container>\r\n\r\n \r\n   \r\n  \r\n    <!-- controls -->\r\n    <button class=\"control prev\" (click)=\"onPreviousClick()\">\r\n      <span class=\"arrow left\"></span>\r\n    </button>\r\n    <button class=\"control next\" (click)=\"onNextClick()\">\r\n      <span class=\"arrow right\"></span>\r\n    </button>\r\n  </div>","import { Usuario } from 'src/app/interfaces/usuario';\r\nimport { UsuarioFirestoreService } from './../services/firestore/usuario-firestore.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, FormGroupDirective, NgForm, Validators} from '@angular/forms';\r\nimport { ErrorStateMatcher } from '@angular/material/core';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { Router } from '@angular/router'; //Para redirigir a una p√°gina\r\n\r\n\r\n@Component({\r\n  selector: 'app-inicio-sesion',\r\n  templateUrl: './inicio-sesion.component.html',\r\n  styleUrls: ['./inicio-sesion.component.scss']\r\n})\r\nexport class InicioSesionComponent implements OnInit {\r\n\r\n  public hide = true;\r\n\r\n  constructor(private route: Router, private authSvc : AuthService, private userService: UsuarioFirestoreService) { }\r\n\r\n  public password:string;\r\n  public email:string;\r\n\r\n \r\n  ngOnInit(): void {\r\n  }\r\n\r\n  back(){\r\n    this.route.navigate(['/page1']);\r\n  }\r\n\r\n  onLogin(){\r\n    var form:Usuario = new Usuario();\r\n    form.email = this.email;\r\n    form.password = this.password;\r\n    this.authSvc.loginByEmail(form);\r\n    this.userService.getUsuariosByEmail(this.email).subscribe(res=>{\r\n      var i;\r\n        for(i=0; i<res.length; i++){ //nunca va a haber m√°s de un usuario con ese email\r\n          localStorage.setItem(\"usuario\", res[i].id);\r\n          localStorage.setItem(\"tipo\", res[i].tipo);\r\n        }\r\n      })  \r\n  }\r\n\r\n  checkFields(){\r\n    if (this.password==='' || this.email === '' || !/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.([a-zA-Z]{2,4})+$/.test(this.email)){\r\n\r\n      return true;\r\n    }else{\r\n        return false;\r\n    } \r\n  }\r\n\r\n}\r\n","<div class=\"contenedor\">\r\n  <div class=\"lateral-izq\">\r\n      \r\n      <img src='./assets/tripmefy.png'>\r\n     \r\n\r\n  </div>\r\n\r\n  <div class=\"lateral-drch\">\r\n    <app-volver class=\"volver\" (click)='back()'></app-volver>\r\n    <h1>INICIO DE SESI√ìN</h1>\r\n    <form (ngSubmit)=\"onLogin()\">\r\n      <div class=\"inicio_datos\">\r\n        <mat-form-field class=\"input\">\r\n          <mat-label>Email</mat-label>\r\n          <input matInput  placeholder=\"Ej. pat@example.com\" [(ngModel)]=\"email\" name=\"email\" required>\r\n        </mat-form-field>\r\n        \r\n        <br>\r\n\r\n        <mat-form-field class=\"input\" appearance=\"fill\" >\r\n          <mat-label>Introduce tu contrase√±a</mat-label>\r\n          <input matInput [type]=\"hide ? 'password' : 'text'\" [(ngModel)]=\"password\" name=\"password\" required>\r\n          <button mat-icon-button matSuffix (click)=\"hide = !hide\" [attr.aria-label]=\"'Hide password'\" [attr.aria-pressed]=\"hide\" >\r\n            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n      </div>\r\n\r\n\r\n      <div class=\"boton_inicio\">\r\n          <button type=\"submit\" mat-raised-button style=\"width: 200px\" class= \"boton\" [disabled]=\"checkFields()\">\r\n          INICIAR SESI√ìN</button>\r\n          <br><br>\r\n          <p>¬øA√∫n no est√°s registrado? <a href=\"/registro\">Reg√≠strate</a></p>\r\n      </div>\r\n      \r\n    </form>\r\n\r\n      \r\n  </div>\r\n</div>","export interface IPuntuacion {\r\n\r\n    id:string;\r\n    puntuador:string;\r\n    puntuado:string;\r\n    puntuacion:string;\r\n   \r\n}\r\n\r\nexport interface IComentario{\r\n\r\n    id:string;\r\n    comentador:string;\r\n    comentado:string;\r\n    comentario:string;\r\n\r\n}\r\n\r\nexport class Puntuacion implements IPuntuacion{\r\n\r\n    id:string;\r\n    puntuador:string;\r\n    puntuado:string;\r\n    puntuacion:string;\r\n    \r\n\r\n    constructor(o?:IPuntuacion)\r\n    {\r\n        //this.id='';\r\n        if(o !== undefined) Object.assign(this,o);\r\n    }\r\n}\r\n\r\nexport class Comentario implements IComentario{\r\n\r\n    id:string;\r\n    comentador:string;\r\n    comentado:string;\r\n    comentario:string;\r\n\r\n    constructor(o?:IComentario)\r\n    {\r\n        //this.id='';\r\n        if(o !== undefined) Object.assign(this,o);\r\n    }\r\n}\r\n","export interface ISolicitud{\r\n    idUsuario:string;\r\n    idViaje:string;\r\n    idOrganizador:string;\r\n    id:string;\r\n    estado:string;\r\n}\r\n\r\nexport class Solicitud implements ISolicitud\r\n{\r\n    idUsuario:string;\r\n    idViaje:string;\r\n    idOrganizador:string;\r\n    id:string;\r\n    estado:string;\r\n\r\n\r\n    constructor(o?:ISolicitud)\r\n    {\r\n        if(o !== undefined) Object.assign(this,o);\r\n    }\r\n};","export interface IUsuario {\r\n\r\n    id:string;\r\n    email?:string;\r\n    ubicacion?:string;\r\n    descripcion?:string;\r\n    tipo?:string;\r\n    nombre?:string;\r\n    apellidos?:string;\r\n    password?:string;\r\n    estrellas?:string;\r\n    image?:string;\r\n    //los comentarios se buscar√°n con el id del comentado\r\n\r\n}\r\n\r\nexport class Usuario implements IUsuario{\r\n\r\n    id:string;\r\n    email?:string;\r\n    ubicacion?:string;\r\n    descripcion?:string;\r\n    tipo?:string;\r\n    nombre?:string;\r\n    apellidos?:string;\r\n    password?:string;\r\n    estrellas?:string;\r\n    image?:string;\r\n    //los comentarios se buscar√°n con el id del comentado\r\n\r\n\r\n    constructor(o?:IUsuario)\r\n    {\r\n        //this.id='';\r\n        if(o !== undefined) Object.assign(this,o);\r\n    }\r\n}\r\n","\r\nimport { StringMap } from '@angular/compiler/src/compiler_facade_interface';\r\n\r\nexport interface IViaje {\r\n    ciudad:string;\r\n    continente:string;\r\n    descripcion?:string;\r\n    duracion?:string;\r\n    email:string;\r\n    fin?:string;\r\n    id:string;\r\n    img?:string;\r\n    inicio?:string;\r\n    limitePago?:string;\r\n    limiteUnion?:string;\r\n    maximo?:string;\r\n    pais:string;\r\n    precio?:string;\r\n    servicios?:string;\r\n    tlf?:string;\r\n    unidas?:string;\r\n    viajeros?:string; \r\n};\r\n\r\n\r\nexport class Viaje implements IViaje\r\n{\r\n    ciudad:string;\r\n    continente:string;\r\n    descripcion?:string;\r\n    duracion?:string; //Esto se omite\r\n    email:string;\r\n    fin?:string;\r\n    id:string;\r\n    img?:string;\r\n    inicio?:string;\r\n    limitePago?:string;\r\n    limiteUnion?:string;\r\n    maximo?:string;\r\n    pais:string;\r\n    precio?:string;\r\n    servicios?:string;\r\n    tlf?:string;\r\n    unidas?:string;\r\n    viajeros?:string;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    constructor(o?:IViaje)\r\n    {\r\n        //this.id='';\r\n        if(o !== undefined) Object.assign(this,o);\r\n    }\r\n};\r\n\r\n\r\nexport interface ISlides {\r\n\r\n    id:string;\r\n    idViaje:string;\r\n    url:string;\r\n}\r\n\r\nexport class Slides implements ISlides{\r\n\r\n    id:string;\r\n    idViaje:string;\r\n    url:string;\r\n    \r\n\r\n    constructor(o?:ISlides)\r\n    {\r\n        //this.id='';\r\n        if(o !== undefined) Object.assign(this,o);\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-logros',\r\n  templateUrl: './logros.component.html',\r\n  styleUrls: ['./logros.component.scss']\r\n})\r\nexport class LogrosComponent implements OnInit {\r\n\r\n  constructor() { }\r\n  logros = [\r\n    {\r\n      'nombre': 'S√∫per viajero',\r\n      'descripcion': 'Has estado en todos los continentes',\r\n      'img': 'logros/logro1.png',\r\n      'activado': 'no'\r\n    },\r\n    {\r\n      'nombre': 'Viajero amigo',\r\n      'descripcion': 'Has hecho un viaje con m√°s de seis personas',\r\n      'img': 'logros/logro2.png',\r\n      'activado': 'no'\r\n    },\r\n    {\r\n      'nombre': 'Europa',\r\n      'descripcion': 'Has estado en Europa',\r\n      'img': 'logros/logro3.png',\r\n      'activado': 'no'\r\n    },\r\n    {\r\n    'nombre': 'Asia',\r\n      'descripcion': 'Has estado en Asia',\r\n      'img': 'logros/logro4.png',\r\n      'activado': 'no'\r\n    },\r\n    {\r\n    'nombre': '√Åfrica',\r\n      'descripcion': 'Has estado en √Åfrica',\r\n      'img': 'logros/logro5.png',\r\n      'activado': 'no'\r\n    },\r\n    {\r\n    'nombre': 'Ocean√≠a',\r\n      'descripcion': 'Has estado en Ocean√≠a',\r\n      'img': 'logros/logro6.png',\r\n      'activado': 'no'\r\n    },\r\n    {\r\n    'nombre': 'Am√©rica del Norte',\r\n      'descripcion': 'Has estado en Am√©rica del Norte',\r\n      'img': 'logros/logro7.png',\r\n      'activado': 'no'\r\n    },\r\n    {\r\n    'nombre': 'Am√©rica del Sur',\r\n      'descripcion': 'Has estado en Am√©rica del Sur',\r\n      'img': 'logros/logro8.png',\r\n      'activado': 'no'\r\n    },\r\n    {\r\n    'nombre': 'Am√©rica Central',\r\n      'descripcion': 'Has estado en Am√©rica Central',\r\n      'img': 'logros/logro9.png',\r\n      'activado': 'no'\r\n    },\r\n  ]\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<app-header titulo=\"Tus logros\"></app-header>\r\n<div class=\"contenido\">\r\n    <div class=\"logro\" *ngFor=\"let logro of logros\">\r\n        <div class =\"info\" class=\"activa\">\r\n            <img  src=\"./assets/{{logro['img']}}\">\r\n            <p id=\"titulo\">{{logro[\"nombre\"]}}</p>\r\n            <p id=\"descripci√≥n\">{{logro[\"descripcion\"]}}</p>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-not-found404',\r\n  templateUrl: './not-found404.component.html',\r\n  styleUrls: ['./not-found404.component.scss']\r\n})\r\nexport class NotFound404Component implements OnInit {\r\n  @Input() public titulo:string = \"Parece que no hay nada por aqu√≠\";\r\n  \r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","\r\n\r\n<div class=\"mensaje\"><img src=\"./assets/warning.png\"><p>{{titulo}}</p></div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-page1',\r\n  templateUrl: './page1.component.html',\r\n  styleUrls: ['./page1.component.scss']\r\n})\r\nexport class Page1Component implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"contenedor\">\r\n    <div class=\"lateral-izq\">\r\n        \r\n        <img src='./assets/tripmefy.png'>\r\n       \r\n\r\n    </div>\r\n\r\n    <div class=\"lateral-drch\">\r\n\r\n        <div class=\"boton_inicio\">\r\n            <button [routerLink]=\"['/inicio-sesion']\" mat-raised-button  style=\"width: 200px;\" class= \"boton\" > <a >INICIAR SESI√ìN</a></button>\r\n        </div>\r\n        <div class=\"boton_registro\">\r\n            <button [routerLink]=\"['/registro']\" mat-raised-button style=\"width: 200px\" class= \"boton\" >\r\n            <a >REGISTRO</a></button>\r\n        </div>\r\n\r\n        \r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Input, OnDestroy, ElementRef, ViewChild, NgZone} from '@angular/core';\r\nimport { ActivatedRoute }  from '@angular/router';\r\nimport {Router} from '@angular/router';\r\nimport {UsuarioFirestoreService} from '../../services/firestore/usuario-firestore.service';\r\nimport {OpinionesFirestoreService} from '../../services/firestore/opiniones-firestore.service';\r\nimport {FirestoreService} from '../../services/firestore/firestore.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {Viaje, IViaje} from '../../interfaces/viaje';\r\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\n\r\nimport { Usuario, IUsuario } from 'src/app/interfaces/usuario';\r\nimport {IPuntuacion, Puntuacion, IComentario, Comentario} from '../../interfaces/opiniones'\r\n\r\n@Component({\r\n  selector: 'app-perfil-organizador',\r\n  templateUrl: './perfil-organizador.component.html',\r\n  styleUrls: ['./perfil-organizador.component.scss']\r\n})\r\nexport class PerfilOrganizadorComponent implements OnInit, OnDestroy {\r\n\r\n \r\n\r\n  public links: string[];\r\n\r\n  @ViewChild('descripcion') newDescripcion;\r\n  @ViewChild('imageUser') inputImageUser;\r\n  uploadPercent: Observable<number>;\r\n  urlImage: Observable<string>;\r\n  myUrl = \"\";\r\n  descripcion:string = \"\";\r\n  titulo = \"ORGANIZADOR\";\r\n\r\n  /****usuario****/\r\n  public usuarios:Usuario[];\r\n  public s_usuarios:Subscription;\r\n  usuario:Usuario;\r\n\r\n  /**viajes **/\r\n  actualLink:string;\r\n  public susViajes = [\r\n  \r\n  ];\r\n  //almacena los id\r\n\r\n  public slides = [\r\n    { src: \"../../../assets/noViajes.png\"},\r\n    \r\n  ];//almacena las imagenes en el formato del carrusel\r\n  \r\n\r\n  /****estrellas****/\r\n  //es necesario recargar para ver la actualizaci√≥n de las estrellas porque hay que hacer la media con el resto\r\n  stars:number = 4;    //Stars of the user\r\n  Arr = Array;         //Array to print elements\r\n  maxStars:number = 5; //Maximum of stars\r\n  emptystars:number = this.maxStars - this.stars;\r\n \r\n\r\n  /****comentarios****/\r\n  //no es necesario recargar para ver la actualizaci√≥n porque solo hay que a√±adir\r\n  comentarios = []; //se rellena como un diccionario con los datos de un comentario:\r\n  //id comentador, comentario, foto comentador, nombre comentador\r\n\r\n  tuplasComentario = [];//0:id del comentador, 1:comentario, 3: true si a√±adir, false si a√±adido\r\n\r\n  /****ediciones ****/\r\n  nuevaFoto = \"\";\r\n  nuevaDescripcion = \"\";\r\n\r\n  //****permisos****/\r\n  permisoOpinar = false; //si el usuario tiene permiso para opinar es true\r\n  permisoEditar = false; //si el usuario tiene permiso para editar es true\r\n  \r\n\r\n\r\n  reload(){\r\n    window.location.reload();\r\n    window.scrollTo(0,0);\r\n  }\r\n //es necesario activar las opiniones si se quiere comentar y puntuar\r\n  activarOpiniones(){\r\n    this.permisoOpinar = true;\r\n  }\r\n  //es necesario activar la edici√≥n si se quiere editar la descripci√≥n o la foto de perfil\r\n  activarEdicion(visitanteId:string){\r\n    this.permisoEditar = true;\r\n  }\r\n\r\n  //activa el bot√≥n de comentarios, es llamada cuando el usuario propietario es distinto del usuario\r\n  //que accede\r\n  puntuar(){\r\n    document.getElementById(\"puntuar\").style.display=\"block\";\r\n  }\r\n\r\n  //resultante del evento cerrar de los componentes pu\r\n  cerrar(cerrado, id){\r\n    if (cerrado == true){\r\n      document.getElementById(id).style.display=\"none\";\r\n    }\r\n  }\r\n\r\n  //resultante del evento puntuacion del componente hijo puntuacion-pu\r\n  newPuntuacion(puntos){\r\n    if(puntos > -1){\r\n      var puntuacion:Puntuacion = new Puntuacion();\r\n      puntuacion.puntuacion = puntos.toString();\r\n      puntuacion.puntuador = localStorage.getItem('usuario');\r\n      puntuacion.puntuado = this._route.snapshot.paramMap.get('id'); \r\n      this.firestoreServiceOpiniones.createPuntuacion(puntuacion);\r\n      document.getElementById(\"graciasP\").style.display=\"block\";\r\n    }document.getElementById(\"puntuar\").style.display=\"none\";\r\n    \r\n   \r\n  }\r\n\r\n  //resultante del evento puntuacion del comentario hijo comentario-pu\r\n  newComentario(comment){\r\n    if(comment != \"\"){\r\n      var comentario:Comentario = new Comentario();\r\n      comentario.comentario = comment;\r\n      comentario.comentador = localStorage.getItem('usuario');\r\n      comentario.comentado = this._route.snapshot.paramMap.get('id');\r\n      this.firestoreServiceOpiniones.createComentario(comentario);\r\n      document.getElementById(\"graciasC\").style.display=\"block\";\r\n    }document.getElementById(\"comentar\").style.display=\"none\";\r\n   \r\n  }\r\n\r\n  //activa el bot√≥n de comentarios, es llamada cuando el usuario propietario es distinto del usuario\r\n  //que accede\r\n  comentar(){\r\n    document.getElementById(\"comentar\").style.display=\"block\";\r\n  }\r\n  \r\n  //activa el bot√≥n de comentarios, es llamada cuando el usuario propietario es el mismo que el usuario\r\n  //que accede\r\n  editar(){\r\n    document.getElementById(\"editar\").style.display=\"block\";\r\n  }\r\n\r\n  //resultante del evento foto del componente edicion-p\r\n  \r\n  setFoto(foto){\r\n    this.nuevaFoto = foto;\r\n    if(this.nuevaFoto != \"\" && this.nuevaFoto != undefined){\r\n      this.usuario.image = foto;\r\n      \r\n    }\r\n    \r\n  }\r\n  //resultante del evento newDescripcion del componente edicion-p\r\n  setDescripcion(desc){\r\n    this.nuevaDescripcion = desc;\r\n    if(this.nuevaDescripcion != \"\" && this.nuevaDescripcion != undefined){\r\n      this.usuario.descripcion = desc;\r\n      \r\n    }\r\n  }\r\n  \r\n //resultante del evento signal del componente edicion-pu\r\n \r\n  uploadUser(signal){\r\n    \r\n      \r\n    \r\n    if(this.nuevaFoto != \"\" && this.nuevaFoto != undefined){\r\n      //alert(this.nuevaFoto);\r\n      \r\n      this.usuario.image = this.nuevaFoto;\r\n\r\n     \r\n    \r\n    }\r\n    if(this.nuevaDescripcion != \"\" && this.nuevaDescripcion != undefined){\r\n      //alert(this.nuevaDescripcion);\r\n      this.usuario.descripcion = this.nuevaDescripcion;\r\n     \r\n      \r\n    }\r\n\r\n    //es necesario crear un objeto para que el set funcione\r\n\r\n    var actualizar = {\r\n      \"id\": this.usuario.id,\r\n      \"email\": this.usuario.email,\r\n      \"ubicacion\": this.usuario.ubicacion,\r\n      \"descripcion\": this.usuario.descripcion,\r\n      \"tipo\": this.usuario.tipo,\r\n      \"nombre\": this.usuario.nombre,\r\n      \"apellidos\": this.usuario.apellidos,\r\n      \"password\": this.usuario.password,\r\n      \"estrellas\": this.usuario.estrellas,\r\n      \"image\": this.usuario.image,\r\n    }\r\n    \r\n    this.firestoreServiceUser.updateUsuario(actualizar);\r\n    document.getElementById(\"editOk\").style.display=\"block\";\r\n  \r\n    return true;\r\n    \r\n  }\r\n  \r\n\r\n  private db:AngularFirestore;\r\n  constructor(private _route:ActivatedRoute,\r\n              private _router: Router,\r\n              private storage: AngularFireStorage,\r\n              private firestoreServiceUser: UsuarioFirestoreService,\r\n              private firestoreServiceViaje: FirestoreService,\r\n              private firestoreServiceOpiniones: OpinionesFirestoreService,\r\n              private _activatedRoute: ActivatedRoute,\r\n              private zone: NgZone\r\n              ) {\r\n                this.usuarios = [];\r\n                this.usuario = new Usuario();\r\n                \r\n                \r\n               }\r\n\r\n  ngOnInit(): void {\r\n\r\n    \r\n\r\n    \r\n    \r\n\r\n    var visitanteId = localStorage.getItem('usuario'); //hace referencia al usuario que est√° navegando \r\n    var userId = this._route.snapshot.paramMap.get('id'); //hace referencia al usuario propietario del perfil\r\n\r\n    if(visitanteId == \"null\"){\r\n      var origin = window.location.origin + '/'; \r\n      var destino = origin + \"page1\";\r\n      window.location.assign(destino);\r\n    }\r\n\r\n    //utilizo la subscripci√≥n a activatedRoute para que se actualice el pefil de haber cambios en la ruta\r\n    this._activatedRoute.paramMap.subscribe((params) => {\r\n      userId = params['id'];\r\n        //this.reload();\r\n      if(userId == undefined){\r\n        userId = this._route.snapshot.paramMap.get('id'); //hace referencia al usuario propietario del perfil;\r\n      }\r\n      window.scrollTo(0,0); \r\n\r\n        var usuarioAux = this.firestoreServiceUser.getUsuario(userId).then((elem) => {\r\n\r\n          /**Se obtiene el usuario propietario del perfil con su id (userId) y se pone el atributo usuario \r\n           * con los valores correspondientes.\r\n           * Para eso nos apoyamos de una variable auxiliar usuarioAux, definida como Usuario. Elem ser√° el \r\n           * valor devuelto por la funci√≥n getUsuario del servicio firestoreServiceUser\r\n           */\r\n          var usuarioAux:Usuario = new Usuario();\r\n          usuarioAux.id = elem.id;\r\n          usuarioAux.email = elem.email;\r\n          usuarioAux.ubicacion = elem.ubicacion;\r\n          usuarioAux.descripcion = elem.descripcion;\r\n          this.descripcion = elem.descripcion;\r\n          usuarioAux.tipo = elem.tipo;\r\n          usuarioAux.nombre = elem.nombre;\r\n          usuarioAux.apellidos = elem.apellidos;\r\n          usuarioAux.password = elem.password;\r\n          usuarioAux.estrellas = elem.estrellas;\r\n          usuarioAux.image = elem.image;\r\n\r\n          this.usuario = usuarioAux; \r\n\r\n          this.firestoreServiceOpiniones.getPuntuacionesFiltered(this.usuario.id).subscribe(res=>{\r\n            /**Se realiza el proceso de obtenci√≥n de puntuaciones. Para ello se buscan todas aquellas\r\n             * puntuaciones que tengan como valor \"puntuado\" el id del usuario obtenido anteriormente.\r\n             * Esto se hace mediante el  m√©todo getPuntuacionesFiltered del servicio firestoreServiceOpiniones,\r\n             * que filtra opiniones por el id del usuario puntuado.\r\n             * \r\n             * La variable res ser√° un array que contendr√° todas las puntuaciones que tengan como \r\n             * puntuado al usuario propietario del perfil.\r\n             * \r\n             * Si no hay puntuaciones, el n√∫mero de estrellas llenas (stars) ser√° cero, y el de vac√≠as el \r\n             * m√°ximo. Como no se modifica el par√°metro 'estrellas' del usuario propietario del perfil (queda\r\n             * a -1) se escribir√° un mensaje \"este usuario no tiene puntuaciones a√∫n\"\r\n             * \r\n             * Si hay puntuaciones se recorre el array res con un for, se acumulan los valores de dichas \r\n             * puntuaciones (atributo puntuaci√≥n). Finalmente se divide entre el n√∫mero de puntuaciones\r\n             * (el size de res) para obtener la media. Esta media ser√° el n√∫mero de estrellas a rellenar,\r\n             * mientras que las estrellas vac√≠as ser√°n la resta del m√°ximo de estrellas (se ha establecido 5)\r\n             * y las estrellas llenas. Es importante notar que el atributo \"estrellas\" del usuario propietario\r\n             * del perfil cambia a 0, por lo que ya no aparecer√° el mensaje de \"este usuario no tiene \r\n             * puntuaciones\"\r\n             * \r\n             * Para finalizar, se realiza un update del atributo usuario, de forma que la vista muestre los \r\n             * resultados obtenidos\r\n             */\r\n            \r\n\r\n            if (res.length <= 0){\r\n              this.stars = 0;\r\n              this.emptystars = this.maxStars;\r\n            }else{\r\n              var i;\r\n              var media = 0;\r\n              for (i = 0; i<res.length; i++){\r\n                media = media + parseInt(res[i].puntuacion);\r\n                \r\n              }\r\n              media = Math.round(media/res.length); //es necesario redondear, no podemos rellenar media estrella\r\n              this.stars = media;\r\n              this.emptystars = this.maxStars - media;\r\n              //de esta forma, en el html ya no aparecer√° el comentario de 'no hay puntuaciones'\r\n              this.usuario.estrellas = \"0\";\r\n              \r\n              //se requiere una variable auxiliar para que no salte el error DocumentReference.set() al llamar\r\n              //a updateUsuario\r\n              \r\n              var actualizar = \r\n                {\r\n                  \"id\": this.usuario.id,\r\n                  \"email\": this.usuario.email,\r\n                  \"ubicacion\": this.usuario.ubicacion,\r\n                  \"descripcion\": this.usuario.descripcion,\r\n                  \"tipo\": this.usuario.tipo,\r\n                  \"nombre\": this.usuario.nombre,\r\n                  \"apellidos\": this.usuario.apellidos,\r\n                  \"password\": this.usuario.password,\r\n                  \"estrellas\": this.usuario.estrellas,\r\n                  \"image\": this.usuario.image\r\n                }\r\n              \r\n              \r\n              \r\n\r\n              this.firestoreServiceUser.updateUsuario(actualizar);\r\n            }\r\n          });\r\n\r\n          this.firestoreServiceOpiniones.getComentariosFiltered(this.usuario.id).subscribe(res=>{\r\n            /**Se obtienen los comentarios que tienen como atributo \"comentado\" al usuario propietario\r\n             * del perfil. Para ello se emplea el m√©todo getComentariosFiltered del servicio \r\n             * firestoreServiceOpiniones, que filtra los comentarios por el id del comentado.\r\n             * \r\n             * Guardamos los comentarios en un diccionario, definido arriba como atributo,\r\n             * que tendr√° los siguientes par√°metros:\r\n             * id del comentador, foto del comentador (photo), nombre del comentador (person) y comentario\r\n             * (comment)\r\n             * \r\n             * Una vez tenemos el comentario, habiendo usado la funci√≥n getComentariosFiltered, podemos usar\r\n             * el id del comentador para obtener sus datos desde la tabla Usuario. Para ello empleamos\r\n             * el m√©todo getUsuario del servicio firestoreServiceUser, donde elem ser√° el usuario coincidente\r\n             * con el id del comentador\r\n             * \r\n             * Es importante notar que la obtenci√≥n del comentario y la obtenci√≥n del usuario se hacen en \r\n             * espacios temporales diferentes. Es por ello que los comentarios se almacenan junto con el id\r\n             * del comentador en un array auxiliar de tuplas <comentario, idComentador>. Cuando se han metido\r\n             * todos los comentadores en el diccionario, se emplea la informaci√≥n del array auxiliar para\r\n             * meter tambi√©n los comentarios.\r\n             * \r\n             * Las comprobaciones hechas al meter un comentario en el diccionario permiten que:\r\n             *  -Un usuario pueda hacer varios comentarios\r\n             *  -Todas las entradas del diccionario tengan un comentario\r\n             */\r\n            this.comentarios = [];\r\n            var i;\r\n            for (i = 0; i<res.length ; i++){\r\n              this.comentarios.push({\r\n                    \"id\":\"\",\r\n                    \"photo\": \"\",\r\n                    \"person\": \"\",\r\n                    \"comment\": \"\",\r\n                    \"tipo-url\": \"\"\r\n              },)\r\n            \r\n            \r\n            }\r\n            var comment;\r\n            var img;\r\n            var nombre;\r\n            var idUser;\r\n            var tipo;\r\n            for (i = 0; i<res.length ; i++){\r\n              comment = res[i].comentario;\r\n              this.tuplasComentario.push([comment, res[i].comentador, true]);\r\n            \r\n              var contador = 0;\r\n              var usuarioAux = this.firestoreServiceUser.getUsuario(res[i].comentador).then((elem) => {\r\n                \r\n                img = elem.image;\r\n                this.comentarios[contador][\"photo\"] = img;\r\n                \r\n                nombre = elem.nombre;\r\n                this.comentarios[contador][\"person\"] = nombre;\r\n          \r\n                idUser = elem.id;\r\n                this.comentarios[contador][\"id\"] = idUser;\r\n\r\n                tipo = elem.tipo;\r\n                \r\n                if(tipo == 'organizador'){\r\n                  this.comentarios[contador][\"tipo-url\"] = '/perfil-organizador/';\r\n                }else{\r\n                  this.comentarios[contador][\"tipo-url\"] = '/perfil-viajero/';\r\n                }\r\n                var n;\r\n                for (n = 0; n<this.tuplasComentario.length ; n ++){\r\n                  if (this.tuplasComentario[n][1] == this.comentarios[contador][\"id\"] &&  this.comentarios[contador][\"comment\"] == \"\" && this.tuplasComentario[n][2] ){\r\n                    this.comentarios[contador][\"comment\"] = this.tuplasComentario[n][0];\r\n                    this.tuplasComentario[n][2] = false;\r\n                    \r\n                  }\r\n                }\r\n\r\n              contador = contador + 1 ;\r\n              });\r\n            }\r\n            \r\n          })\r\n\r\n          /**Se obtienen los viajes organizados por el usuario propietario del perfil. Para ello se emplea\r\n           * el m√©todo getViajesByEmail, del servicio firestoreServiceViaje, que filtra los viajes por\r\n           * el email del organizador. La variable res ser√≠a un array con los viajes del organizador. Para\r\n           * introducirlos, se hace push sobre el atributo slides, que se emplea en el carrusel de la vista.\r\n           * Adem√°s se recoge el id del viaje, con la intenci√≥n de hacer un LinkedLink.\r\n           * \r\n           * De no haber viajes, aparecer√° una imagen que indica que no hay viajes\r\n           */\r\n\r\n          this.firestoreServiceViaje.getViajesByEmail(this.usuario.email).subscribe(res=>{\r\n              if(res.length>0){\r\n                this.susViajes = [];\r\n                this.slides = []; //esto es para que no aparezca la imagen de no hay viajes si hay viajes\r\n                var i;\r\n                for (i = 0; i<res.length ; i++){\r\n                  this.slides.push({src: res[i].img});\r\n                  this.susViajes.push(['viaje', res[i].id]);\r\n                }\r\n              }else{\r\n                this.slides = [\r\n                  { src: \"../../../assets/noViajes.png\"},\r\n                  \r\n                ];\r\n                \r\n              }\r\n                \r\n          })\r\n          \r\n        \r\n          \r\n        }  \r\n        );\r\n    })\r\n    /**Deben establecerse los permisos de opini√≥n y edici√≥n. Para ello comprobamos los id del usuario\r\n     * propietario del perfil y el visitante\r\n    */\r\n    if (userId != visitanteId){\r\n      this.activarOpiniones(); //si el usuario est√° visitando un perfil distinto del suyo, puede comentar y puntuar\r\n    }else{\r\n      this.titulo = \"TU PERFIL\";\r\n      this.activarEdicion(visitanteId); //si el usuario est√° visitando su perfil, puede editarlo\r\n    }\r\n\r\n    \r\n\r\n\r\n    \r\n\r\n    \r\n   \r\n\r\n    \r\n\r\n\r\n  }\r\n\r\n  \r\n  ngOnDestroy()\r\n  {\r\n    //this.s_usuarios.unsubscribe();\r\n  }\r\n\r\n\r\n}\r\n","<app-header titulo=\"{{titulo}}\"></app-header>\r\n\r\n<app-puntuacion-pu id = \"puntuar\" (cerrado)=\"cerrar($event, 'puntuar' )\" (puntuacion)=\"newPuntuacion($event)\" ></app-puntuacion-pu>\r\n<app-comentario-pu id = \"comentar\" (cerrado)=\"cerrar($event, 'comentar')\" (comentario)=\"newComentario($event)\" ></app-comentario-pu>\r\n<app-edicion-pu id = \"editar\" user=\"usuario\" descripcion=\"{{descripcion}}\" (cerrado)=\"cerrar($event, 'editar')\" (newDescripcion)=\"setDescripcion($event)\" (foto)=\"setFoto($event)\" (signal)=\"uploadUser($event)\" ></app-edicion-pu>\r\n<app-mensaje id=\"graciasC\" mensaje=\"¬° Gracias por comentar !\" imagen=\"../../../assets/comment.png\" (cerrado)=\"cerrar($event, 'graciasC')\"></app-mensaje>   \r\n<app-mensaje id=\"graciasP\" mensaje=\"¬° Gracias por puntuar !\" imagen=\"../../../assets/ok.png\" (cerrado)=\"cerrar($event, 'graciasP')\"></app-mensaje> \r\n<app-mensaje id=\"editOk\" mensaje=\"¬° Has modificado tu perfil !\"  imagen=\"../../../assets/usuario.png\" (cerrado)=\"cerrar($event, 'editOk')\"></app-mensaje> \r\n<div id=\"general\">\r\n   <!-- DATOS -->\r\n   <div id=\"div1\">\r\n      <div id=\"tarjeta\">\r\n         <mat-card>\r\n         <mat-card-content>   \r\n            <div class=\"little_container_izq\">\r\n               \r\n               <span class=\"name\">{{usuario.nombre}}</span>\r\n               <img (click)=\"editar()\" id=\"img-editar\" src=\"./assets/engranaje.png\" *ngIf=\"permisoEditar\"> \r\n\r\n               <div>\r\n                  <span class=\"texto_perfil\">{{usuario.ubicacion}}</span>\r\n                  <img src=\"./assets/location.png\" style=\"height: 7%; width: 7%;\" >\r\n               </div>\r\n            </div>\r\n            <div class=\"little_container_der\">\r\n               <img *ngIf=\"usuario.image != ''\" src=\"{{usuario.image}}\" style=\"display: inline-block; max-width: 200px; max-height: 200px; \" >\r\n               <img *ngIf=\"usuario.image == ''\" src=\"./assets/usuario.png\" style=\"display: inline-block; max-width: 100px; max-height: 100px; \">\r\n            </div>\r\n            \r\n            \r\n         </mat-card-content>\r\n         </mat-card> \r\n      </div>\r\n      \r\n   </div>\r\n   <div id=\"div2\">\r\n      <p class=\"texto\" id=\"myDescripcion\">\r\n      {{usuario.descripcion}}\r\n      </p>\r\n\r\n      \r\n   </div>\r\n   <div id=\"div3\">\r\n      <div id=\"opinions\">\r\n         <img src=\"./assets/plan.png\" style=\"height: 5%; width: 5%; vertical-align: middle; margin-right: 2%\">\r\n         <span class=\"bold_text\">{{usuario.tipo}}</span>\r\n         <br>\r\n         <br>\r\n         <!-- STARS -->\r\n         <p *ngIf=\"usuario.estrellas == '-1'\"> Este usuario no tiene valoraciones a√∫n </p>\r\n         <div class=\"stars\">\r\n            <span *ngFor=\"let i of Arr(stars).fill(1)\" >\r\n               <img src=\"./assets/star.png\" class=\"llena\" style=\"height: 5%; width: 5%; vertical-align: middle; margin-right: 2%\">\r\n            </span>  \r\n            <span *ngFor=\"let i of Arr(emptystars).fill(1)\" >\r\n               <img src=\"./assets/empty_star.png\" class=\"vacia\" style=\"height: 5%; width: 5%; vertical-align: middle; margin-right: 2%;\">    \r\n            </span> \r\n            <app-boton *ngIf=\"permisoOpinar\" texto=\"Puntua a este usuario\" (click)=\"puntuar()\"></app-boton>\r\n         </div>\r\n         <!--OPINIONES-->\r\n         <div class=\"titulo-opinion\">\r\n            <span class=\"name comentarios_usuario\">Los usuarios opinaron:</span>\r\n            <img src=\"./assets/comentario.png\" *ngIf=\"permisoOpinar\" (click)=\"comentar()\">\r\n         </div>\r\n         <div class=\"comment\" *ngFor=\"let comment of comentarios\">\r\n              <div class=\"comment-division-1\">               \r\n                  <img src= '{{ comment[\"photo\"] }}' [routerLink]=\"[comment['tipo-url'], comment['id'] ]\"  style=\"height: 100%; width: 100%; vertical-align: middle; display: inline-block; \">            \r\n               </div>\r\n         \r\n               <div class=\"comment-division-2\">\r\n                  <p class=\"bold_text\" style=\"display: inline-block;\">{{ comment[\"person\"]}}</p>   \r\n                  <p>{{ comment[\"comment\"] }}</p> \r\n               </div>             \r\n         </div> \r\n\r\n      </div>\r\n      \r\n   </div>\r\n   <!--PAQUETES-->\r\n   <div id=\"div4\">\r\n      <span class=\"name viajes_usuario\">Paquetes ofrecidos</span>\r\n      <div class=\"container_carousel1\">\r\n         <carousel [slides]=\"slides\" [links]=\"susViajes\"></carousel>\r\n      </div>\r\n   </div>\r\n</div>\r\n\r\n\r\n\r\n<!--\r\n\r\n<div class=\"main_container_izq\">\r\n   <mat-card>\r\n      <mat-card-content>\r\n         \r\n         <div class=\"little_container_izq\">\r\n            <span class=\"name\">Alejandro Chamorro</span>\r\n            <div>\r\n               <span class=\"texto_perfil\">Hombre</span>\r\n               <img src=\"../../../assets/person.png\" style=\"height: 7%; width: 7%;\">\r\n               IF AQUI ENTRE ICONO HOMBRE/MUJER\r\n            </div>\r\n            <div>\r\n               <span class=\"texto_perfil\">27 a√±os</span>\r\n            </div>\r\n            <div>\r\n               <span class=\"texto_perfil\">Salamanca, Espa√±a</span>\r\n               <img src=\"../../../assets/location.png\" style=\"height: 7%; width: 7%;\" >\r\n            </div>\r\n         </div>\r\n         <div class=\"little_container_der\">\r\n            <img src=\"../../../assets/person-2.jpg\" style=\"display: inline-block; width: 100%; max-height: 300px; \" >\r\n         </div>\r\n         \r\n         \r\n      </mat-card-content>\r\n   </mat-card> \r\n   \r\n\r\n</div>\r\n\r\n<div class=\"main_container_der\">\r\n     \r\n      <p class=\"texto\">\r\n      Lorem ipsum dolor sit amet consectetur adipisicing elit. Assumenda vitae iusto non magnam inventore amet sapiente earum minima cum \r\n      quam fuga voluptatem quae ab sequi quia cupiditate nesciunt, voluptate architecto.\r\n      Lorem ipsum dolor sit amet consectetur adipisicing elit. Assumenda vitae iusto non magnam inventore amet sapiente earum minima cum \r\n      quam fuga voluptatem quae ab sequi quia cupiditate nesciunt, voluptate architecto.\r\n      Lorem ipsum dolor sit amet consectetur adipisicing elit. Assumenda vitae iusto non magnam inventore amet sapiente earum minima cum \r\n      quam fuga voluptatem quae ab sequi quia cupiditate nesciunt, voluptate architecto.\r\n      </p>\r\n\r\n      <span class=\"name\">Viajes del usuario</span>\r\n      <div class=\"container_carousel1\">\r\n         <carousel [slides]=\"slides\"></carousel>\r\n      </div>\r\n  \r\n  \r\n</div>\r\n\r\n-->\r\n\r\n<!--\r\n<span style=\"display: inline-block;\">hjfdekfjksj</span>\r\n<img src=\"../../../assets/person-1.jpg\" style=\"display: inline-block; width: 50%; height: 50%;\" >\r\n-->","import { Component, OnInit, Input, OnDestroy, ElementRef, ViewChild, NgZone} from '@angular/core';\r\nimport { ActivatedRoute }  from '@angular/router';\r\nimport {Router} from '@angular/router';\r\nimport {UsuarioFirestoreService} from '../../services/firestore/usuario-firestore.service';\r\nimport {SolicitudFirestoreService} from '../../services/firestore/solicitud-firestore.service';\r\nimport {OpinionesFirestoreService} from '../../services/firestore/opiniones-firestore.service';\r\nimport {FirestoreService} from '../../services/firestore/firestore.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {Viaje, IViaje} from '../../interfaces/viaje';\r\nimport {Solicitud, ISolicitud} from '../../interfaces/solicitud';\r\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\n\r\nimport { Usuario, IUsuario } from 'src/app/interfaces/usuario';\r\nimport {IPuntuacion, Puntuacion, IComentario, Comentario} from '../../interfaces/opiniones'\r\n\r\n@Component({\r\n  selector: 'app-perfil-viajero',\r\n  templateUrl: './perfil-viajero.component.html',\r\n  styleUrls: ['./perfil-viajero.component.scss']\r\n})\r\nexport class PerfilViajeroComponent implements OnInit, OnDestroy {\r\n\r\n\r\n\r\n  public links: string[];\r\n\r\n  @ViewChild('descripcion') newDescripcion;\r\n  @ViewChild('imageUser') inputImageUser;\r\n  uploadPercent: Observable<number>;\r\n  urlImage: Observable<string>;\r\n  myUrl = \"\";\r\n  descripcion:string = \"\";\r\n  titulo = \"VIAJERO\";\r\n\r\n  /****usuario****/\r\n  public usuarios:Usuario[];\r\n  public s_usuarios:Subscription;\r\n  usuario:Usuario;\r\n\r\n  /**viajes **/\r\n  actualLink:string;\r\n  public susViajesId = [\r\n\r\n  ];\r\n  public susViajes = [\r\n\r\n  ];\r\n  //almacena los id\r\n\r\n  public slides = [\r\n    { src: \"../../../assets/noViajes.png\"},\r\n\r\n  ];//almacena las imagenes en el formato del carrusel\r\n\r\n\r\n  /****estrellas****/\r\n  //es necesario recargar para ver la actualizaci√≥n de las estrellas porque hay que hacer la media con el resto\r\n  stars:number = 4;    //Stars of the user\r\n  Arr = Array;         //Array to print elements\r\n  maxStars:number = 5; //Maximum of stars\r\n  emptystars:number = this.maxStars - this.stars;\r\n\r\n\r\n  /****comentarios****/\r\n  //no es necesario recargar para ver la actualizaci√≥n porque solo hay que a√±adir\r\n  comentarios = []; //se rellena como un diccionario con los datos de un comentario:\r\n  //id comentador, comentario, foto comentador, nombre comentador\r\n\r\n  tuplasComentario = [];//0:id del comentador, 1:comentario, 3: true si a√±adir, false si a√±adido\r\n\r\n  /****ediciones ****/\r\n  nuevaFoto = \"\";\r\n  nuevaDescripcion = \"\";\r\n\r\n  //****permisos****/\r\n  permisoOpinar = false; //si el usuario tiene permiso para opinar es true\r\n  permisoEditar = false; //si el usuario tiene permiso para editar es true\r\n\r\n\r\n\r\n  reload(){\r\n    window.location.reload();\r\n    window.scrollTo(0,0);\r\n  }\r\n //es necesario activar las opiniones si se quiere comentar y puntuar\r\n  activarOpiniones(){\r\n    this.permisoOpinar = true;\r\n  }\r\n  //es necesario activar la edici√≥n si se quiere editar la descripci√≥n o la foto de perfil\r\n  activarEdicion(visitanteId:string){\r\n    this.permisoEditar = true;\r\n  }\r\n\r\n  //activa el bot√≥n de comentarios, es llamada cuando el usuario propietario es distinto del usuario\r\n  //que accede\r\n  puntuar(){\r\n    document.getElementById(\"puntuar\").style.display=\"block\";\r\n  }\r\n\r\n  //resultante del evento cerrar de los componentes pu\r\n  cerrar(cerrado, id){\r\n    if (cerrado == true){\r\n      document.getElementById(id).style.display=\"none\";\r\n    }\r\n  }\r\n\r\n  //resultante del evento puntuacion del componente hijo puntuacion-pu\r\n  newPuntuacion(puntos){\r\n    if(puntos > -1){\r\n      var puntuacion:Puntuacion = new Puntuacion();\r\n      puntuacion.puntuacion = puntos.toString();\r\n      puntuacion.puntuador = localStorage.getItem('usuario');\r\n      puntuacion.puntuado = this._route.snapshot.paramMap.get('id');\r\n      this.firestoreServiceOpiniones.createPuntuacion(puntuacion);\r\n      document.getElementById(\"graciasP\").style.display=\"block\";\r\n    }document.getElementById(\"puntuar\").style.display=\"none\";\r\n\r\n\r\n  }\r\n\r\n  //resultante del evento puntuacion del comentario hijo comentario-pu\r\n  newComentario(comment){\r\n    if(comment != \"\"){\r\n      var comentario:Comentario = new Comentario();\r\n      comentario.comentario = comment;\r\n      comentario.comentador = localStorage.getItem('usuario');\r\n      comentario.comentado = this._route.snapshot.paramMap.get('id');\r\n      this.firestoreServiceOpiniones.createComentario(comentario);\r\n      document.getElementById(\"graciasC\").style.display=\"block\";\r\n    }document.getElementById(\"comentar\").style.display=\"none\";\r\n\r\n  }\r\n\r\n  //activa el bot√≥n de comentarios, es llamada cuando el usuario propietario es distinto del usuario\r\n  //que accede\r\n  comentar(){\r\n    document.getElementById(\"comentar\").style.display=\"block\";\r\n  }\r\n\r\n  //activa el bot√≥n de comentarios, es llamada cuando el usuario propietario es el mismo que el usuario\r\n  //que accede\r\n  editar(){\r\n    document.getElementById(\"editar\").style.display=\"block\";\r\n  }\r\n\r\n  //resultante del evento foto del componente edicion-p\r\n\r\n  setFoto(foto){\r\n    this.nuevaFoto = foto;\r\n    if(this.nuevaFoto != \"\" && this.nuevaFoto != undefined){\r\n      this.usuario.image = foto;\r\n\r\n    }\r\n\r\n  }\r\n  //resultante del evento newDescripcion del componente edicion-p\r\n  setDescripcion(desc){\r\n    this.nuevaDescripcion = desc;\r\n    if(this.nuevaDescripcion != \"\" && this.nuevaDescripcion != undefined){\r\n      this.usuario.descripcion = desc;\r\n\r\n    }\r\n  }\r\n\r\n //resultante del evento signal del componente edicion-pu\r\n\r\n  uploadUser(signal){\r\n\r\n\r\n\r\n    if(this.nuevaFoto != \"\" && this.nuevaFoto != undefined){\r\n      //alert(this.nuevaFoto);\r\n\r\n      this.usuario.image = this.nuevaFoto;\r\n\r\n\r\n\r\n    }\r\n    if(this.nuevaDescripcion != \"\" && this.nuevaDescripcion != undefined){\r\n      //alert(this.nuevaDescripcion);\r\n      this.usuario.descripcion = this.nuevaDescripcion;\r\n\r\n\r\n    }\r\n\r\n    //es necesario crear un objeto para que el set funcione\r\n\r\n    var actualizar = {\r\n      \"id\": this.usuario.id,\r\n      \"email\": this.usuario.email,\r\n      \"ubicacion\": this.usuario.ubicacion,\r\n      \"descripcion\": this.usuario.descripcion,\r\n      \"tipo\": this.usuario.tipo,\r\n      \"nombre\": this.usuario.nombre,\r\n      \"apellidos\": this.usuario.apellidos,\r\n      \"password\": this.usuario.password,\r\n      \"estrellas\": this.usuario.estrellas,\r\n      \"image\": this.usuario.image,\r\n    }\r\n\r\n    this.firestoreServiceUser.updateUsuario(actualizar);\r\n    document.getElementById(\"editOk\").style.display=\"block\";\r\n\r\n    return true;\r\n\r\n  }\r\n\r\n\r\n  private db:AngularFirestore;\r\n  constructor(private _route:ActivatedRoute,\r\n              private _router: Router,\r\n              private storage: AngularFireStorage,\r\n              private firestoreServiceUser: UsuarioFirestoreService,\r\n              private firestoreServiceViaje: FirestoreService,\r\n              private firestoreServiceOpiniones: OpinionesFirestoreService,\r\n              private firestoreServiceSolicitud: SolicitudFirestoreService,\r\n              private _activatedRoute: ActivatedRoute,\r\n              private zone: NgZone\r\n              ) {\r\n                this.usuarios = [];\r\n                this.usuario = new Usuario();\r\n\r\n\r\n               }\r\n\r\n  ngOnInit(): void {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    var visitanteId = localStorage.getItem('usuario'); //hace referencia al usuario que est√° navegando\r\n    var userId = this._route.snapshot.paramMap.get('id'); //hace referencia al usuario propietario del perfil\r\n\r\n    if(visitanteId == \"null\"){\r\n      var origin = window.location.origin + '/';\r\n      var destino = origin + \"page1\";\r\n      window.location.assign(destino);\r\n    }\r\n\r\n    //utilizo la subscripci√≥n a activatedRoute para que se actualice el pefil de haber cambios en la ruta\r\n    this._activatedRoute.paramMap.subscribe((params) => {\r\n      userId = params['id'];\r\n        //this.reload();\r\n      if(userId == undefined){\r\n        userId = this._route.snapshot.paramMap.get('id'); //hace referencia al usuario propietario del perfil;\r\n      }\r\n      window.scrollTo(0,0);\r\n\r\n        var usuarioAux = this.firestoreServiceUser.getUsuario(userId).then((elem) => {\r\n\r\n          /**Se obtiene el usuario propietario del perfil con su id (userId) y se pone el atributo usuario\r\n           * con los valores correspondientes.\r\n           * Para eso nos apoyamos de una variable auxiliar usuarioAux, definida como Usuario. Elem ser√° el\r\n           * valor devuelto por la funci√≥n getUsuario del servicio firestoreServiceUser\r\n           */\r\n          var usuarioAux:Usuario = new Usuario();\r\n          usuarioAux.id = elem.id;\r\n          usuarioAux.email = elem.email;\r\n          usuarioAux.ubicacion = elem.ubicacion;\r\n          usuarioAux.descripcion = elem.descripcion;\r\n          this.descripcion = elem.descripcion;\r\n          usuarioAux.tipo = elem.tipo;\r\n          usuarioAux.nombre = elem.nombre;\r\n          usuarioAux.apellidos = elem.apellidos;\r\n          usuarioAux.password = elem.password;\r\n          usuarioAux.estrellas = elem.estrellas;\r\n          usuarioAux.image = elem.image;\r\n\r\n          this.usuario = usuarioAux;\r\n\r\n          this.firestoreServiceOpiniones.getPuntuacionesFiltered(this.usuario.id).subscribe(res=>{\r\n            /**Se realiza el proceso de obtenci√≥n de puntuaciones. Para ello se buscan todas aquellas\r\n             * puntuaciones que tengan como valor \"puntuado\" el id del usuario obtenido anteriormente.\r\n             * Esto se hace mediante el  m√©todo getPuntuacionesFiltered del servicio firestoreServiceOpiniones,\r\n             * que filtra opiniones por el id del usuario puntuado.\r\n             *\r\n             * La variable res ser√° un array que contendr√° todas las puntuaciones que tengan como\r\n             * puntuado al usuario propietario del perfil.\r\n             *\r\n             * Si no hay puntuaciones, el n√∫mero de estrellas llenas (stars) ser√° cero, y el de vac√≠as el\r\n             * m√°ximo. Como no se modifica el par√°metro 'estrellas' del usuario propietario del perfil (queda\r\n             * a -1) se escribir√° un mensaje \"este usuario no tiene puntuaciones a√∫n\"\r\n             *\r\n             * Si hay puntuaciones se recorre el array res con un for, se acumulan los valores de dichas\r\n             * puntuaciones (atributo puntuaci√≥n). Finalmente se divide entre el n√∫mero de puntuaciones\r\n             * (el size de res) para obtener la media. Esta media ser√° el n√∫mero de estrellas a rellenar,\r\n             * mientras que las estrellas vac√≠as ser√°n la resta del m√°ximo de estrellas (se ha establecido 5)\r\n             * y las estrellas llenas. Es importante notar que el atributo \"estrellas\" del usuario propietario\r\n             * del perfil cambia a 0, por lo que ya no aparecer√° el mensaje de \"este usuario no tiene\r\n             * puntuaciones\"\r\n             *\r\n             * Para finalizar, se realiza un update del atributo usuario, de forma que la vista muestre los\r\n             * resultados obtenidos\r\n             */\r\n\r\n\r\n            if (res.length <= 0){\r\n              this.stars = 0;\r\n              this.emptystars = this.maxStars;\r\n            }else{\r\n              var i;\r\n              var media = 0;\r\n              for (i = 0; i<res.length; i++){\r\n                media = media + parseInt(res[i].puntuacion);\r\n\r\n              }\r\n              media = Math.round(media/res.length); //es necesario redondear, no podemos rellenar media estrella\r\n              this.stars = media;\r\n              this.emptystars = this.maxStars - media;\r\n              //de esta forma, en el html ya no aparecer√° el comentario de 'no hay puntuaciones'\r\n              this.usuario.estrellas = \"0\";\r\n\r\n              //se requiere una variable auxiliar para que no salte el error DocumentReference.set() al llamar\r\n              //a updateUsuario\r\n\r\n              var actualizar =\r\n                {\r\n                  \"id\": this.usuario.id,\r\n                  \"email\": this.usuario.email,\r\n                  \"ubicacion\": this.usuario.ubicacion,\r\n                  \"descripcion\": this.usuario.descripcion,\r\n                  \"tipo\": this.usuario.tipo,\r\n                  \"nombre\": this.usuario.nombre,\r\n                  \"apellidos\": this.usuario.apellidos,\r\n                  \"password\": this.usuario.password,\r\n                  \"estrellas\": this.usuario.estrellas,\r\n                  \"image\": this.usuario.image\r\n                }\r\n\r\n\r\n\r\n\r\n              this.firestoreServiceUser.updateUsuario(actualizar);\r\n            }\r\n          });\r\n\r\n          this.firestoreServiceOpiniones.getComentariosFiltered(this.usuario.id).subscribe(res=>{\r\n            /**Se obtienen los comentarios que tienen como atributo \"comentado\" al usuario propietario\r\n             * del perfil. Para ello se emplea el m√©todo getComentariosFiltered del servicio\r\n             * firestoreServiceOpiniones, que filtra los comentarios por el id del comentado.\r\n             *\r\n             * Guardamos los comentarios en un diccionario, definido arriba como atributo,\r\n             * que tendr√° los siguientes par√°metros:\r\n             * id del comentador, foto del comentador (photo), nombre del comentador (person) y comentario\r\n             * (comment)\r\n             *\r\n             * Una vez tenemos el comentario, habiendo usado la funci√≥n getComentariosFiltered, podemos usar\r\n             * el id del comentador para obtener sus datos desde la tabla Usuario. Para ello empleamos\r\n             * el m√©todo getUsuario del servicio firestoreServiceUser, donde elem ser√° el usuario coincidente\r\n             * con el id del comentador\r\n             *\r\n             * Es importante notar que la obtenci√≥n del comentario y la obtenci√≥n del usuario se hacen en\r\n             * espacios temporales diferentes. Es por ello que los comentarios se almacenan junto con el id\r\n             * del comentador en un array auxiliar de tuplas <comentario, idComentador>. Cuando se han metido\r\n             * todos los comentadores en el diccionario, se emplea la informaci√≥n del array auxiliar para\r\n             * meter tambi√©n los comentarios.\r\n             *\r\n             * Las comprobaciones hechas al meter un comentario en el diccionario permiten que:\r\n             *  -Un usuario pueda hacer varios comentarios\r\n             *  -Todas las entradas del diccionario tengan un comentario\r\n             */\r\n            this.comentarios = [];\r\n            var i;\r\n            for (i = 0; i<res.length ; i++){\r\n              this.comentarios.push({\r\n                    \"id\":\"\",\r\n                    \"photo\": \"\",\r\n                    \"person\": \"\",\r\n                    \"comment\": \"\",\r\n                    \"tipo-url\": \"\"\r\n              },)\r\n\r\n\r\n            }\r\n            var comment;\r\n            var img;\r\n            var nombre;\r\n            var idUser;\r\n            var tipo;\r\n            for (i = 0; i<res.length ; i++){\r\n              comment = res[i].comentario;\r\n              this.tuplasComentario.push([comment, res[i].comentador, true]);\r\n\r\n              var contador = 0;\r\n              var usuarioAux = this.firestoreServiceUser.getUsuario(res[i].comentador).then((elem) => {\r\n\r\n                img = elem.image;\r\n                this.comentarios[contador][\"photo\"] = img;\r\n\r\n                nombre = elem.nombre;\r\n                this.comentarios[contador][\"person\"] = nombre;\r\n\r\n                idUser = elem.id;\r\n                this.comentarios[contador][\"id\"] = idUser;\r\n\r\n                tipo = elem.tipo;\r\n\r\n                if(tipo == 'organizador'){\r\n                  this.comentarios[contador][\"tipo-url\"] = '/perfil-organizador/';\r\n                }else{\r\n                  this.comentarios[contador][\"tipo-url\"] = '/perfil-viajero/';\r\n                }\r\n                var n;\r\n                for (n = 0; n<this.tuplasComentario.length ; n ++){\r\n                  if (this.tuplasComentario[n][1] == this.comentarios[contador][\"id\"] &&  this.comentarios[contador][\"comment\"] == \"\" && this.tuplasComentario[n][2] ){\r\n                    this.comentarios[contador][\"comment\"] = this.tuplasComentario[n][0];\r\n                    this.tuplasComentario[n][2] = false;\r\n\r\n                  }\r\n                }\r\n\r\n              contador = contador + 1 ;\r\n              });\r\n            }\r\n\r\n          })\r\n\r\n          /**Se obtienen los viajes organizados por el usuario propietario del perfil. Para ello se emplea\r\n           * el m√©todo getViajesByEmail, del servicio firestoreServiceViaje, que filtra los viajes por\r\n           * el email del organizador. La variable res ser√≠a un array con los viajes del organizador. Para\r\n           * introducirlos, se hace push sobre el atributo slides, que se emplea en el carrusel de la vista.\r\n           * Adem√°s se recoge el id del viaje, con la intenci√≥n de hacer un LinkedLink.\r\n           *\r\n           * De no haber viajes, aparecer√° una imagen que indica que no hay viajes\r\n           */\r\n          this.firestoreServiceSolicitud.getSolicitudesByUserId(userId).subscribe(res=>{\r\n              var viajes = [];\r\n              if(res.length <= 0){\r\n                this.slides = [\r\n                  { src: \"../../../assets/noViajes.png\"},\r\n\r\n                ];\r\n              }else{\r\n\r\n                var i;\r\n                for ( i = 0; i<res.length ; i++){\r\n                  viajes.push(res[i].idViaje);\r\n                }\r\n\r\n\r\n\r\n              }\r\n\r\n              if(viajes.length > 0){\r\n                this.slides = [];\r\n                for (i=0; i<viajes.length ; i++){\r\n\r\n                  if(res[i].estado != \"pendiente\" && res[i].estado != \"rechazado\" ){\r\n                      this.firestoreServiceViaje.getViaje(viajes[i]).then(elem =>{\r\n\r\n                        this.slides.push({src: elem.img});\r\n                        this.susViajes.push(['viaje', elem.id]);\r\n\r\n                      });\r\n                    }\r\n                }\r\n\r\n              }\r\n          })\r\n\r\n\r\n\r\n\r\n        }\r\n        );\r\n    })\r\n    /**Deben establecerse los permisos de opini√≥n y edici√≥n. Para ello comprobamos los id del usuario\r\n     * propietario del perfil y el visitante\r\n    */\r\n    if (userId != visitanteId){\r\n      this.activarOpiniones(); //si el usuario est√° visitando un perfil distinto del suyo, puede comentar y puntuar\r\n    }else{\r\n      this.titulo = \"TU PERFIL\";\r\n      this.activarEdicion(visitanteId); //si el usuario est√° visitando su perfil, puede editarlo\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  ngOnDestroy()\r\n  {\r\n    //this.s_usuarios.unsubscribe();\r\n  }\r\n\r\n\r\n}\r\n","<app-header titulo=\"{{titulo}}\"></app-header>\r\n\r\n<app-puntuacion-pu id = \"puntuar\" (cerrado)=\"cerrar($event, 'puntuar' )\" (puntuacion)=\"newPuntuacion($event)\" ></app-puntuacion-pu>\r\n<app-comentario-pu id = \"comentar\" (cerrado)=\"cerrar($event, 'comentar')\" (comentario)=\"newComentario($event)\" ></app-comentario-pu>\r\n<app-edicion-pu id = \"editar\" user=\"usuario\" descripcion=\"{{descripcion}}\" (cerrado)=\"cerrar($event, 'editar')\" (newDescripcion)=\"setDescripcion($event)\" (foto)=\"setFoto($event)\" (signal)=\"uploadUser($event)\" ></app-edicion-pu>\r\n<app-mensaje id=\"graciasC\" mensaje=\"¬° Gracias por comentar !\" imagen=\"../../../assets/comment.png\" (cerrado)=\"cerrar($event, 'graciasC')\"></app-mensaje>\r\n<app-mensaje id=\"graciasP\" mensaje=\"¬° Gracias por puntuar !\" imagen=\"../../../assets/ok.png\" (cerrado)=\"cerrar($event, 'graciasP')\"></app-mensaje>\r\n<app-mensaje id=\"editOk\" mensaje=\"¬° Has modificado tu perfil !\"  imagen=\"../../../assets/usuario.png\" (cerrado)=\"cerrar($event, 'editOk')\"></app-mensaje>\r\n<div id=\"general\">\r\n\r\n   <!-- DATOS -->\r\n   <div id=\"div1\">\r\n      <div id=\"tarjeta\">\r\n         <mat-card>\r\n         <mat-card-content>\r\n            <div class=\"little_container_izq\">\r\n\r\n               <span class=\"name\">{{usuario.nombre}}</span>\r\n               <img (click)=\"editar()\" id=\"img-editar\" src=\"./assets/engranaje.png\" *ngIf=\"permisoEditar\">\r\n\r\n               <div>\r\n                  <span class=\"texto_perfil\">{{usuario.ubicacion}}</span>\r\n                  <img src=\"./assets/location.png\" style=\"height: 7%; width: 7%;\" >\r\n               </div>\r\n            </div>\r\n            <div class=\"little_container_der\">\r\n               <img *ngIf=\"usuario.image != ''\" src=\"{{usuario.image}}\" style=\"display: inline-block; max-width: 200px; max-height: 200px; \" >\r\n               <img *ngIf=\"usuario.image == ''\" src=\"./assets/usuario.png\" style=\"display: inline-block; max-width: 100px; max-height: 100px; \">\r\n            </div>\r\n\r\n\r\n         </mat-card-content>\r\n         </mat-card>\r\n      </div>\r\n\r\n   </div>\r\n   <div id=\"div2\">\r\n      <p class=\"texto\" id=\"myDescripcion\">\r\n      {{usuario.descripcion}}\r\n      </p>\r\n\r\n\r\n   </div>\r\n   <div id=\"div3\">\r\n      <div id=\"opinions\">\r\n         <img src=\"./assets/telegram.png\" style=\"height: 5%; width: 5%; vertical-align: middle; margin-right: 2%\">\r\n         <span class=\"bold_text\">{{usuario.tipo}}</span>\r\n         <br>\r\n         <br>\r\n         <!-- STARS -->\r\n         <p *ngIf=\"usuario.estrellas == '-1'\"> Este usuario no tiene valoraciones a√∫n </p>\r\n         <div class=\"stars\">\r\n            <span *ngFor=\"let i of Arr(stars).fill(1)\" >\r\n               <img src=\"./assets/star.png\" class=\"llena\" style=\"height: 5%; width: 5%; vertical-align: middle; margin-right: 2%\">\r\n            </span>\r\n            <span *ngFor=\"let i of Arr(emptystars).fill(1)\" >\r\n               <img src=\"./assets/empty_star.png\" class=\"vacia\" style=\"height: 5%; width: 5%; vertical-align: middle; margin-right: 2%;\">\r\n            </span>\r\n            <app-boton *ngIf=\"permisoOpinar\" texto=\"Puntua a este usuario\" (click)=\"puntuar()\"></app-boton>\r\n         </div>\r\n         <!--OPINIONES-->\r\n         <div class=\"titulo-opinion\">\r\n            <span class=\"name comentarios_usuario\">Los usuarios opinaron:</span>\r\n            <img src=\"./assets/comentario.png\" *ngIf=\"permisoOpinar\" (click)=\"comentar()\">\r\n         </div>\r\n         <div class=\"comment\" *ngFor=\"let comment of comentarios\">\r\n              <div class=\"comment-division-1\">\r\n                  <img src= '{{ comment[\"photo\"] }}' [routerLink]=\"[comment['tipo-url'], comment['id'] ]\"  style=\"height: 100%; width: 100%; vertical-align: middle; display: inline-block; \">\r\n               </div>\r\n\r\n               <div class=\"comment-division-2\">\r\n                  <p class=\"bold_text\" style=\"display: inline-block;\">{{ comment[\"person\"]}}</p>\r\n                  <p>{{ comment[\"comment\"] }}</p>\r\n               </div>\r\n         </div>\r\n\r\n      </div>\r\n\r\n   </div>\r\n   <!--VIAJES-->\r\n   <div id=\"div4\">\r\n      <span class=\"name viajes_usuario\">Viajes del usuario</span>\r\n      <div class=\"container_carousel1\">\r\n         <carousel [slides]=\"slides\" [links]=\"susViajes\"></carousel>\r\n      </div>\r\n   </div>\r\n</div>\r\n\r\n\r\n\r\n<!--\r\n\r\n<div class=\"main_container_izq\">\r\n   <mat-card>\r\n      <mat-card-content>\r\n\r\n         <div class=\"little_container_izq\">\r\n            <span class=\"name\">Alejandro Chamorro</span>\r\n            <div>\r\n               <span class=\"texto_perfil\">Hombre</span>\r\n               <img src=\"../../../assets/person.png\" style=\"height: 7%; width: 7%;\">\r\n               IF AQUI ENTRE ICONO HOMBRE/MUJER\r\n            </div>\r\n            <div>\r\n               <span class=\"texto_perfil\">27 a√±os</span>\r\n            </div>\r\n            <div>\r\n               <span class=\"texto_perfil\">Salamanca, Espa√±a</span>\r\n               <img src=\"../../../assets/location.png\" style=\"height: 7%; width: 7%;\" >\r\n            </div>\r\n         </div>\r\n         <div class=\"little_container_der\">\r\n            <img src=\"../../../assets/person-2.jpg\" style=\"display: inline-block; width: 100%; max-height: 300px; \" >\r\n         </div>\r\n\r\n\r\n      </mat-card-content>\r\n   </mat-card>\r\n\r\n\r\n</div>\r\n\r\n<div class=\"main_container_der\">\r\n\r\n      <p class=\"texto\">\r\n      Lorem ipsum dolor sit amet consectetur adipisicing elit. Assumenda vitae iusto non magnam inventore amet sapiente earum minima cum\r\n      quam fuga voluptatem quae ab sequi quia cupiditate nesciunt, voluptate architecto.\r\n      Lorem ipsum dolor sit amet consectetur adipisicing elit. Assumenda vitae iusto non magnam inventore amet sapiente earum minima cum\r\n      quam fuga voluptatem quae ab sequi quia cupiditate nesciunt, voluptate architecto.\r\n      Lorem ipsum dolor sit amet consectetur adipisicing elit. Assumenda vitae iusto non magnam inventore amet sapiente earum minima cum\r\n      quam fuga voluptatem quae ab sequi quia cupiditate nesciunt, voluptate architecto.\r\n      </p>\r\n\r\n      <span class=\"name\">Viajes del usuario</span>\r\n      <div class=\"container_carousel1\">\r\n         <carousel [slides]=\"slides\"></carousel>\r\n      </div>\r\n\r\n\r\n</div>\r\n\r\n-->\r\n\r\n<!--\r\n<span style=\"display: inline-block;\">hjfdekfjksj</span>\r\n<img src=\"../../../assets/person-1.jpg\" style=\"display: inline-block; width: 50%; height: 50%;\" >\r\n-->\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-privacidad',\r\n  templateUrl: './privacidad.component.html',\r\n  styleUrls: ['./privacidad.component.scss']\r\n})\r\nexport class PrivacidadComponent implements OnInit {\r\n  \r\n  constructor() { }\r\n\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  scroll(el: HTMLElement) {\r\n    el.scrollIntoView({behavior: 'smooth'});\r\n  }\r\n\r\n}\r\n","<app-header titulo=\"Pol√≠tica de Privacidad\"></app-header>\r\n\r\n<h1 class=\"title\">Nuestra pol√≠tica de privacidad</h1>\r\n<div class=\"politica\">\r\n    <h1 #t0>Introducci√≥n</h1>\r\n    <p>\r\n        Tal y como mencionamos en nuestras  3 Leyes de protecci√≥n de datos, nos comprometemos a proteger la privacidad \r\n        de sus datos. Esta Pol√≠tica de privacidad explica m√°s concretamente qu√© informaci√≥n Tripmefy Corporation y sus \r\n        Empresas del Grupo recopilan de los Titulares de cuenta y Usuarios finales (\"usted\") a trav√©s de los sitios web \r\n        y aplicaciones de Tripmefy, a los cuales nos referimos colectivamente como \"el Servicio\". El Servicio incluye el Software tripmefy.\r\n    </p>\r\n\r\n    <p>\r\n        Tenga en cuenta que si utiliza Trimefy como viajero, usted es el Titular de la cuenta y el Usuario final de una cuenta del \r\n        servicio de Tripmefy. Si utiliza Tripmefy como organizador, el Titular de la cuenta es el Cliente que ha contratado \r\n        Tripmefy. Puede encontrar la definici√≥n de estos y otros t√©rminos utilizados en esta pol√≠tica en el Glosario al final de esta p√°gina.\r\n    </p>\r\n\r\n    <p>\r\n        Aunque es poco frecuente que se produzcan cambios, esta pol√≠tica se puede modificar a medida que aparezcan nuevas \r\n        funciones, tecnolog√≠a o requisitos legales, de modo que le recomendamos que los compruebe ocasionalmente. Si \r\n        realizamos alg√∫n cambio significativo, le notificaremos y, en caso necesario, solicitaremos su consentimiento. \r\n    </p>\r\n\r\n    <h1 #t1>¬øQu√© tipo de informaci√≥n recoge Tripmefy? </h1>\r\n\r\n    <p>\r\n        Creamos Tripmefy para ayudarle a crear paquetes de viajes y as√≠ poder acercarse m√°s al usuario . \r\n        Eso significa que puede introducir, cargar o almacenar en Tripmefy cualquier texto, imagen y otros datos \r\n        que desee; nos referimos a esa informaci√≥n como \"Contenido\". Tambi√©n recopilamos y recibimos los siguientes \r\n        tipos de informaci√≥n:\r\n    </p>\r\n\r\n    <ul>\r\n        <li><b>Informaci√≥n b√°sica sobre suscriptores.</b> Para abrir su cuenta y procesar pagos, recopilamos y \r\n            recibimos informaci√≥n b√°sica como su direcci√≥n de correo electr√≥nico y, en funci√≥n de c√≥mo compre,\r\n            su direcci√≥n de facturaci√≥n y otra informaci√≥n de pago. </li>\r\n        <li><b>Datos de uso.</b> Recopilamos y registramos datos sobre c√≥mo usted y otros usuarios acceden y \r\n            utilizan Tripmefy, por ejemplo, la acci√≥n de crear o compartir un viaje. Los datos de uso se pueden \r\n            recopilar a trav√©s de cookies y tecnolog√≠as similares. Para obtener m√°s informaci√≥n, incluida la forma de\r\n            desactivaci√≥n, visite nuestra p√°gina de Informaci√≥n de Cookies. </li>\r\n        <li><b>Informaci√≥n de ubicaci√≥n.</b> Recopilamos la direcci√≥n IP que utiliza para conectarse al Servicio y, \r\n            si decide compartirla, la informaci√≥n de su ubicaci√≥n desde un dispositivo m√≥vil. </li>\r\n        <li><b>Informaci√≥n del dispositivo.</b> Recopilamos informaci√≥n sobre el n√∫mero y el tipo de dispositivos\r\n            que utiliza para conectarse al Servicio, as√≠ como informaci√≥n sobre los sistemas operativos de esos \r\n            dispositivos (p. ej., iOS, Android, Windows). Obtenga m√°s informaci√≥n sobre los datos que recopilan nuestras \r\n            aplicaciones de su dispositivo en nuestra p√°gina de Uso de datos.</li>\r\n    </ul>\r\n\r\n    <h1 #t2>¬øC√≥mo utiliza Tripmefy mi informaci√≥n?</h1>\r\n\r\n        <p>Tenemos normas concretas sobre c√≥mo y cu√°ndo utilizamos la informaci√≥n que recopilamos y recibimos. \r\n            Las describimos a continuaci√≥n.</p>\r\n\r\n        <h3><b>¬øQu√© hace Tripmefy con mi informaci√≥n?</b></h3>\r\n            <p>Nos comprometemos a proteger la privacidad de su informaci√≥n. A continuaci√≥n, \r\n                describimos las formas en que utilizamos la informaci√≥n que recopilamos y recibimos para proporcionar, \r\n                mantener y mejorar el Servicio; con el fin de ofrecer soluci√≥n a los problemas y dar asistencia a los \r\n                clientes; para proteger el Servicio para todos nuestros usuarios; para ponernos en contacto con usted; \r\n                y para administrar las cuentas de Tripmefy Business.&nbsp;</p>\r\n            <ul>\r\n                <li>Utilizamos una serie de tecnolog√≠as para ayudarle a sacar el m√°ximo provecho del Servicio.\r\n                    Nuestros sistemas analizan autom√°ticamente sus datos con el fin de potenciar las funciones de \r\n                    Tripmefy y para mejorar continuamente el Servicio de una forma que no requiera que nadie vea su \r\n                    Contenido. Esto puede incluir, por ejemplo:</li>\r\n                <ul>\r\n                    <li>Asegurarnos de que encuentra lo que necesita cuando busca en su cuenta.</li>\r\n                    <li>Mostr√°ndole la informaci√≥n m√°s relevante seg√∫n como est√© o pueda estar utilizando el \r\n                        Servicio en el momento y/o lugar concreto;</li>\r\n                    <li>Sugerir las acciones que puede realizar en funci√≥n de la \r\n                        informaci√≥n que ha almacenado.</li>\r\n                    <li>Sugiri√©ndole funciones o productos del servicio de Tripmefy que consideramos que le ayudar√°n a sacar el m√°ximo provecho de nuestro Servicio.</li>\r\n                    <li>Para usuarios de Tripmefy Business, recomendar personas con las que puede colaborar.</li>\r\n                </ul>\r\n            </ul>\r\n            <ul>\r\n                <li>Con el fin de ofrecer soluci√≥n a los problemas y dar asistencia a los clientes, \r\n                    es posible que nuestro equipo de Atenci√≥n al cliente necesite acceder a su informaci√≥n, \r\n                    como la direcci√≥n de correo electr√≥nico de su cuenta e informaci√≥n sobre la aplicaci√≥n Tripmefy \r\n                    que est√° utilizando, sujeto a las protecciones que se describen a continuaci√≥n. &nbsp;</li>\r\n                <li>Como parte de nuestros esfuerzos para proteger su cuenta y la funcionalidad del Servicio, \r\n                    nuestros sistemas automatizados pueden analizar los mensajes de correo electr√≥nico que env√≠e a\r\n                    y desde su cuenta de Tripmefy y las notas que comparte para detectar spam, malware u otros posibles \r\n                    problemas de seguridad. Si determinamos que dicho material constituye una violaci√≥n de los \r\n                    T√©rminos de Servicio o Gu√≠as de usuario, podemos bloquear la entrega o detener el uso compartido del \r\n                    material problem√°tico, tal y como funciona un filtro de correo no deseado en su bandeja de entrada \r\n                    del correo electr√≥nico. Obtenga m√°s informaci√≥nsobre los pasos que puede seguir para proteger su cuenta, \r\n                    como el uso de contrase√±as seguras, verificaci√≥n en dos pasos y cifrado.</li>\r\n                <li>De acuerdo con sus preferencias de comunicaci√≥n, nos pondremos en contacto con usted ocasionalmente \r\n                    para anunciar nuevos productos y funciones que creamos para usted, compartir consejos para utilizar \r\n                    Tripmefy y hacer m√°s cosas, ofrecer ofertas especiales y proporcionar informaci√≥n sobre c√≥mo funciona \r\n                    Tripmefy con productos y servicios de nuestros socios comerciales.</li>\r\n            </ul>\r\n\r\n    \r\n    <h1 #t3>¬øAlguien de Tripmefy podr√≠a ver alguna vez mi Contenido?</h1>\r\n        <p>\r\n            Usted tiene el control sobre qui√©n ve su Contenido. Limitamos el uso de su Contenido \r\n            para asegurarnos de que nadie de Tripmefy pueda verlo, a menos que usted nos d√© permiso expreso o \r\n            que sea necesario para cumplir con nuestras obligaciones legales. Concretamente:\r\n            \r\n            Para ayudar a refinar o mejorar la tecnolog√≠a, podemos pedirle permiso para revisar partes de su \r\n            Contenido. Por ejemplo, si una nueva funci√≥n sugiere notas relacionadas que son relevantes para su \r\n            Contenido, podemos darle la oportunidad de proporcionarnos comentarios sobre c√≥mo funciona la funci√≥n\r\n            junto con una muestra del Contenido en cuesti√≥n, con el fin de que podamos asegurarnos de que la funci√≥n \r\n            proporciona sugerencias adaptadas de forma adecuada. Dicho acceso a su Contenido se produce √∫nicamente \r\n            con su permiso expreso y est√° sujeto a estrictas normas de confidencialidad y controles de acceso a datos. \r\n            Tomar la decisi√≥n de darnos este permiso es completamente voluntario.\r\n            Si se pone en contacto con nuestro equipo de Atenci√≥n al cliente para obtener ayuda con partes concretas \r\n            del Contenido en su cuenta (por ejemplo, si no puede encontrar una nota que cree que deber√≠a estar en su \r\n            cuenta), pedirles posible que le pidamos permiso temporal para mirar su Contenido. Este permiso finaliza en \r\n            el momento en que se resuelve el problema.\r\n        </p>\r\n\r\n    \r\n    <h1 #t4>¬øC√≥mo responde Tripmefy a las solicitudes legales de mi informaci√≥n?</h1>\r\n        <p>\r\n            Protegemos cuidadosamente la privacidad de su cuenta. No divulgaremos su informaci√≥n a \r\n            las autoridades policiales u otras autoridades gubernamentales a menos que consideremos \r\n            que sea necesario para cumplir las √≥rdenes, √≥rdenes judiciales, citaciones u otras solicitudes \r\n            legales del gobierno. Esto puede incluir responder a solicitudes legales de jurisdicciones fuera \r\n            de Espa√±a si consideramos de buena fe que la ley exige la respuesta en esa jurisdicci√≥n, \r\n            afecta a los usuarios en esa jurisdicci√≥n y es coherente con las normas b√°sicas internacionalmente \r\n            reconocidas.\r\n        </p>\r\n        <p>\r\n            Interpretamos de manera estricta todas las solicitudes de informaci√≥n, y solo revelamos \r\n            el Contenido de su cuenta que atienda espec√≠ficamente a una orden del gobierno o si ha \r\n            brindado su consentimiento expl√≠cito. De acuerdo con nuestra pol√≠tica de notificaci√≥n a \r\n            usuarios, le comunicaremos si creemos que estamos obligados a cumplir una demanda legal de un \r\n            tercero de su informaci√≥n, y rutinariamente rechazaremos las directivas de gobierno sobre el \r\n            retraso de la notificaci√≥n a usuarios que consideremos demasiado generales. Puede encontrar \r\n            m√°s informaci√≥n en nuestro Informe de transparencia actual.\r\n        </p>\r\n        <p>\r\n            Adem√°s, en raras ocasiones es posible que compartamos su informaci√≥n seg√∫n sea necesario para investigar \r\n            o tomar acciones respecto a actividades ilegales, presunto fraude o amenazas potenciales contra personas,\r\n             propiedad o sistemas de quienes trabajamos en el Servicio, o seg√∫n sea necesario con el fin de \r\n             cumplir nuestras obligaciones legales.</p>\r\n\r\n    <h1 #t5>¬øC√≥mo puedo gestionar mi informaci√≥n almacenada en Tripmefy?</h1>\r\n        <p>\r\n            De acuerdo con nuestra primera ley de protecci√≥n de datos, sus datos le pertenecen y en la mayor√≠a \r\n            de los casos puede gestionar su informaci√≥n simplemente accediendo a su cuenta y editando su informaci√≥n \r\n            directamente dentro del servicio de Tripmefy.</p>\r\n        <p>\r\n            Sin embargo, si lo prefiere, puede ponerse en contacto con nosotros escribiendo a atencion@Tripmefy.com\r\n            para solicitarnos que proporcionemos acceso, corrijamos, actualicemos o eliminemos su informaci√≥n personal. \r\n            Tenga en cuenta que posiblemente le solicitemos un comprobante de identidad y/o propiedad de la cuenta antes \r\n            de completar su solicitud. Cumpliremos dichas solicitudes en la medida requerida por la ley aplicable o por el \r\n            Escudo de Privacidad de Espa√±a.\r\n        </p>\r\n        \r\n</div>\r\n\r\n\r\n<div class=\"right-menu\">\r\n    <ul>\r\n    <a (click)=\"scroll(t0)\"><li>Introducci√≥n</li></a> <hr>\r\n    <a (click)=\"scroll(t1)\"><li>¬øQu√© tipo de informaci√≥n recoge Tripmefy?</li></a> <hr>\r\n    <a (click)=\"scroll(t2)\"><li>¬øC√≥mo utiliza Tripmefy mi informaci√≥n?</li></a> <hr>\r\n    <a (click)=\"scroll(t3)\"><li>¬øAlguien de Tripmefy podr√≠a ver alguna vez mi Contenido?</li></a> <hr>\r\n    <a (click)=\"scroll(t4)\"><li>¬øC√≥mo responde Tripmefy a las solicitudes legales de mi informaci√≥n?</li></a> <hr>\r\n    <a (click)=\"scroll(t5)\"><li>¬øC√≥mo puedo gestionar mi informaci√≥n almacenada en Tripmefy?</li></a>\r\n    </ul>   \r\n</div>\r\n\r\n<app-scroll-top></app-scroll-top>","import { Component, OnInit, Input, OnDestroy, ElementRef, ViewChild, Output, EventEmitter } from '@angular/core';\r\nimport { ActivatedRoute }  from '@angular/router';\r\nimport {Router} from '@angular/router';\r\nimport {FirestoreService} from '../services/firestore/firestore.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {Viaje, IViaje} from '../interfaces/viaje';\r\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport {finalize} from 'rxjs/operators';\r\nimport { FormsModule } from '@angular/forms';\r\n//import { EventEmitter } from 'protractor';\r\n\r\n@Component({\r\n  selector: 'app-pruebas',\r\n  templateUrl: './pruebas.component.html',\r\n  styleUrls: ['./pruebas.component.scss']\r\n})\r\nexport class PruebasComponent implements OnInit {\r\n\r\n  constructor(private _route:ActivatedRoute,\r\n    private _router: Router,\r\n    private storage: AngularFireStorage,\r\n    private firestoreService: FirestoreService\r\n    ) {\r\n      \r\n     }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  crearViaje(e){\r\n    console.log(\"entra\");\r\n    var viaje:Viaje = new Viaje();\r\n    viaje.pais = \"Alemania\"\r\n    viaje.ciudad = \"Berl√≠n\";\r\n    viaje.continente = \"Europa\";\r\n    viaje.email = \"emailinventado@gmail.com\";\r\n    viaje.img = e;\r\n    this.firestoreService.createViaje(viaje);\r\n\r\n  } \r\n\r\n}\r\n","<app-header titulo=\"pruebas\"></app-header>\r\n<app-pedir-imagen (url)=\"crearViaje($event)\"></app-pedir-imagen>\r\n","import { UsuarioFirestoreService } from './../services/firestore/usuario-firestore.service';\r\nimport { Usuario } from './../interfaces/usuario';\r\nimport { Router } from '@angular/router'; //Para redirigir a una p√°gina\r\nimport { AuthService } from './../services/auth.service'; //para registro en base de datos\r\nimport { Component, OnInit, Input} from '@angular/core';\r\nimport { FormControl, FormGroupDirective, NgForm, Validators } from '@angular/forms';\r\nimport { ErrorStateMatcher } from '@angular/material/core';\r\n\r\n/** Error when invalid control is dirty, touched, or submitted. */\r\nexport class MyErrorStateMatcher implements ErrorStateMatcher {\r\n  isErrorState(control: FormControl | null, form: FormGroupDirective | NgForm | null): boolean {\r\n    const isSubmitted = form && form.submitted;\r\n    return !!(control && control.invalid && (control.dirty || control.touched || isSubmitted));\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'app-registro',\r\n  templateUrl: './registro.component.html',\r\n  styleUrls: ['./registro.component.scss']\r\n})\r\nexport class RegistroComponent implements OnInit {\r\n\r\n  hide = true;\r\n  checked = false;\r\n  labelPosition: 'before' | 'after' = 'after';\r\n  @Input() public error:string; \r\n\r\n  constructor(private route: Router, private authService: AuthService, private userService: UsuarioFirestoreService) { \r\n    this.error = \"\";\r\n  }\r\n\r\n  public nombre: string = '';\r\n  public apellido: string = '';\r\n  public email: string = '';\r\n  public password: string = '';\r\n  public password2: string = '';\r\n  public tipo: string = '';\r\n  public poblacion: string = '';\r\n  public pais: string = '';\r\n  public terminos: boolean = false;\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  back(){\r\n    this.route.navigate(['/page1']);\r\n  }\r\n  \r\n  onRegister(){\r\n    \r\n    document.getElementById(\"password1\").style.color=\"white\";\r\n    document.getElementById(\"password2\").style.color=\"white\";\r\n    document.getElementById(\"email\").style.color=\"white\";\r\n\r\n    this.authService.registerUser(this.email, this.password) //almacenamos el usuario de registro en la bbdd (email y contrase√±a)\r\n    .then((res)=> {\r\n      var usuario:Usuario = new Usuario();\r\n      usuario.nombre = this.nombre;\r\n      usuario.apellidos = this.apellido;\r\n      usuario.email = this.email;\r\n      usuario.password = this.password;\r\n      usuario.tipo = this.tipo;\r\n      usuario.image = \"\";\r\n      usuario.descripcion = \"\";\r\n      usuario.ubicacion = this.MaysPrimera(this.poblacion.toLowerCase()) + \", \" + this.MaysPrimera(this.pais.toLowerCase());\r\n      this.userService.createUsuario(usuario);\r\n      \r\n      localStorage.setItem('tipo', this.tipo);\r\n\r\n      this.route.navigate(['/bienvenida']);\r\n\r\n    }).catch(err => {\r\n      document.getElementById(\"error5\").style.display=\"block\";      \r\n      document.getElementById(\"error1\").style.display=\"none\";\r\n      document.getElementById(\"error2\").style.display=\"none\";\r\n      document.getElementById(\"error3\").style.display=\"none\";\r\n      document.getElementById(\"error4\").style.display=\"none\";\r\n      document.getElementById(\"email\").style.color=\"red\";\r\n    });\r\n  }\r\n\r\n  checkFields(){\r\n    if (this.nombre==='' || this.apellido==='' || this.email==='' || this.password==='' || \r\n    this.password2==='' || this.poblacion==='' || this.pais==='' || this.tipo==='' || !this.terminos ){\r\n      document.getElementById(\"password1\").style.color=\"white\";\r\n      document.getElementById(\"password2\").style.color=\"white\";\r\n      document.getElementById(\"error1\").style.display=\"block\";\r\n      document.getElementById(\"error2\").style.display=\"none\";\r\n      document.getElementById(\"error3\").style.display=\"none\";\r\n      document.getElementById(\"error4\").style.display=\"none\";\r\n      document.getElementById(\"error5\").style.display=\"none\";\r\n\r\n      return true;\r\n    }else if(this.password.localeCompare(this.password2) != 0){\r\n      document.getElementById(\"password1\").style.color=\"red\";\r\n      document.getElementById(\"password2\").style.color=\"red\";\r\n      document.getElementById(\"error1\").style.display=\"none\";\r\n      document.getElementById(\"error2\").style.display=\"none\";\r\n      document.getElementById(\"error3\").style.display=\"none\";\r\n      document.getElementById(\"error4\").style.display=\"block\";\r\n      document.getElementById(\"error5\").style.display=\"none\";\r\n\r\n        return true;\r\n    }else if(this.password.length<8){\r\n      document.getElementById(\"error1\").style.display=\"none\";\r\n      document.getElementById(\"error2\").style.display=\"block\";\r\n      document.getElementById(\"error3\").style.display=\"none\";\r\n      document.getElementById(\"error4\").style.display=\"none\";\r\n      document.getElementById(\"error5\").style.display=\"none\";\r\n\r\n      return true;\r\n    }else if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.([a-zA-Z]{2,4})+$/.test(this.email) ){\r\n      document.getElementById(\"error1\").style.display=\"none\";\r\n      document.getElementById(\"error2\").style.display=\"none\";\r\n      document.getElementById(\"error3\").style.display=\"block\";\r\n      document.getElementById(\"error4\").style.display=\"none\";\r\n      document.getElementById(\"error5\").style.display=\"none\";\r\n      \r\n      return true;\r\n    }else{\r\n        document.getElementById(\"password1\").style.color=\"white\";\r\n        document.getElementById(\"password2\").style.color=\"white\";\r\n        document.getElementById(\"error1\").style.display=\"none\";\r\n        document.getElementById(\"error2\").style.display=\"none\";\r\n        document.getElementById(\"error3\").style.display=\"none\";\r\n        document.getElementById(\"error4\").style.display=\"none\";\r\n        document.getElementById(\"error5\").style.display=\"none\";\r\n\r\n        return false;\r\n    } \r\n  }\r\n\r\n  MaysPrimera(string){\r\n    return string.charAt(0).toUpperCase() + string.slice(1);\r\n  }\r\n\r\n  emailFormControl = new FormControl('', [\r\n    Validators.required,\r\n    Validators.email,\r\n  ]);\r\n\r\n  nombreFormControl = new FormControl('', [\r\n    Validators.required,\r\n  ]);\r\n\r\n  apellidoFormControl = new FormControl('', [\r\n    Validators.required,\r\n  ]);\r\n\r\n  poblacionFormControl = new FormControl('', [\r\n    Validators.required,\r\n  ]);\r\n  paisFormControl = new FormControl('', [\r\n    Validators.required,\r\n  ]);\r\n\r\n  passwordFormControl = new FormControl('', [\r\n    Validators.required,\r\n  ]);\r\n\r\n  password2FormControl = new FormControl('', [\r\n    Validators.required,\r\n  ]);\r\n\r\n  \r\n\r\n\r\n  matcher = new MyErrorStateMatcher();\r\n\r\n\r\n}\r\n","<div class=\"contenedor\">\r\n  <div class=\"lateral-izq\">\r\n      \r\n      <img src='./assets/tripmefy.png'>\r\n     \r\n\r\n  </div>\r\n  \r\n  <div class=\"lateral-drch\">\r\n    <app-volver class=\"volver\" (click)='back()'></app-volver>\r\n    <h1>REGISTRO</h1>\r\n    \r\n    <form  (ngSubmit)=\"onRegister()\">\r\n      <div class=\"registro_datos\">\r\n        <div id=\"error1\"><p>Introduce los campos obligatorios</p></div>\r\n        <div id=\"error2\"><p>Introduce una contrase√±a de 8 caracteres</p></div>\r\n        <div id=\"error3\"><p>Introduce el email en el formato correcto example@examle.com</p></div>\r\n        <div id=\"error4\"><p>Las contrase√±as no coinciden</p></div>\r\n        <div id=\"error5\"><p>El email ya existe</p></div>\r\n\r\n\r\n        <div class=\"grupo-inputs\" >\r\n          <mat-form-field class=\"input\">  <!--Pide el nombre-->\r\n            <mat-label>Nombre</mat-label>\r\n            <input matInput [(ngModel)]=\"nombre\" name=\"nombre\" required>   \r\n          </mat-form-field>\r\n          \r\n          <mat-form-field class=\"input\"> <!--Pide el apellido-->\r\n            <mat-label>Apellido</mat-label>\r\n            <input matInput [(ngModel)]=\"apellido\" name=\"apellido\"   required>\r\n          </mat-form-field>\r\n        </div> <!-- Fin grupo inputs-->\r\n  \r\n        <br>\r\n  \r\n        <div class=\"grupo-inputs\">\r\n          <mat-form-field class=\"input\">  <!--Pide la poblaci√≥n-->\r\n            <mat-label>Poblaci√≥n</mat-label>\r\n            <input matInput [(ngModel)]=\"poblacion\" name=\"polacion\"  required> \r\n          </mat-form-field>\r\n  \r\n          <mat-form-field class=\"input\"> <!--Pide el pa√≠s-->\r\n            <mat-label>Pa√≠s</mat-label>\r\n            <input matInput [(ngModel)]=\"pais\" name=\"pais\"  required>\r\n          </mat-form-field>\r\n        </div> <!-- Fin grupo inputs-->\r\n  \r\n        <br>\r\n  \r\n        <mat-form-field class=\"email input\"> <!--Pide el email-->\r\n          <mat-label>Email</mat-label>\r\n          <input id=\"email\" matInput  type=\"email\" placeholder=\"Ej. pat@example.com\" [(ngModel)]=\"email\" name=\"email\" required>\r\n        </mat-form-field>\r\n        \r\n        <br>\r\n  \r\n        \r\n        <mat-form-field class=\"input\" appearance=\"fill\" > <!--Pide la contrase√±a-->\r\n          \r\n          <mat-label>Introduce tu contrase√±a</mat-label>\r\n          <input id=\"password1\" matInput [(ngModel)]=\"password\" name=\"password\"  [type]=\"hide ? 'password' : 'text'\"  \r\n          required>\r\n          <button  mat-icon-button matSuffix (click)=\"hide = !hide\" [attr.aria-label]=\"'Hide password'\" [attr.aria-pressed]=\"hide\">\r\n          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n          \r\n        <br>\r\n        <mat-form-field class=\"input\" appearance=\"fill\"> <!--Pide la contrase√±a de comprobaci√≥n -->\r\n          \r\n\r\n          <mat-label>Confirma la contrase√±a</mat-label>\r\n          <input id=\"password2\" matInput [(ngModel)]=\"password2\" name=\"password2\" [type]=\"hide ? 'password' : 'text'\" required>\r\n          <button  mat-icon-button matSuffix (click)=\"hide = !hide\" [attr.aria-label]=\"'Hide password'\" [attr.aria-pressed]=\"hide\">\r\n          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n      </div> <!-- Fin grupo registro datos-->\r\n\r\n\r\n      <section class=\"checkbox\"> <!--Pide el usuario-->\r\n        <mat-radio-group [(ngModel)]=\"tipo\" name=\"tipo\">\r\n          <mat-radio-button class=\"example-margin\" value=\"viajero\">Soy viajero</mat-radio-button>\r\n          <mat-radio-button class=\"example-margin\" value=\"organizador\">Soy organizador</mat-radio-button>\r\n        </mat-radio-group>\r\n      </section>\r\n\r\n      <section class=\"checkbox\"> <!--Pide la aceptacion de la politica-->\r\n        <mat-checkbox class=\"\" [(ngModel)]=\"terminos\" name=\"terminos\">Acepto los t√©rminos y la pol√≠tica de privacidad</mat-checkbox>\r\n      </section>\r\n    \r\n      <div class=\"boton_registro\"> <!--Bot√≥n de registro-->\r\n          <button mat-raised-button style=\"width: 200px\" class= \"boton\" type=\"submit\" [disabled]=\"checkFields()\">\r\n         REGISTRATE</button>\r\n         <br>\r\n         <br>\r\n         <p>¬øYa est√°s registrado? <a href=\"/inicio-sesion\">Inicia sesi√≥n</a></p>\r\n      </div>\r\n    </form>\r\n  </div>\r\n\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { IUsuario } from '../interfaces/usuario';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { Observable } from 'rxjs';\r\nimport { Router } from '@angular/router'\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n  public userData: Observable<firebase.User>;\r\n\r\n  constructor(private afAuth: AngularFireAuth, private route: Router) { \r\n    this.userData = afAuth.authState;\r\n  }\r\n\r\n  registerUser(email: string, password: string){\r\n    return new Promise ((resolve, reject)=>{\r\n      this.afAuth.createUserWithEmailAndPassword(email, password)\r\n        .then(userData => \r\n          resolve(userData),\r\n          err => reject(err));\r\n    });\r\n  }\r\n\r\n  \r\n\r\n  loginByEmail(user: IUsuario){\r\n    const {email, password} = user;\r\n    this.afAuth.signInWithEmailAndPassword(email, password)\r\n    .then(res => {\r\n      console.log('Successfuly', res)\r\n      this.route.navigate(['/mis-viajes'])\r\n    })\r\n    .catch(err => \r\n      console.log('Error', err)\r\n    )\r\n  }\r\n\r\n  logOut(){\r\n    console.log('Successfuly');\r\n    this.afAuth.signOut();\r\n    localStorage.clear();\r\n    this.route.navigate(['/'])\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore, AngularFirestoreCollection, QuerySnapshot,Query } from '@angular/fire/firestore';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { Observable } from 'rxjs';\r\nimport { IViaje,Viaje, Slides, ISlides } from '../../interfaces/viaje';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class FirestoreService {\r\n  \r\n  private afs:AngularFirestoreCollection<Viaje>;\r\n  private sli:AngularFirestoreCollection<Slides>;\r\n \r\n  //private db: AngularFirestore;\r\n\r\n  constructor(private firestore: AngularFirestore,\r\n              private db:AngularFirestore,\r\n              private storage: AngularFireStorage) \r\n  {\r\n    this.afs=this.firestore.collection('Viaje');\r\n    this.sli=this.firestore.collection('Slides');\r\n    \r\n  }\r\n\r\n \r\n  public createViaje(data: IViaje):Promise<string>\r\n  {\r\n    //return this.firestore.collection<IContacto>('contactos').add({... data}).then(r=>{\r\n    //  return r.id;});   \r\n    \r\n    data.id=this.firestore.createId();\r\n    data.unidas = \"0\";\r\n    \r\n    return this.afs.doc(data.id).set({... data}).then(r=>{\r\n      return data.id;  \r\n    });\r\n  }  \r\n\r\n  public getViaje(id: string):Promise<Viaje>\r\n  {\r\n    return this.afs.doc(id).get().toPromise().then(r=>{\r\n      \r\n      var viaje = r.data() as Viaje;\r\n      return viaje;\r\n    });\r\n  }\r\n \r\n  public getViajes():Observable<Viaje[]>\r\n  {\r\n    return this.afs.valueChanges();\r\n  }  \r\n \r\n  \r\n  public updateViaje(data:Viaje)\r\n  {\r\n    console.log(\"hola\");\r\n    return this.afs.doc(data.id).set(data);\r\n  }\r\n\r\n  public removeViaje(id: string)\r\n  {\r\n    return this.afs.doc(id).delete();\r\n  }\r\n\r\n  // Los siguientes m√©todos se muestran a modo de ejemplo. No son usados en esta practica.\r\n\r\n  public getViajesSorted():Observable<Viaje[]>\r\n  {  \r\n    /*\r\n    PUEDE SER UTIL:\r\n\r\n    this.afs.ref.orderBy('nombre').onSnapshot(z=>{\r\n      z.docChanges().filter(f=>f.type===\"added\").forEach(d=>{\r\n          console.log(d.doc.data());\r\n      });\r\n    });\r\n    \r\n    this.afs.ref.orderBy('nombre').onSnapshot(z=>{\r\n      z.docs.forEach(d=>{\r\n          console.log(d.data());\r\n      });\r\n    });\r\n    */\r\n  \r\n    return this.firestore.collection<Viaje>('Viaje',ref=>ref.orderBy('ciudad')).valueChanges();\r\n  }\r\n\r\n  \r\n  public getViajesFiltered(pais:String):Observable<Viaje[]>\r\n  {  \r\n    return this.firestore.collection<Viaje>('Viaje',ref=>ref.where('pais','==',pais)).valueChanges();\r\n  }\r\n\r\n  public getViajesByEmail(email:String):Observable<Viaje[]>\r\n  {  \r\n    return this.firestore.collection<Viaje>('Viaje',ref=>ref.where('email','==',email)).valueChanges();\r\n  }\r\n\r\n  public getViajesCombined(pais:String):Observable<Viaje[]>\r\n  {  \r\n    return this.firestore.collection<Viaje>('Viaje',ref=>ref.where('pais','==',pais).orderBy(\"ciudad\")).valueChanges();\r\n  }\r\n\r\n\r\n  //Tarea para subir archivo\r\n  public storageFile(nombreArchivo: string, datos: any) {\r\n    return this.storage.upload(nombreArchivo, datos);\r\n  }\r\n\r\n  //Referencia del archivo\r\n  public getFileRef(nombreArchivo: string) {\r\n    return this.storage.ref(nombreArchivo);\r\n  }\r\n\r\n  public getSlides(idViaje: string):Observable<Slides[]>\r\n  {\r\n    return this.firestore.collection<Slides>('Slides',ref=>ref.where('idViaje','==',idViaje)).valueChanges();\r\n  } \r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore, AngularFirestoreCollection, QuerySnapshot,Query } from '@angular/fire/firestore';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { Observable } from 'rxjs';\r\nimport { IComentario,Comentario, IPuntuacion, Puntuacion } from '../../interfaces/opiniones';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OpinionesFirestoreService {\r\n\r\n  private com:AngularFirestoreCollection<Comentario>;\r\n  private pun:AngularFirestoreCollection<Puntuacion>;\r\n\r\n  constructor(private firestore: AngularFirestore,\r\n    private db:AngularFirestore,\r\n    private storage: AngularFireStorage) \r\n  {\r\n    this.com=this.firestore.collection('Comentario');\r\n    this.pun=this.firestore.collection('Puntuacion');\r\n  }\r\n\r\n  public createComentario(data: IComentario):Promise<string>\r\n  {\r\n    //return this.firestore.collection<IContacto>('contactos').add({... data}).then(r=>{\r\n    //  return r.id;});   \r\n    \r\n    data.id=this.firestore.createId();\r\n    \r\n    \r\n    return this.com.doc(data.id).set({... data}).then(r=>{\r\n      return data.id;  \r\n    });\r\n  }\r\n  public createPuntuacion(data: IPuntuacion):Promise<string>\r\n  {\r\n    //return this.firestore.collection<IContacto>('contactos').add({... data}).then(r=>{\r\n    //  return r.id;});   \r\n    \r\n    data.id=this.firestore.createId();\r\n    \r\n    \r\n    return this.pun.doc(data.id).set({... data}).then(r=>{\r\n      return data.id;  \r\n    });\r\n  }    \r\n\r\n  public getComentario(id: string):Promise<Comentario>\r\n  {\r\n    return this.com.doc(id).get().toPromise().then(r=>{\r\n      //Si quisieras forzar que se ejecute constructor de Contacto:\r\n      //return new Contacto(r.data() as IContacto);\r\n      var contacto = r.data() as Comentario;\r\n      console.log(contacto);\r\n      return contacto;\r\n    });\r\n  }\r\n  public getPuntuacion(id: string):Promise<Puntuacion>\r\n  {\r\n    return this.pun.doc(id).get().toPromise().then(r=>{\r\n      //Si quisieras forzar que se ejecute constructor de Contacto:\r\n      //return new Contacto(r.data() as IContacto);\r\n      var contacto = r.data() as Puntuacion;\r\n      console.log(contacto);\r\n      return contacto;\r\n    });\r\n  }\r\n \r\n  public getComentarios():Observable<Comentario[]>\r\n  {\r\n    return this.com.valueChanges();\r\n  }  \r\n  public getPuntuaciones():Observable<Puntuacion[]>\r\n  {\r\n    return this.pun.valueChanges();\r\n  }  \r\n \r\n  \r\n  public updateComentario(data:Comentario)\r\n  {\r\n    return this.com.doc(data.id).set(data);\r\n  }\r\n  public updatePuntuacion(data:Puntuacion)\r\n  {\r\n    return this.pun.doc(data.id).set(data);\r\n  }\r\n\r\n  public removeComentario(id: string)\r\n  {\r\n    return this.com.doc(id).delete();\r\n  }\r\n  public removePuntuacion(id: string)\r\n  {\r\n    return this.pun.doc(id).delete();\r\n  }\r\n\r\n  // Los siguientes m√©todos se muestran a modo de ejemplo. No son usados en esta practica.\r\n\r\n  public getComentariosSorted():Observable<Comentario[]>\r\n  {  \r\n    /*\r\n    PUEDE SER UTIL:\r\n\r\n    this.afs.ref.orderBy('nombre').onSnapshot(z=>{\r\n      z.docChanges().filter(f=>f.type===\"added\").forEach(d=>{\r\n          console.log(d.doc.data());\r\n      });\r\n    });\r\n    \r\n    this.afs.ref.orderBy('nombre').onSnapshot(z=>{\r\n      z.docs.forEach(d=>{\r\n          console.log(d.data());\r\n      });\r\n    });\r\n    */\r\n  \r\n    return this.firestore.collection<Comentario>('Comentario',ref=>ref.orderBy('comentador')).valueChanges();\r\n  }\r\n  public getPuntuacionesSorted():Observable<Puntuacion[]>\r\n  {  \r\n    /*\r\n    PUEDE SER UTIL:\r\n\r\n    this.afs.ref.orderBy('nombre').onSnapshot(z=>{\r\n      z.docChanges().filter(f=>f.type===\"added\").forEach(d=>{\r\n          console.log(d.doc.data());\r\n      });\r\n    });\r\n    \r\n    this.afs.ref.orderBy('nombre').onSnapshot(z=>{\r\n      z.docs.forEach(d=>{\r\n          console.log(d.data());\r\n      });\r\n    });\r\n    */\r\n  \r\n    return this.firestore.collection<Puntuacion>('Puntuacion',ref=>ref.orderBy('puntuado')).valueChanges();\r\n  }\r\n\r\n  \r\n  public getComentariosFiltered(comentado:String):Observable<Comentario[]>\r\n  {  \r\n    return this.firestore.collection<Comentario>('Comentario',ref=>ref.where('comentado','==',comentado)).valueChanges();\r\n  }\r\n\r\n  public getPuntuacionesFiltered(puntuado:String):Observable<Puntuacion[]>\r\n  {  \r\n    return this.firestore.collection<Puntuacion>('Puntuacion',ref=>ref.where('puntuado','==',puntuado)).valueChanges();\r\n  }\r\n\r\n  public getComentariosCombined(comentado:String):Observable<Comentario[]>\r\n  {  \r\n    return this.firestore.collection<Comentario>('Comentario',ref=>ref.where('comentado','==',comentado).orderBy(\"comentador\")).valueChanges();\r\n  }\r\n\r\n  public getPuntuacionesCombined(puntuado:String):Observable<Puntuacion[]>\r\n  {  \r\n    return this.firestore.collection<Puntuacion>('Puntuacion',ref=>ref.where('puntuado','==',puntuado).orderBy(\"puntuador\")).valueChanges();\r\n  }\r\n\r\n\r\n  //Tarea para subir archivo\r\n  public storageFile(nombreArchivo: string, datos: any) {\r\n    return this.storage.upload(nombreArchivo, datos);\r\n  }\r\n\r\n  //Referencia del archivo\r\n  public getFileRef(nombreArchivo: string) {\r\n    return this.storage.ref(nombreArchivo);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore, AngularFirestoreCollection, QuerySnapshot,Query } from '@angular/fire/firestore';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { Observable } from 'rxjs';\r\nimport { IUsuario,Usuario } from '../../interfaces/usuario';\r\nimport { IViaje,Viaje } from '../../interfaces/viaje';\r\nimport { ISolicitud,Solicitud } from '../../interfaces/solicitud';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SolicitudFirestoreService {\r\n\r\n  constructor(private firestore: AngularFirestore,\r\n    private db:AngularFirestore,\r\n    private storage: AngularFireStorage) \r\n  {\r\n    this.afs=this.firestore.collection('Solicitud');\r\n  }\r\n\r\n  private afs:AngularFirestoreCollection<Solicitud>;\r\n\r\n  public getSolicitud(id: string):Promise<Solicitud>\r\n  {\r\n    return this.afs.doc(id).get().toPromise().then(r=>{\r\n      var solicitud = r.data() as Solicitud;\r\n      return solicitud;\r\n    });\r\n  }\r\n\r\n  public getSolicitudesByUserId(id:String):Observable<Solicitud[]>\r\n  {  \r\n    return this.firestore.collection<Solicitud>('Solicitud',ref=>ref.where('idUsuario','==',id)).valueChanges();\r\n  }\r\n\r\n  public getSolicitudesByTripId(id:String):Observable<Solicitud[]>\r\n  {  \r\n    return this.firestore.collection<Solicitud>('Solicitud',ref=>ref.where('idViaje','==',id)).valueChanges();\r\n  }\r\n  public getSolicitudesByOrganizadorId(id:String):Observable<Solicitud[]>\r\n  {  \r\n    return this.firestore.collection<Solicitud>('Solicitud',ref=>ref.where('idOrganizador','==',id)).valueChanges();\r\n  }\r\n  public getSolicitudesByOrganizadorEmail(email:String):Observable<Solicitud[]>\r\n  {  \r\n    return this.firestore.collection<Solicitud>('Solicitud',ref=>ref.where('idOrganizador','==',email)).valueChanges();\r\n  }\r\n\r\n  public createSolicitud(data: ISolicitud):Promise<string>\r\n  {\r\n    //return this.firestore.collection<IContacto>('contactos').add({... data}).then(r=>{\r\n    //  return r.id;});   \r\n    \r\n    data.id=this.firestore.createId();\r\n    \r\n    localStorage.setItem('solicitud', data.id);\r\n       \r\n    return this.afs.doc(data.id).set({... data}).then(r=>{\r\n      return data.id;  \r\n    });\r\n\r\n  }  \r\n\r\n  public updateSolicitud(data:Solicitud)\r\n  {\r\n    return this.afs.doc(data.id).set(data);\r\n  }\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore, AngularFirestoreCollection, QuerySnapshot,Query } from '@angular/fire/firestore';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { Observable } from 'rxjs';\r\nimport { IUsuario,Usuario } from '../../interfaces/usuario';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UsuarioFirestoreService {\r\n\r\n  private afs:AngularFirestoreCollection<Usuario>;\r\n\r\n  constructor(private firestore: AngularFirestore,\r\n    private db:AngularFirestore,\r\n    private storage: AngularFireStorage) \r\n  {\r\n    this.afs=this.firestore.collection('Usuario');\r\n  }\r\n\r\n  public createUsuario(data: IUsuario):Promise<string>\r\n  {\r\n    //return this.firestore.collection<IContacto>('contactos').add({... data}).then(r=>{\r\n    //  return r.id;});   \r\n    \r\n    data.id=this.firestore.createId();\r\n    data.estrellas = \"-1\";\r\n    \r\n    localStorage.setItem('usuario', data.id);\r\n    \r\n    \r\n    return this.afs.doc(data.id).set({... data}).then(r=>{\r\n      return data.id;  \r\n    });\r\n  }  \r\n\r\n  public createUsuarioConID(data: IUsuario){\r\n    \r\n    return this.afs.doc(data.id).set({... data}).then(r=>{\r\n      return data.id;  \r\n    });\r\n  }\r\n\r\n  public getUsuario(id: string):Promise<Usuario>\r\n  {\r\n    return this.afs.doc(id).get().toPromise().then(r=>{\r\n      //Si quisieras forzar que se ejecute constructor de Contacto:\r\n      //return new Contacto(r.data() as IContacto);\r\n      var contacto = r.data() as Usuario;\r\n      return contacto;\r\n    });\r\n  }\r\n \r\n  public getUsuarios():Observable<Usuario[]>\r\n  {\r\n    return this.afs.valueChanges();\r\n  }  \r\n \r\n  \r\n  public updateUsuario(data:Usuario)\r\n  {\r\n    return this.afs.doc(data.id).set(data);\r\n  }\r\n\r\n \r\n\r\n  public removeUsuario(id: string)\r\n  {\r\n    return this.afs.doc(id).delete();\r\n  }\r\n\r\n  // Los siguientes m√©todos se muestran a modo de ejemplo. No son usados en esta practica.\r\n\r\n  public getUsuariosSorted():Observable<Usuario[]>\r\n  {  \r\n    /*\r\n    PUEDE SER UTIL:\r\n\r\n    this.afs.ref.orderBy('nombre').onSnapshot(z=>{\r\n      z.docChanges().filter(f=>f.type===\"added\").forEach(d=>{\r\n          console.log(d.doc.data());\r\n      });\r\n    });\r\n    \r\n    this.afs.ref.orderBy('nombre').onSnapshot(z=>{\r\n      z.docs.forEach(d=>{\r\n          console.log(d.data());\r\n      });\r\n    });\r\n    */\r\n  \r\n    return this.firestore.collection<Usuario>('Usuario',ref=>ref.orderBy('puntuacion')).valueChanges();\r\n  }\r\n\r\n  \r\n  public getUsuariosFiltered(id:String):Observable<Usuario[]>\r\n  {  \r\n    return this.firestore.collection<Usuario>('Usuario',ref=>ref.where('id','==',id)).valueChanges();\r\n  }\r\n\r\n  public getUsuariosByEmail(email:String):Observable<Usuario[]>\r\n  {  \r\n    return this.firestore.collection<Usuario>('Usuario',ref=>ref.where('email','==',email)).valueChanges();\r\n  }\r\n\r\n  public getusuariosCombined(pais:String):Observable<Usuario[]>\r\n  {  \r\n    return this.firestore.collection<Usuario>('Usuario',ref=>ref.where('pais','==',pais).orderBy(\"ciudad\")).valueChanges();\r\n  }\r\n\r\n\r\n  //Tarea para subir archivo\r\n  public storageFile(nombreArchivo: string, datos: any) {\r\n    return this.storage.upload(nombreArchivo, datos);\r\n  }\r\n\r\n  //Referencia del archivo\r\n  public getFileRef(nombreArchivo: string) {\r\n    return this.storage.ref(nombreArchivo);\r\n  }\r\n}\r\n","import { Component, OnInit, Input} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-boton',\r\n  templateUrl: './boton.component.html',\r\n  styleUrls: ['./boton.component.scss']\r\n})\r\nexport class BotonComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  @Input() public texto:string = \"tu texto\";\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","\r\n<button mat-raised-button color=\"primary\" style=\"height: 3em; width: 15em;\">{{texto}}</button>","import { Component, OnInit, ViewChild, Output, EventEmitter} from '@angular/core';\r\nimport { Puntuacion } from 'src/app/interfaces/opiniones';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n\r\n@Component({\r\n  selector: 'app-comentario-pu',\r\n  templateUrl: './comentario-pu.component.html',\r\n  styleUrls: ['./comentario-pu.component.scss']\r\n})\r\nexport class ComentarioPuComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  @Output() comentario: EventEmitter<string> = new EventEmitter<string>();\r\n  @Output() cerrado: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  miComentario = \"\";\r\n\r\n  getComentario(){\r\n    var cerrado = true; //tenemos que cerrar porque hemos aceptado\r\n    this.comentario.emit(this.miComentario);\r\n    this.cerrado.emit(cerrado); //como aceptamos, cerramos\r\n  }\r\n\r\n  cerrar():boolean{\r\n    var cerrado = true; //devolvemos un true para cerrar el popup\r\n    this.miComentario = \"\"; //no se ha comentado, se devuelve un vac√≠o para que no se haga el comentario\r\n    this.cerrado.emit(cerrado);\r\n    this.comentario.emit(this.miComentario);\r\n    return cerrado;\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div id=\"all\" class=\"outsider\">\r\n    <div class=\"content\">\r\n\r\n        <div class=\"cerrar\">\r\n            <img src=\"./assets/cerrar.png\" id=\"close\" (click)=\"cerrar()\">\r\n        </div>\r\n\r\n        <div class=\"formulario\">\r\n            <h1>Haz un comentario sobre este usuario</h1>\r\n        </div>\r\n        <form>\r\n            <textarea name=\"message\" [(ngModel)]=\"miComentario\"></textarea>\r\n        </form>\r\n\r\n        <div class=\"bloque-aceptar\">\r\n            <app-boton id = \"aceptar\" texto=\"Aceptar\" (click)=\"getComentario()\"></app-boton>\r\n        </div>\r\n\r\n          \r\n            \r\n        \r\n\r\n        \r\n    </div>\r\n</div>\r\n\r\n","import { Component, OnInit, ViewChild, Output, EventEmitter, Input } from '@angular/core';\r\nimport {UsuarioFirestoreService} from '../../services/firestore/usuario-firestore.service';\r\nimport { Usuario, IUsuario } from 'src/app/interfaces/usuario';\r\n\r\n@Component({\r\n  selector: 'app-edicion-pu',\r\n  templateUrl: './edicion-pu.component.html',\r\n  styleUrls: ['./edicion-pu.component.scss']\r\n})\r\nexport class EdicionPuComponent implements OnInit {\r\n\r\n  constructor( private firestoreServiceUser: UsuarioFirestoreService,) { }\r\n\r\n  @Input() public descripcion:string;\r\n  @Input() public user:Usuario;\r\n  @Output() newDescripcion: EventEmitter<string> = new EventEmitter<string>();\r\n  @Output() foto: EventEmitter<string> = new EventEmitter<string>();\r\n  @Output() cerrado: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() signal: EventEmitter<Usuario> = new EventEmitter<Usuario>();\r\n  \r\n\r\n  \r\n  miFoto = \"\";\r\n  \r\n  \r\n\r\n  setImagen(e){\r\n    this.miFoto = e;\r\n    \r\n  }\r\n\r\n  chooseImagen(){\r\n    document.getElementById(\"pedir-imagen\").style.display = \"block\";\r\n    document.getElementById(\"allContent\").style.display = \"none\";\r\n  }\r\n\r\n  save(){\r\n    var cerrado = true; //tenemos que cerrar porque hemos aceptado\r\n    this.newDescripcion.emit(this.descripcion);\r\n    this.cerrado.emit(cerrado); //como aceptamos, cerramos\r\n    this.foto.emit(this.miFoto);\r\n    this.signal.emit(this.user);\r\n  }\r\n\r\n  cerrar():boolean{\r\n    var cerrado = true; //devolvemos un true para cerrar el popup\r\n    this.descripcion = \"\"; //no se ha comentado, se devuelve un vac√≠o para que no se haga el comentario\r\n    this.miFoto = \"\"\r\n    this.cerrado.emit(cerrado);\r\n    this.newDescripcion.emit(this.descripcion);\r\n    this.foto.emit(this.miFoto);\r\n    this.signal.emit(this.user);\r\n    return cerrado;\r\n  }\r\n\r\n  cerrarPopup(e, id){\r\n    if(e == true){\r\n      document.getElementById(id).style.display = \"none\";\r\n      document.getElementById(\"allContent\").style.display = \"block\";\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  \r\n  }\r\n\r\n}\r\n","<div id=\"all\" class=\"outsider\">\r\n    \r\n\r\n    <div class=\"content\">\r\n        <app-pedir-imagen id=\"pedir-imagen\" directiva=\"users\" (cerrar)=\"cerrarPopup($event, 'pedir-imagen')\" (url)=\"setImagen($event)\"></app-pedir-imagen>\r\n        <div id=\"allContent\">\r\n            <div class=\"cerrar\">\r\n                <img src=\"./assets/cerrar.png\" id=\"close\" (click)=\"cerrar()\">\r\n            </div>\r\n\r\n            <div class=\"elementos\">\r\n                \r\n\r\n                <div class=\"form\">\r\n                    <h2>Descripci√≥n</h2>\r\n                    <textarea name=\"message\" [(ngModel)]=\"descripcion\">\r\n                       \r\n                    </textarea>\r\n                </div>\r\n\r\n                <img src=\"./assets/camera.png\" id=\"normal\" texto=\"cambiar imagen de perfil\" (click)=\"chooseImagen()\">\r\n                \r\n                <div  id=\"movil\">\r\n                    <div class=\"boton-img\">\r\n                        <h2 id=\"foto\">Cambiar foto de perfil</h2>\r\n                        <img src=\"./assets/camera.png\" (click)=\"chooseImagen()\"> Examinar\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n\r\n            <div class=\"bloque-aceptar\">\r\n                <app-boton id = \"aceptar\" texto=\"Save\" (click)=\"save()\"></app-boton>\r\n            </div>\r\n        </div>\r\n          \r\n            \r\n        \r\n\r\n        \r\n    </div>\r\n</div>\r\n\r\n\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.scss']\r\n})\r\nexport class FooterComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"main\">\r\n\t<p [routerLink]=\"['/privacidad']\" style=\"cursor: pointer;\">Politica de privacidad</p>\r\n\t<p>¬© 2020, Tripmefy SL. Todos los derechos reservados</p>\r\n</div>","import { Component, OnInit, Input, Inject} from '@angular/core';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { ActivatedRoute }  from '@angular/router';\r\nimport { Router } from '@angular/router'; //Para redirigir a una p√°gina\r\nimport {MatDialog, MatDialogRef, MAT_DIALOG_DATA} from '@angular/material/dialog';\r\nimport {SolicitudFirestoreService} from '../../services/firestore/solicitud-firestore.service';\r\nimport {UsuarioFirestoreService} from '../../services/firestore/usuario-firestore.service';\r\nimport {FirestoreService} from '../../services/firestore/firestore.service';\r\nimport { Usuario } from 'src/app/interfaces/usuario';\r\nimport { NgModule } from '@angular/core';\r\nimport { database } from 'firebase';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule, FormsModule} from '@angular/forms';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { ISolicitud,Solicitud } from '../../interfaces/solicitud';\r\n\r\nexport interface DialogData {\r\n  name: string[];\r\n}\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss']\r\n})\r\n\r\nexport class HeaderComponent implements OnInit {\r\n@Input() public titulo:string;\r\n  constructor(private authSvc : AuthService,\r\n              private firestoreServiceSolicitud:SolicitudFirestoreService,\r\n              private firestoreServiceUser: UsuarioFirestoreService,\r\n              private firestoreServiceViaje: FirestoreService,\r\n             private _route:ActivatedRoute, private route: Router, public dialog: MatDialog) {\r\n    this.titulo = \"\";\r\n   }\r\n\r\n  public menuOpen = false; //indica si el menu esta abierto. (Solo util en vista movil)\r\n\r\n  public solicitudes = [];\r\n  public numberOfSolicitudes = 0;\r\n  public mensajes = [];\r\n  public numberOfMensajes = 0;\r\n  \r\n  //Esta variable escogera el numero a mostrar (solicitudes o mensajes)->Ir a OnInit\r\n  public isViajero = false; \r\n\r\n  usuario:Usuario;\r\n  \r\n  ngOnInit(): void {\r\n\r\n    /* IMPORTANTE-> El ngOnInit se vuelve a ejecutar con cada modificaci√≥n de la bbdd en firebase */\r\n\r\n    /*  Este pedazo de c√≥digo obtiene el nombre de los nombres de las ciudades de cada una\r\n    de las solicitudes realizadas por el usuario  */\r\n\r\n    /*----------------- CASO VIAJERO--------------------- */\r\n\r\n    if(localStorage.getItem('tipo') == 'viajero'){\r\n      this.numberOfSolicitudes = 0;\r\n      this.isViajero = true;\r\n      this.firestoreServiceSolicitud.getSolicitudesByUserId(localStorage.getItem('usuario')).subscribe(res=>{\r\n        var i;\r\n        for (i = 0; i<res.length; i++){\r\n          if(res[i].estado != \"pendiente\"){\r\n            console.log(\"inicializado:onInit (getSolicitud): \", res[i].id);\r\n            var a√±adir=true;\r\n            var kk;\r\n            for (kk=0; kk<this.mensajes.length;kk++){\r\n              if(res[i].id == this.mensajes[kk].idSolicitud){\r\n                a√±adir = false;\r\n              }\r\n            }if(a√±adir==true){\r\n              this.numberOfMensajes = this.numberOfMensajes + 1;\r\n              this.mensajes.push({idSolicitud: res[i].id, idViaje: res[i].idViaje, estado: res[i].estado, nombreViaje: \"--\"});\r\n            }\r\n\r\n            this.firestoreServiceViaje.getViaje(res[i].idViaje).then((elem) => {            \r\n              var j;\r\n              for (j=0; j<this.mensajes.length;j++){\r\n                if(this.mensajes[j].idViaje == elem.id && this.mensajes[j].nombreViaje == \"--\"){\r\n                  console.log(\"inicializado:onInit (getViaje): \", elem.ciudad);\r\n                  this.mensajes[j].nombreViaje = elem.ciudad;\r\n                }\r\n              }\r\n              \r\n            });\r\n            \r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    /*  Este pedazo de c√≥digo obtiene el nombre del usuario cuyo organizador que est√° navegando\r\n        en esta p√°gina ha organizado alg√∫n viaje, de manera que posteriormente podamos imprimir\r\n        las solicitudes que deben ser aceptadas en un viaje por el organizador */\r\n\r\n    /*----------------- CASO ORGANIZADOR--------------------- */\r\n    \r\n    this.firestoreServiceUser.getUsuario(localStorage.getItem('usuario')).then((elem) => {\r\n      \r\n      var organizadorEmail = elem.email;\r\n      this.firestoreServiceSolicitud.getSolicitudesByOrganizadorEmail(organizadorEmail).subscribe(res=>{\r\n        var i; \r\n        for (i = 0; i<res.length ; i++){\r\n          if (res[i].estado==\"pendiente\"){\r\n            console.log(\"inicializado:onInit (getSolicitud): \", res[i].id);\r\n            var a√±adir=true;\r\n            var kk;\r\n            for (kk=0; kk<this.solicitudes.length;kk++){\r\n              if(res[i].id == this.solicitudes[kk].idSolicitud){\r\n                a√±adir = false;\r\n              }\r\n            }\r\n            if(a√±adir==true){\r\n              this.numberOfSolicitudes = this.numberOfSolicitudes + 1;\r\n              this.solicitudes.push({nombre: \"--\", idSolicitud: res[i].id, idViajero: res[i].idUsuario});\r\n            }\r\n            //Nos quedamos con el nombre y el id del usuario de nuestras solicitudes:\r\n            this.firestoreServiceUser.getUsuario(res[i].idUsuario).then((elem) => { \r\n              var j;\r\n              for (j=0; j<this.solicitudes.length;j++){\r\n                if(this.solicitudes[j].idViajero == elem.id && this.solicitudes[j].nombre == \"--\"){\r\n                  this.solicitudes[j].nombre = elem.nombre;\r\n                  console.log(\"inicializado:onInit (getUser): \", elem.nombre);\r\n                }\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    });  \r\n    \r\n  }\r\n\r\n  /* Redirigir a la p√°gina de perfil pulsando sobre perfil */\r\n\r\n  irPerfil(){\r\n\r\n    //  Obtenemos la parte de la izquierda de la url\r\n    var origin = window.location.origin + '/'; \r\n    var primero;\r\n    /**\r\n    if(localStorage.getItem('tipo') == 'organizador'){\r\n      primero = 'perfil-organizador/';\r\n    }else{\r\n      primero = 'perfil-viajero/';\r\n    }\r\n    \r\n    var segundo = localStorage.getItem('usuario');\r\n    var destino = origin + primero + segundo;\r\n    window.location.assign(destino);\r\n    **/\r\n   var perfil = localStorage.getItem('usuario');\r\n   if(localStorage.getItem('tipo') == 'organizador'){\r\n     var ruta = '/perfil-organizador/' + perfil;\r\n    this.route.navigate([ruta]);\r\n   }else{\r\n    var ruta = '/perfil-viajero/' + perfil;\r\n    this.route.navigate([ruta]);\r\n   }\r\n  }\r\n\r\n  /* Redirigir a la p√°gina de privacidad pulsando sobre about us*/\r\n\r\n  irAboutUs(){ \r\n    //  Obtenemos la parte de la izquierda de la url\r\n  \r\n    this.route.navigate(['/privacidad']);\r\n  }\r\n\r\n  toInicio(){\r\n    this.route.navigate(['/mis-viajes']);\r\n  }\r\n\r\n  onLogout():void{\r\n    this.authSvc.logOut();\r\n  }\r\n\r\n  /* Esta funci√≥n rellena los arrays de solicitudes o de mensajes dependiendo de \r\n     si el usuario es organizador o viajero, de tal forma que sea posible mostrale\r\n     notificaciones significativas. \r\n\r\n     IMPORTANTE!! SE USA SOLO CUANDO QUEREMOS OBTENER INFORMACI√ìN DE LAS SOLICITUDES DE LA \r\n     BASE DE DATOS COMO EL ESTADO DE LA SOLICITUD O LOS IDS. La informacion relativa a estos\r\n     ids la captamos anteriormente en el OnInit */\r\n  \r\n  onNotification():void{\r\n\r\n    /*----------------- CASO ORGANIZADOR--------------------- */\r\n\r\n    if(localStorage.getItem('tipo') == 'organizador'){\r\n      \r\n      document.getElementById(\"myForm\").style.display = \"block\";\r\n\r\n    /*----------------- CASO VIAJERO--------------------- */\r\n\r\n    }else if(localStorage.getItem('tipo') == 'viajero'){\r\n      \r\n      document.getElementById(\"myFormViajero\").style.display = \"block\";\r\n    }\r\n    //console.log(this.mensajes[0].idViaje);\r\n  }\r\n\r\n  /* Esta pareja de funciones se encarga de limpiar los arrays para que no se acumulen los resultados\r\n    y de cerrar los popups asociados. */\r\n\r\n  close():void {\r\n    document.getElementById(\"myForm\").style.display = \"none\";\r\n  }\r\n\r\n  close1():void {\r\n    document.getElementById(\"myFormViajero\").style.display = \"none\";\r\n  }\r\n\r\n  showMenuMovil():void{\r\n    if (this.menuOpen == false){\r\n      document.getElementById(\"myFormMenu\").style.display = \"block\";\r\n      this.menuOpen = true;\r\n    }else if(this.menuOpen == true){\r\n      document.getElementById(\"myFormMenu\").style.display = \"none\";\r\n      this.menuOpen = false;\r\n    }else{\r\n      console.log(\"error->Menu movil\");\r\n    }\r\n    \r\n  }\r\n\r\n  /* Funci√≥n que acepta a alguien en un viaje desde la vista del organizador*/\r\n\r\n  accept(id:string):void{\r\n    console.log(\"Has aceptado\");\r\n    //Borramos de la lista de solicitudes del organizador\r\n    var i;\r\n    for (i = 0; i<this.solicitudes.length;i++){\r\n      if(this.solicitudes[i].idSolicitud == id){\r\n        this.solicitudes.splice(i, 1);\r\n\r\n        /*Ponemos a 0 debido a que todos los valores del array \r\n        son inicializados de nuevo en el OnInit, por tanto el n√∫mero a mostrar\r\n        estara siempre actualizado */\r\n        this.numberOfSolicitudes = 0;  \r\n      }\r\n    }\r\n\r\n    //Actualizamos la solicitud en la base de datos\r\n    var new_solicitud:Solicitud = new Solicitud();\r\n    this.firestoreServiceSolicitud.getSolicitud(id).then((elem) => {\r\n      new_solicitud = elem;\r\n      new_solicitud.estado = \"aceptado\";\r\n      this.firestoreServiceSolicitud.updateSolicitud(new_solicitud);\r\n    });\r\n  }\r\n\r\n  /* Funci√≥n que rechaza a alguien en un viaje desde la vista del organizador, \r\n     el viajero se queda en casa. */\r\n\r\n  aCasa(id:string):void{\r\n    console.log(\"Has rechazado\");\r\n    //Borramos de la lista de solicitudes del organizador\r\n    var i;\r\n    for (i = 0; i<this.solicitudes.length;i++){\r\n      if(this.solicitudes[i].idSolicitud == id){\r\n        this.solicitudes.splice(i, 1);\r\n\r\n        /*Ponemos a 0 debido a que todos los valores del array \r\n        son inicializados de nuevo en el OnInit, por tanto el n√∫mero a mostrar\r\n        estara siempre actualizado */\r\n        this.numberOfSolicitudes = 0;\r\n      }\r\n    }\r\n    //Actualizamos la solicitud en la base de datos\r\n    var new_solicitud:Solicitud = new Solicitud();\r\n    this.firestoreServiceSolicitud.getSolicitud(id).then((elem) => {\r\n      new_solicitud = elem;\r\n      new_solicitud.estado = \"rechazado\";\r\n      this.firestoreServiceSolicitud.updateSolicitud(new_solicitud);\r\n    });\r\n  }\r\n\r\n   /*  Funci√≥n que une actualiza en la solicitud de la persona el estado de aceptado a pagado\r\n      Se activa al pinchar sobre el bot√≥n de pagar */\r\n\r\n      pagar(id:string){\r\n        var i;\r\n        for (i = 0; i<this.mensajes.length;i++){\r\n          if(this.mensajes[i].idViaje == id){\r\n            // SI QUEREMOS QUE SE ELIMINE EL MENSAJE NADA MAS DARLE AL BOTON DE PAGAR DESCOMENTAR ESTO\r\n            //this.mensajes.splice(i, 1);  \r\n            //this.numberOfMensajes = 0;\r\n            this.mensajes[i].estado = \"pagado\";\r\n          }\r\n        }\r\n\r\n        this.firestoreServiceSolicitud.getSolicitudesByTripId(id).subscribe(res=>{\r\n          var i;\r\n          var new_solicitud:Solicitud = new Solicitud();\r\n          for(i=0; i<res.length; i++){\r\n            if(res[i].idUsuario == localStorage.getItem('usuario')){\r\n              new_solicitud = res[i];\r\n              new_solicitud.estado = \"pagado\";\r\n              console.log(\"Paso a pagar\")\r\n              this.firestoreServiceSolicitud.updateSolicitud(new_solicitud);\r\n            }\r\n          }  \r\n        });\r\n      }\r\n}","<div class=\"content\">\r\n    <div class=\"menu-izq\">\r\n      <p *ngIf=\"isViajero\" (click)=\"onNotification()\" class=\"menu-icon\"> \r\n        <mat-icon matBadge=\"{{numberOfMensajes}}\" matBadgeColor=\"warn\">question_answer</mat-icon>\r\n      </p>\r\n      <p *ngIf=\"isViajero == false\" (click)=\"onNotification()\" class=\"menu-icon\">\r\n        <mat-icon matBadge=\"{{numberOfSolicitudes}}\" matBadgeColor=\"warn\">question_answer</mat-icon>\r\n      </p>\r\n      <!-- <img src=\"../../../assets/notificacion.png\">  -->      \r\n    </div>\r\n    <div class=\"centro\">\r\n        <img (click)=\"toInicio()\" src=\"./assets/tripmefy2.png\">\r\n    </div>\r\n    <div class=\"menu-lateral\">\r\n        <p *ngIf=\"isViajero\" (click)=\"onNotification()\" class=\"menu-icon\"> \r\n            <mat-icon matBadge=\"{{numberOfMensajes}}\" matBadgeColor=\"warn\">question_answer</mat-icon>\r\n        </p>\r\n        <p *ngIf=\"isViajero == false\" (click)=\"onNotification()\" class=\"menu-icon\">\r\n          <mat-icon matBadge=\"{{numberOfSolicitudes}}\" matBadgeColor=\"warn\">question_answer</mat-icon>\r\n        </p>\r\n        <p (click)=\"onLogout()\" class=\"menu\">Logout</p>\r\n        <p class=\"menu\" (click)=\"irPerfil()\">Perfil</p>\r\n        <p class=\"menu\" routerLink=\"/logros\">Logros</p>\r\n        <p  class=\"menu\" (click)=\"irAboutUs()\">About Us</p>\r\n        \r\n        <img src=\"./assets/menu.png\" (click)=\"showMenuMovil()\">\r\n    </div>\r\n</div>\r\n<div class=\"titulo\">\r\n    <h1>{{titulo}}</h1>\r\n</div>\r\n\r\n\r\n<div class=\"form-popup\" id=\"myForm\">\r\n    <form action=\"/action_page.php\" class=\"form-container\">\r\n      <h1><b>Tus notificaciones</b></h1>\r\n      <br>\r\n      <div class=\"mensaje\" *ngFor=\"let solicitud of solicitudes\">\r\n\r\n        <!--Usamos este if para evitar fallos de inicializaciones multiples del array al actualizar la bbdd -->\r\n        <div *ngIf=\"solicitud.idSolicitud != '--'\"> \r\n          <div class=\"nombre_individuo\">\r\n            <b>{{solicitud.nombre}} </b>\r\n          </div>\r\n          <div class=\"eleccion1\"> <!--Aceptar la solicitud-->\r\n            <mat-icon (click)=\"accept(solicitud.idSolicitud)\" style=\"cursor:pointer\">done_outline</mat-icon>\r\n          </div>\r\n          <div class=\"eleccion2\"> <!--Declinar la solicitud-->\r\n            <mat-icon (click)=\"aCasa(solicitud.idSolicitud)\" style=\"cursor:pointer\">highlight_off</mat-icon>\r\n          </div>\r\n          <hr>\r\n        </div>\r\n\r\n      </div>\r\n      <br>\r\n      <button type=\"button\" class=\"btn cancel\" (click)=\"close()\">Close</button> \r\n    </form>\r\n</div>\r\n\r\n<div class=\"form-popup\" id=\"myFormViajero\">\r\n  <form action=\"/action_page.php\" class=\"form-container\">\r\n    <h1><b>Tus notificaciones</b></h1>\r\n    <br>\r\n    <div class=\"mensaje\" *ngFor=\"let mensaje of mensajes\">\r\n      \r\n      <!--Usamos este if para evitar fallos de inicializaciones multiples del array al actualizar la bbdd -->\r\n      <div *ngIf=\"mensaje.idViaje != '--'\">\r\n        <div *ngIf=\"mensaje.estado == 'aceptado' || mensaje.estado == 'pagado'\" class=\"nombre_individuoViajero\">\r\n          <b>Viaje a {{mensaje.nombreViaje}} aceptado</b>\r\n        </div>\r\n        <div *ngIf=\"mensaje.estado == 'rechazado'\" class=\"nombre_individuoViajero\">\r\n          <b>Lo sentimos, su solicitud para {{mensaje.nombreViaje}} ha sido denegada :(</b>\r\n        </div>\r\n        <div *ngIf=\"mensaje.estado == 'aceptado'\" class=\"eleccion1Viajero\">\r\n          <button (click)=\"pagar(mensaje.idViaje)\" mat-raised-button color=\"primary\" style=\"height: 3em; width: 10em;\">Pagar</button>\r\n       </div>\r\n       <div *ngIf=\"mensaje.estado == 'pagado'\" class=\"eleccion1Viajero\">\r\n        <button mat-stroked-button disabled style=\"height: 3em; width: 10em;\">Ya has pagado</button>\r\n        </div>\r\n        <hr>\r\n      </div>\r\n        \r\n    </div>\r\n    <br>\r\n    <button type=\"button\" class=\"btn cancel\" (click)=\"close1()\">Close</button> \r\n  </form>\r\n</div>\r\n\r\n<div class=\"form-popup\" id=\"myFormMenu\">\r\n  <form action=\"/action_page.php\" class=\"form-container\">\r\n    <h1><b>Menu</b></h1>\r\n    <hr>\r\n    <p (click)=\"onLogout()\" class=\"menu\">Logout</p>\r\n    <p class=\"menu\" (click)=\"irPerfil()\">Perfil</p>\r\n    <p class=\"menu\" routerLink=\"/logros\">Logros</p>\r\n    <p  class=\"menu\" (click)=\"irAboutUs()\">About Us</p>\r\n   \r\n\r\n    <button type=\"button\" class=\"btn cancel\" (click)=\"showMenuMovil()\">Close</button> \r\n  </form>\r\n</div>\r\n","import { Component, OnInit, ViewChild, Output, EventEmitter, Input} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-mensaje',\r\n  templateUrl: './mensaje.component.html',\r\n  styleUrls: ['./mensaje.component.scss']\r\n})\r\nexport class MensajeComponent implements OnInit {\r\n  @Output() cerrado: EventEmitter<any> = new EventEmitter<any>();\r\n  @Input() public mensaje;\r\n  @Input() public imagen = '';\r\n\r\n  constructor() { }\r\n\r\n  cerrar():boolean{\r\n    var cerrado = true; //devolvemos un true para cerrar el popup\r\n    this.cerrado.emit(cerrado);\r\n    return cerrado;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div id=\"all\" class=\"outsider\">\r\n    <div class=\"content\">\r\n\r\n        <div class=\"cerrar\">\r\n            <img src=\"./assets/cerrar.png\" id=\"close\" (click)=\"cerrar()\">\r\n        </div>\r\n\r\n        <div class=\"formulario\">\r\n            <div class=\"mensaje\"><h1 *ngIf=\"mensaje !=''\">{{mensaje}}</h1></div>\r\n            <div class=\"imagen\"><img *ngIf=\"imagen !=''\" src=\"{{imagen}}\"></div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n","import { Component, OnInit, Input, OnDestroy, ElementRef, ViewChild, Output, EventEmitter } from '@angular/core';\r\nimport { ActivatedRoute }  from '@angular/router';\r\nimport {Router} from '@angular/router';\r\nimport {FirestoreService} from '../../services/firestore/firestore.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {Viaje, IViaje} from '../../interfaces/viaje';\r\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport {finalize} from 'rxjs/operators';\r\nimport { FormsModule } from '@angular/forms';\r\n//import { EventEmitter } from 'protractor';\r\n\r\n@Component({\r\n  selector: 'app-pedir-imagen',\r\n  templateUrl: './pedir-imagen.component.html',\r\n  styleUrls: ['./pedir-imagen.component.scss']\r\n})\r\nexport class PedirImagenComponent implements OnInit {\r\n\r\n  @ViewChild('imageUser') inputImageUser;\r\n  uploadPercent: Observable<number>;\r\n  urlImage: Observable<string>;\r\n  myUrl = \"\";\r\n  \r\n  @Input() public directiva:string;\r\n  @Output() url: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() cerrar: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  constructor(private _route:ActivatedRoute,\r\n    private _router: Router,\r\n    private storage: AngularFireStorage,\r\n    private firestoreService: FirestoreService\r\n    ) {\r\n      this.myUrl = \"\";\r\n     }\r\n\r\n  onUpload(e){\r\n    const id = Math.random().toString(36).substring(2); //generamos un id aleatorio para que no haya nombres repetidos\r\n    const file = e.target.files[0]; //cogemos el fichero que ha subido el usuario\r\n    const filePath = `${this.directiva}/${id}`; //utilizamos literales para meter el id\r\n    const ref = this.firestoreService.getFileRef(filePath);\r\n    const task = this.firestoreService.storageFile(filePath, file);\r\n\r\n    //console.log(ref.getDownloadURL());\r\n    this.uploadPercent = task.percentageChanges();\r\n    task.snapshotChanges().pipe(finalize(() => {\r\n        this.urlImage = ref.getDownloadURL();\r\n        \r\n    }\r\n      )).subscribe();\r\n    \r\n    \r\n   }\r\n  getURL(){\r\n    var url = this.inputImageUser.nativeElement.value;\r\n    this.url.emit(url);\r\n    this.cerrar.emit(true);\r\n    alert(\"La imagen se ha subido correctamente\");\r\n    return url;\r\n  }\r\n\r\n  doCerrar(){\r\n    this.cerrar.emit(true);\r\n    this.url.emit(\"\");\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div id=\"all\" class=\"outsider\">\r\n    <div class=\"content\">\r\n\r\n        <div class=\"cerrar\">\r\n            <img src=\"./assets/cerrar.png\" id=\"close\" (click)=\"doCerrar()\">\r\n        </div>\r\n\r\n        <div class=\"formulario\">\r\n            <label id=\"titulo\" for=\"file\"><h1>Selecciona una imagen</h1></label>\r\n            <input type=\"file\" id=\"file\" (change)=\"onUpload($event)\">\r\n        </div>\r\n\r\n\r\n        <div class=\"progress\">\r\n            <div class=\"progress-bar\" role=\"progressbar\" [style.width]=\"( uploadPercent | async) + '%'\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n        </div>\r\n\r\n\r\n        <input #imageUser type=\"hidden\"  [value]=\"urlImage | async\" >\r\n\r\n        <div class=\"boton\">\r\n            <button *ngIf=\"urlImage | async; \" type=\"submit\" (click)=\"getURL()\">Subir</button>\r\n            <!--<button *ngIf=\"urlImage | async; else btnDisabled\" type=\"submit\" (click)=\"getURL()\">Crear</button>-->\r\n            <ng-template #btnDisabled>\r\n                <!--<button type=\"submit\" disabled=true>Crear</button>-->\r\n                <!--<app-boton type=\"submit\" disabled=true texto=\"Aceptar\"></app-boton>-->\r\n            </ng-template>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, ViewChild, Output, EventEmitter} from '@angular/core';\r\nimport { Puntuacion } from 'src/app/interfaces/opiniones';\r\n\r\n@Component({\r\n  selector: 'app-puntuacion-pu',\r\n  templateUrl: './puntuacion-pu.component.html',\r\n  styleUrls: ['./puntuacion-pu.component.scss']\r\n})\r\nexport class PuntuacionPuComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  @Output() puntuacion: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() cerrado: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  estrellas = [false, false, false, false, false];\r\n  estable = -1;\r\n\r\n  getPuntuacion(){\r\n    var puntuacion = 0;\r\n    var i = 0;\r\n    var cerrado = true;\r\n    for (i; i < this.estrellas.length ; i++){\r\n      if(this.estrellas[i] == true){\r\n        puntuacion = puntuacion + 1; //si es verdadera sumamos un punto\r\n      }\r\n      else{\r\n        this.puntuacion.emit(puntuacion);\r\n        return puntuacion; //si una es falsa sus siguientes tambien\r\n      }\r\n    }\r\n    this.puntuacion.emit(puntuacion);\r\n    this.cerrado.emit(cerrado); //como aceptamos, cerramos\r\n    return puntuacion; //devolvemos la puntuacion\r\n  }\r\n\r\n  cerrar():boolean{\r\n    var cerrado = true; //devolvemos un true para cerrar el popup\r\n    var puntuacion = -1; //no se ha puntuado, se devuelve un -1 para que no se haga la puntuaci√≥n\r\n    this.cerrado.emit(cerrado);\r\n    this.puntuacion.emit(puntuacion);\r\n    return cerrado;\r\n  }\r\n\r\n  rellenar(i){\r\n    if(this.estable == -1){\r\n      for (i; i>= 0; i--){\r\n        this.estrellas[i] = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  vaciar(i){\r\n    if(this.estable == -1){\r\n      var j;\r\n    for (j = i; j>= 0; j--){\r\n      this.estrellas[j] = false;\r\n    }\r\n    }\r\n  }\r\n\r\n  establecer(i){\r\n    \r\n    \r\n    if(this.estable == -1){\r\n      //si no hay ninguna estrella fija, se fija la que se ha pasado y se rellenan las anteriores\r\n      this.estable = i;\r\n      for (i; i>= 0; i--){\r\n        this.estrellas[i] = true;\r\n      }\r\n    }\r\n    else if (this.estable == i){\r\n      //si ya hay una estrella fija y es sobre la que se ha pulsado, se desfija esa estrella y se vac√≠an todas\r\n      this.estable = -1;\r\n      for (i; i>= 0; i--){\r\n        this.estrellas[i] = false;\r\n      }\r\n    }\r\n    else{\r\n      //si ya hay una estrella vac√≠a, pero es diferente a la que se ha pulsado, se desfija, se fija la nueva\r\n      //se vac√≠an todas y se rellena hasta la nueva\r\n      var j = 0;\r\n      for (j; j<this.estrellas.length ; j++){\r\n        this.estrellas[j] = false;\r\n      }//vaciar todo\r\n\r\n      this.estable = i; //establecer la nueva\r\n\r\n      for (i; i>= 0; i--){\r\n        this.estrellas[i] = true;\r\n      }//rellenar hasta i\r\n    }\r\n    \r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div id=\"all\" class=\"outsider\">\r\n    <div class=\"content\">\r\n\r\n        <div class=\"cerrar\">\r\n            <img src=\"./assets/cerrar.png\" id=\"close\" (click)=\"cerrar()\">\r\n        </div>\r\n\r\n        <div class=\"formulario\">\r\n            <h1>¬øQu√© tal fue el viaje?</h1>\r\n        </div>\r\n        <div class=\"bloque-estrellas\">\r\n            <div class=\"estrellas\" *ngFor=\"let i of [0, 1, 2, 3, 4]\">\r\n                <img *ngIf=\"estrellas[i] == true\" src=\"./assets/star.png\" (mouseout)='vaciar(i)' (click)=\"establecer(i)\">\r\n                <img *ngIf=\"estrellas[i] == false\" src=\"./assets/empty_star.png\" (mouseover)='rellenar(i)' (click)=\"establecer(i)\">\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"bloque-aceptar\">\r\n            <app-boton id = \"aceptar\" texto=\"Aceptar\" (click)=\"getPuntuacion()\"></app-boton>\r\n        </div>\r\n\r\n          \r\n            \r\n        \r\n\r\n        \r\n    </div>\r\n</div>\r\n","import { Component, OnInit, HostListener  } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-scroll-top',\r\n  templateUrl: './scroll-top.component.html',\r\n  styleUrls: ['./scroll-top.component.scss']\r\n})\r\nexport class ScrollTopComponent implements OnInit {\r\n  navIsFixed: boolean;\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  @HostListener(\"window:scroll\", [])\r\n  onWindowScroll() {\r\n      if (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop > 100) {\r\n          this.navIsFixed = true;\r\n      } else if (this.navIsFixed && window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop < 10) { this.navIsFixed = false; } } scrollToTop() { (function smoothscroll() { var currentScroll = document.documentElement.scrollTop || document.body.scrollTop; if (currentScroll > 0) {\r\n              window.requestAnimationFrame(smoothscroll);\r\n              window.scrollTo(0, currentScroll - (currentScroll / 5));\r\n          }\r\n      })();\r\n  }\r\n}\r\n","<div class=\"scroll-to-top\" [ngClass]=\"{'show-scroll': navIsFixed}\">\r\n    <img   (click)=\"scrollToTop()\" class=\"scroll-top\" src=\"../../../assets/avion.png\" title=\"Ir arriba\">\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-volver',\r\n  templateUrl: './volver.component.html',\r\n  styleUrls: ['./volver.component.scss']\r\n})\r\nexport class VolverComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n\r\n","<div class=\"volver\">\r\n    <img src=\"./assets/volver.png\"> <h1>Volver</h1>\r\n</div>","import { UsuarioFirestoreService } from './../../services/firestore/usuario-firestore.service';\r\nimport { Viaje } from './../../interfaces/viaje';\r\nimport { FirestoreService } from './../../services/firestore/firestore.service';\r\nimport { Component, OnInit, Output, EventEmitter, } from '@angular/core';\r\nimport { Router } from '@angular/router'; //Para redirigir a una p√°gina\r\n\r\n\r\n@Component({\r\n  selector: 'app-crear-viaje',\r\n  templateUrl: './crear-viaje.component.html',\r\n  styleUrls: ['./crear-viaje.component.scss']\r\n})\r\nexport class CrearViajeComponent implements OnInit {\r\n\r\n  @Output() foto: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  constructor(private route: Router, private viajeService: FirestoreService, private userService: UsuarioFirestoreService) { \r\n   \r\n  }\r\n\r\n  ngOnInit(): void {\r\n     if(!localStorage.getItem('usuario') || 0 === localStorage.getItem('usuario').length){\r\n      this.route.navigate(['/page1']);\r\n    }\r\n    this.userService.getUsuariosFiltered(localStorage.getItem('usuario')).subscribe(res=>{\r\n        this.email = res[0].email;      \r\n    })\r\n  }\r\n\r\n\r\n\r\n  continentes = [\"Europa\", \"Asia\" ,\"America del Norte\" ,\"America del Sur\",\"America Central\",\r\n  \"Oceania\",\"Africa\"];\r\n\r\n  europa = ['Espa√±a', 'Francia', 'Italia', 'Suecia', 'Alemania'];\r\n  asia = ['Kazajist√°n', 'China', 'Corea del Norte', 'Corea del Sur', 'Jap√≥n'];\r\n  americaNorte = ['Canada', 'EEUU'];\r\n  americaSur = ['Colombia', 'Venezuela', 'Argentina', 'Per√∫', 'Ecuador'];\r\n  americaCentro = ['Costa Rica', 'Salvador', 'Guatemala'];\r\n  oceania = ['Australia', 'Nueva Zelanda'];\r\n  africa = ['Argelia,', 'Camer√∫n', 'Burkina Fasso', 'Egipto', 'Marruecos'];\r\n\r\n  paises = [];\r\n\r\n  public continenteSelect: string = \"\";\r\n  public paisSelect: string = \"\";\r\n  public ciudadSelect: string = \"\";\r\n  public startDate: string = \"\";\r\n  public endDate: string = \"\";\r\n  public limitDate: string = \"\";\r\n  public limitPayDate: string = \"\";\r\n  public desc: string = \"\";\r\n  public email: string = \"\";\r\n  public telefono: string = \"\";\r\n  public prefijo:string = \"\";\r\n  public item:string = \"\";\r\n  public precio:string = \"\";\r\n  public maxpers:string = \"\";\r\n  public vuelo:boolean = false;\r\n  public alojamiento:boolean = false;\r\n  public comidas:boolean = false;\r\n  public miFoto = \"\";\r\n\r\n\r\n  onCreate(){\r\n    \r\n    var newViaje:Viaje = new Viaje();\r\n    newViaje.ciudad = this.ciudadSelect;\r\n    newViaje.continente = this.continenteSelect;\r\n    newViaje.descripcion = this.desc;\r\n    newViaje.email = this.email; \r\n    newViaje.fin = this.endDate;\r\n    newViaje.img = this.miFoto;\r\n    newViaje.inicio = this.startDate\r\n    newViaje.limitePago = this.limitPayDate;\r\n    newViaje.limiteUnion = this.limitDate;\r\n    newViaje.maximo = this.maxpers;\r\n    newViaje.pais = this.paisSelect;\r\n    newViaje.precio = this.precio;\r\n    newViaje.tlf = '+' + this.prefijo + ' ' + this.telefono;\r\n    newViaje.servicios = '';\r\n    newViaje.viajeros = '';\r\n  \r\n    if(this.vuelo){\r\n      newViaje.servicios += 'Vuelo,';\r\n    }\r\n    if(this.alojamiento){\r\n      newViaje.servicios += 'Alojamiento,';\r\n    }\r\n    if(this.comidas){\r\n      newViaje.servicios += 'Comidas,';\r\n    }\r\n    alert(\"El viaje se ha creado correctamente\");\r\n    this.viajeService.createViaje(newViaje);\r\n    this.route.navigate(['/mis-viajes']);\r\n  }\r\n\r\n\r\n  chooseImagen(){\r\n    document.getElementById(\"pedir-imagen\").style.display = \"block\";\r\n    document.getElementById(\"general\").style.display = \"none\";\r\n  }\r\n\r\n  setImagen(e){\r\n    this.miFoto = e;\r\n    \r\n  }\r\n\r\n  cerrarPopup(e, id){\r\n    if(e == true){\r\n      document.getElementById(id).style.display = \"none\";\r\n      document.getElementById(\"general\").style.display = \"block\";\r\n    }\r\n  }\r\n\r\n  back(){\r\n    this.route.navigate(['/mis-viajes']);\r\n  }\r\n\r\n  getPais(){\r\n    \r\n    if(this.continenteSelect===''){\r\n      return this.paises;\r\n    }\r\n    if(this.continenteSelect === 'Europa'){\r\n      return this.europa;\r\n    }else if(this.continenteSelect === 'Asia'){\r\n        return this.asia;\r\n    }else if(this.continenteSelect === 'America del Norte'){\r\n       return  this.americaNorte;\r\n    }else if(this.continenteSelect === 'America del Sur'){\r\n      return  this.americaSur;\r\n    }else if(this.continenteSelect ==='America Central'){\r\n      return  this.americaCentro;\r\n    }else if(this.continenteSelect ==='Oceania'){\r\n      return  this.oceania;\r\n    }else if(this.continenteSelect === 'Africa'){\r\n      return this.africa;\r\n    }else{\r\n      return this.paises;\r\n    }\r\n  \r\n  }\r\n\r\n  checkFields(){\r\n  \r\n    if (this.ciudadSelect==='' || this.continenteSelect==='' || this.desc==='' || \r\n    this.endDate==='' || this.startDate==='' || this.limitPayDate==='' || this.limitDate==='' \r\n    || this.maxpers === '' || this.precio === '' || this.paisSelect === '' || this.telefono === '' || this.prefijo===''){\r\n      \r\n      document.getElementById(\"error\").style.display=\"block\";\r\n      document.getElementById(\"error_img\").style.display=\"block\";\r\n      document.getElementById(\"error1\").style.display=\"block\";\r\n      document.getElementById(\"error2\").style.display=\"none\";\r\n      document.getElementById(\"error3\").style.display=\"none\";\r\n      return true;\r\n    }else if(this.miFoto===''){\r\n      document.getElementById(\"error\").style.display=\"block\";\r\n      document.getElementById(\"error_img\").style.display=\"block\";\r\n      document.getElementById(\"error2\").style.display=\"block\";\r\n      document.getElementById(\"error1\").style.display=\"none\";\r\n      document.getElementById(\"error3\").style.display=\"none\";\r\n      return true;\r\n    }else if (this.telefono.length<9 || this.prefijo.length<2){\r\n      document.getElementById(\"error\").style.display=\"block\";\r\n      document.getElementById(\"error_img\").style.display=\"block\";\r\n      document.getElementById(\"error3\").style.display=\"block\";\r\n      document.getElementById(\"error2\").style.display=\"none\";\r\n      document.getElementById(\"error1\").style.display=\"none\";\r\n      return true;\r\n    }else{\r\n      document.getElementById(\"error\").style.display=\"none\";\r\n      document.getElementById(\"error_img\").style.display=\"none\";\r\n      document.getElementById(\"error3\").style.display=\"none\";\r\n      document.getElementById(\"error2\").style.display=\"none\";\r\n      document.getElementById(\"error1\").style.display=\"none\";\r\n      return false;\r\n    } \r\n  }\r\n\r\n\r\n}\r\n","<app-header titulo=\"CREAR VIAJE\"></app-header>\r\n<div class=\"sub-cabecera\">\r\n\t<app-volver (click)='back()'></app-volver>\r\n\t<img id=\"error_img\" src=\"../../../assets/warning.png\">\r\n\t<div id=\"error\">\r\n\t\t<h3 id=\"error1\">Por favor introduce todos los campos</h3>\r\n\t\t<h3 id=\"error2\">Por favor carga una imagen</h3>\r\n\t\t<h3 id=\"error3\">La longitud del telefono debe ser 6 y la de la extension 2</h3>\r\n\t</div>\r\n</div>\r\n\r\n<app-pedir-imagen id=\"pedir-imagen\" directiva=\"users\" (cerrar)=\"cerrarPopup($event, 'pedir-imagen')\" (url)=\"setImagen($event)\"></app-pedir-imagen>\r\n<div id=\"general\">\r\n\t<form (ngSubmit)=\"onCreate()\"> \r\n\t\t<div id=\"div1\">\r\n\t\t\t<mat-card style=\"height: 220px; vertical-align: middle; text-align: center;\">\r\n\t\t\t\t<div class=\"up\">\r\n\t\t\t\t<img src=\"../../../assets/plus.png\" (click)=\"chooseImagen()\"  style=\"display: block; margin-left: auto; margin-right: auto; cursor: pointer;\" height=\"100px\" width=\"100px\"/>\r\n\t\t\t\t</div>\r\n\t\t\t</mat-card>\r\n\r\n\t\t\t<h1 style=\"margin-top: 3%;\">A√±ade una imagen para tu viaje</h1>\r\n\t\t\t<br>\r\n\t\t\t<h2 style=\"display: inline-block; margin-right:20px ;\">Establece un precio: </h2>\r\n\r\n\t\t\t<mat-form-field appearance=\"fill\">\r\n\t\t\t\t<mat-label>Amount</mat-label>\r\n\t\t\t\t<input matInput type=\"number\" class=\"example-right-align \" [(ngModel)]=\"precio\" name=\"precio\" required>\r\n\t\t\t\t<span matPrefix>‚Ç¨&nbsp;</span>\r\n\t\t\t</mat-form-field>\r\n\r\n\t\t\t<br>\r\n\t\t\t<h2 style=\"display: inline-block; margin-right:20px ;\">M√°ximo de participantes: </h2>\r\n\t\t\t<mat-form-field appearance=\"fill\" id=\"maximo\">\r\n\t\t\t\t<mat-label>M√°ximo</mat-label>\r\n\t\t\t\t<input matInput type=\"number\" class=\"example-right-align \" [(ngModel)]=\"maxpers\" name=\"maxpers\" required>\r\n\t\t\t\t<span matPrefix></span>\r\n\t\t\t</mat-form-field>\r\n\t\t\t<br>\r\n\r\n\t\t\t<h2> El precio incluye...</h2>\r\n\t\t\t<mat-checkbox style=\"display: block; margin-top: 5px;\" [(ngModel)]=\"vuelo\" name=\"vuelo\" >\r\n\t\t\t\tVuelo\r\n\t\t\t</mat-checkbox>\r\n\t\t\t<mat-checkbox style=\"display: block; margin-top: 5px;\" [(ngModel)]=\"alojamiento\" name=\"alojamiento\">\r\n\t\t\t\tAlojamiento\r\n\t\t\t</mat-checkbox>\r\n\t\t\t<mat-checkbox style=\"display: block; margin-top: 5px;\" [(ngModel)]=\"comidas\" name=\"comidas\">\r\n\t\t\t\tComidas\r\n\t\t\t</mat-checkbox>\r\n\r\n\r\n\t\t</div>\r\n\r\n\t\t<div id=\"div2\">\r\n\t\t\t<span class=\"texto\"> Tu viaje a\r\n\t\t\t\t<div class=\"formulario\">\r\n\t\t\t\t\t<mat-form-field class=\"election\">\r\n\t\t\t\t\t\t<mat-label>Elija un continente</mat-label>\r\n\t\t\t\t\t\t<mat-select [(ngModel)]=\"continenteSelect\" name=\"continente\" required>\r\n\t\t\t\t\t\t\t<mat-option *ngFor=\"let continente of continentes\" [value]=\"continente\">\r\n\t\t\t\t\t\t\t\t{{continente}}\r\n\t\t\t\t\t\t\t</mat-option>\r\n\t\t\t\t\t\t</mat-select>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</span>\r\n\t\t\t<span class=\"texto\">\r\n\t\t\t\t<div class=\"formulario\">\r\n\t\t\t\t\t<mat-form-field class=\"election\">\r\n\t\t\t\t\t\t<mat-label>Elija un pais</mat-label>\r\n\t\t\t\t\t\t<mat-select [(ngModel)]=\"paisSelect\" name=\"pais\" required>\r\n\t\t\t\t\t\t\t<mat-option *ngFor=\"let pais of getPais()\" [value]=\"pais\">\r\n\t\t\t\t\t\t\t\t{{pais}}\r\n\t\t\t\t\t\t\t</mat-option>\r\n\t\t\t\t\t\t</mat-select>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</span>\r\n\t\t\t<span class=\"texto\">\r\n\t\t\t\t<div class=\"formulario ciudad\">\r\n\t\t\t\t\t<mat-form-field class=\"election\">\r\n\t\t\t\t\t\t<mat-label>Ciudad</mat-label>\r\n\t\t\t\t\t\t<input matInput  [(ngModel)]=\"ciudadSelect\" name=\"ciudad\" required>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</span>\r\n\t\t\t<br>\r\n\t\t\t<span class=\"texto\">Fecha de inicio\r\n\t\t\t\t<div class=\"formulario\">\r\n\t\t\t\t\t<mat-form-field class=\"election\">\r\n\t\t\t\t\t\t<mat-label>Elige una fecha</mat-label>\r\n\t\t\t\t\t\t<input matInput #date1 type=\"date\" maxlength=\"10\"  placeholder=\"DD/MM/YYYY\" [(ngModel)]=\"startDate\" name=\"startDate\" required>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t\tFecha de fin\r\n\t\t\t\t<div class=\"formulario\">\r\n\t\t\t\t\t<mat-form-field class=\"election\">\r\n\t\t\t\t\t\t<mat-label>Elige una fecha</mat-label>\r\n\t\t\t\t\t\t<input matInput #date2 type=\"date\" maxlength=\"10\"  placeholder=\"DD/MM/YYYY\" [(ngModel)]=\"endDate\" name=\"endDate\" required>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</span>\r\n\t\t\t<br>\r\n\t\t\t<span class=\"texto\">Fecha de l√≠mite de inscripci√≥n\r\n\t\t\t\t<div class=\"formulario\">\r\n\t\t\t\t\t<mat-form-field class=\"election\">\r\n\t\t\t\t\t\t<mat-label>Elige una fecha</mat-label>\r\n\t\t\t\t\t\t<input matInput #date3 type=\"date\" maxlength=\"10\"  placeholder=\"DD/MM/YYYY\" [(ngModel)]=\"limitDate\" name=\"limitDate\" required>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</span>\r\n\t\t\t<br>\r\n\t\t\t<span class=\"texto\">Fecha l√≠mite de pago\r\n\t\t\t\t<div class=\"formulario\">\r\n\t\t\t\t\t<mat-form-field class=\"election\">\r\n\t\t\t\t\t\t<mat-label>Elige una fecha</mat-label>\r\n\t\t\t\t\t\t<input matInput #date4 type=\"date\" maxlength=\"10\"  placeholder=\"DD/MM/YYYY\" [(ngModel)]=\"limitPayDate\" name=\"limitPayDate\" required>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\t\t\t\r\n\t\t\t</span>\r\n\t\t\t<br>\r\n\t\t\t<span class=\"texto\">\r\n\t\t\t\t<div class=\"formulario descripcion\">\r\n\t\t\t\t\t<mat-form-field class=\"election\">\r\n\t\t\t\t\t\t<textarea   matInput #descripcion maxlength=\"300\" rows=5 placeholder=\"Introduce una breve descripci√≥n en este area...\" [(ngModel)]=\"desc\" name =\"descripcion\" ></textarea>\r\n\t\t\t\t\t\t<mat-hint>{{descripcion.value.length}} / 300</mat-hint>\t\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</span>\r\n\t\t\t<br>\r\n\t\t\t<span class=\"texto\">Contacto:\r\n\t\t\t\t+\r\n\t\t\t\t<div class=\"formulario prefijo\">\r\n\t\t\t\t\t<mat-form-field class=\"election\">\r\n\t\t\t\t\t\t<mat-label>Pr</mat-label>\r\n\t\t\t\t\t\t<input matInput [(ngModel)]=\"prefijo\" name=\"prefijo\" placeholder=\"34\" maxlength=\"3\" required>\r\n\t\t\t\t\t</mat-form-field>\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"formulario contacto\">\r\n\t\t\t\t\t<mat-form-field class=\"election\">\r\n\t\t\t\t\t\t<mat-label>Telefono</mat-label>\r\n\t\t\t\t\t\t<input matInput #telef  [(ngModel)]=\"telefono\" name=\"telefono\" placeholder=\"660918814\" maxlength=\"9\" required>\r\n\t\t\t\t\t\t<mat-hint >{{telef.value.length}} / 9</mat-hint>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</span>\r\n\t\t\t<br>\r\n\t\t\t<div class=\"divBotonAceptar\">\r\n\t\t\t\t<button mat-raised-button color=\"primary\" class=\"botonAceptar\" type=\"submit\" [disabled]=\"checkFields()\">Listo</button>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\r\n\r\n\t</form>\r\n\r\n</div>\r\n\r\n","import { CrearViajeComponent } from './../crear-viaje/crear-viaje.component';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute }  from '@angular/router';\r\nimport {Router} from '@angular/router';\r\nimport { HAMMER_LOADER } from '@angular/platform-browser';\r\nimport {SolicitudFirestoreService} from '../../services/firestore/solicitud-firestore.service';\r\nimport {Viaje, IViaje} from '../../interfaces/viaje';\r\nimport {FirestoreService} from '../../services/firestore/firestore.service';\r\nimport {UsuarioFirestoreService} from '../../services/firestore/usuario-firestore.service';\r\nimport { PreloadAllModules } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-mis-viajes',\r\n  templateUrl: './mis-viajes.component.html',\r\n  styleUrls: ['./mis-viajes.component.scss']\r\n})\r\nexport class MisViajesComponent implements OnInit {\r\n  \r\n  \r\n\r\n  title = 'Espa√±a';\r\n  estePais = \"\";\r\n  precio = \"Todos\";\r\n  escogidas = [];\r\n  buscar = \"\";\r\n  ciudadesId = [];\r\n  ciudades = [];\r\n  estaVacio(){\r\n    return this.escogidas.length < 1;\r\n  }\r\n\r\n\r\n  busqueda(){\r\n    \r\n    var i;\r\n    var selec;\r\n    this.escogidas = [];\r\n    for (i = 0; i < this.ciudades.length; i++) {\r\n      // Se ejecuta 5 veces, con valores desde paso desde 0 hasta 4.\r\n      //console.log(this.estePais);\r\n      selec = this.filtro(i);\r\n      if(selec != -1 && selec['ciudad'].toUpperCase().includes(this.buscar.toUpperCase())){\r\n        this.escogidas.push(selec);\r\n      }\r\n     \r\n    };\r\n  }\r\n\r\n  filtrar(){\r\n    var i;\r\n    var selec;\r\n    this.escogidas = [];\r\n    for (i = 0; i < this.ciudades.length; i++) {\r\n      // Se ejecuta 5 veces, con valores desde paso desde 0 hasta 4.\r\n      //console.log(this.estePais);\r\n      selec = this.filtro(i);\r\n      if(selec != -1){\r\n        this.escogidas.push(selec);\r\n      }\r\n      \r\n\r\n    };\r\n  }\r\n\r\n  filtro(i:number): any{\r\n    var ciudad = this.ciudades[i];\r\n    //solo metemos los viajes del pais escogido\r\n    \r\n        \r\n    switch(this.precio){\r\n      case \"Hasta 100‚Ç¨\":\r\n        if (parseInt(ciudad['precio'].substr(0,3)) <= 100 ){\r\n          //this.escogidas.push(ciudad);\r\n          return ciudad;\r\n        }\r\n        break;\r\n      case \"Hasta 300‚Ç¨\":\r\n        if (parseInt(ciudad['precio'].substr(0,3)) <= 300 ){\r\n          //this.escogidas.push(ciudad);\r\n          return ciudad;\r\n        }\r\n        break;\r\n      case \"Hasta 500‚Ç¨\":\r\n        if (parseInt(ciudad['precio'].substr(0,3)) <= 500 ){\r\n          //this.escogidas.push(ciudad);\r\n          return ciudad;\r\n        }\r\n        break;\r\n      default:  \r\n          //this.escogidas.push(ciudad);\r\n          return ciudad;\r\n        break; \r\n    }\r\n    return -1;\r\n  }\r\n  \r\n  //ciudades = [['Sevilla', 'hola'], ['Barcelona'], ['Galicia'], ['Madrid']];\r\n  \r\n  myciudad= this.ciudades[0];\r\n\r\n  constructor(private _route:ActivatedRoute, \r\n              private _router: Router,\r\n              private firestoreServiceSolicitud: SolicitudFirestoreService,\r\n              private firestoreService: FirestoreService,\r\n              private firestoreServiceUser: UsuarioFirestoreService,) {\r\n                this.ciudades = [];\r\n                this.escogidas = [];\r\n               }\r\n\r\n  ngOnInit(): void {\r\n    //let dato = JSON.parse(localStorage.getItem('pais'));\r\n\r\n    if(localStorage.getItem('usuario')== \"null\"){\r\n      var origin = window.location.origin + '/'; \r\n      var destino = origin + \"page1\";\r\n      window.location.assign(destino);\r\n    }\r\n    \r\n    //let id = localStorage.getItem('pais');\r\n    this.escogidas = this.ciudades;\r\n    \r\n    /**SI EL USUARIO ES VIAJERO\r\n     * Deben buscarse las solicitudes del usuario y meter los datos de sus viajes en el array\r\n     */\r\n    if(localStorage.getItem('tipo') == 'viajero'){\r\n        this.escogidas = [];\r\n        this.ciudades = [];\r\n        this.firestoreServiceSolicitud.getSolicitudesByUserId(localStorage.getItem('usuario')).subscribe(res=>{\r\n            var i;\r\n            this.ciudadesId = [];\r\n            for (i = 0; i < res.length ; i++){\r\n              this.ciudadesId.push(res[i].idViaje);\r\n            }\r\n            \r\n            //console.log(this.ciudadesId);\r\n            for(i = 0; i < this.ciudadesId.length ; i++){\r\n              if(res[i].estado != \"pendiente\" && res[i].estado != \"rechazado\" ){\r\n                  this.firestoreService.getViaje(this.ciudadesId[i]).then(elem=>{\r\n                  \r\n                    \r\n                    this.ciudades.push(elem);\r\n                    this.escogidas.push(elem);\r\n\r\n                    \r\n                    //una vez estan todos los viajes al pais seleccionado metidos en el array, los filtros funcionan correctamente\r\n                    }\r\n                  \r\n                   );\r\n                }\r\n              }\r\n          });\r\n      }\r\n\r\n    /**SI EL USUARIO ES ORGANIZADOR\r\n     * Deben buscarse su email y buscar aquellos viajes que tengan como email el email del organizador\r\n     */\r\n    if(localStorage.getItem('tipo') == 'organizador'){\r\n      this.escogidas = [];\r\n      this.ciudades = [];\r\n      this.firestoreServiceUser.getUsuariosFiltered(localStorage.getItem('usuario')).subscribe(res=>{\r\n        var email = res[0].email;\r\n        \r\n        this.firestoreService.getViajesByEmail(email).subscribe(elem=>{\r\n          var i;\r\n          for(i = 0; i<elem.length ; i++){\r\n            //console.log(elem[i].descripcion);\r\n            this.ciudades.push(elem[i]);\r\n            this.escogidas.push(elem[i]);\r\n            //console.log(this.ciudades[i].descripcion);\r\n          }\r\n          \r\n        });\r\n      });\r\n      }\r\n\r\n    }\r\n\r\n  \r\n  comprobarViajero(){\r\n    return localStorage.getItem('tipo') == \"viajero\";\r\n  }\r\n  comprobarOrganizador(){\r\n    return localStorage.getItem('tipo') == \"organizador\";\r\n  }\r\n\r\n\r\n\r\n}\r\n","<app-header titulo=\"MIS VIAJES\"></app-header>\r\n<nav>\r\n    <div class=\"right\">\r\n        <div class=\"buscador\">\r\n            <form>\r\n                <!---<label for=\"fname\"><img src=\"../../../assets/busqueda.png\"></label>-->\r\n                <input id=\"fname\"  name=\"fname\" placeholder=\"Buscar ciudad...\" [(ngModel)]=\"buscar\" (change)=\"busqueda()\" onclick=\"reset()\"><br><br>\r\n                <!--<input type=\"submit\" value=\"Submit\" (click)=\"busqueda\">-->\r\n            </form>\r\n        </div>\r\n        <img id=\"img-f\" src=\"./assets/filtro.png\">\r\n        <select id=\"select-f\" [(ngModel)]=\"precio\" (change)=\"filtrar()\">\r\n           \r\n            <option value=\"+ 500‚Ç¨\">Todos</option>\r\n            <option value=\"Hasta 100‚Ç¨\">Hasta 100‚Ç¨</option> \r\n            <option value=\"Hasta 300‚Ç¨\">Hasta 300‚Ç¨</option>\r\n            <option value=\"Hasta 500‚Ç¨\">Hasta 500‚Ç¨</option>\r\n            <option value=\"+ 500‚Ç¨\">+ 500‚Ç¨</option>\r\n            <option value={{precio}} selected>{{precio}}</option>\r\n\r\n        </select>\r\n    </div>\r\n</nav>\r\n<div class=\"content\">\r\n\r\n    <div class=\"nuevo\" *ngIf=\"comprobarViajero()\" [routerLink] = \"['/unirse-continente']\">\r\n        <img id=\"mas\" src=\"./assets/nuevo.png\">\r\n    </div>\r\n    \r\n    <div class=\"nuevo\" *ngIf=\"comprobarOrganizador()\" [routerLink] = \"['/crear-viaje']\">\r\n        <img id=\"mas\" src=\"./assets/nuevo.png\">\r\n    </div>\r\n\r\n    <div class=\"pais\" *ngFor=\"let ciudad of escogidas\"  [routerLink]=\"['/viaje/', ciudad['id'] ]\">\r\n    \r\n    \r\n        <img src=\"{{ciudad.img}}\">\r\n        \r\n        <p class=\"destacado\">{{ ciudad.ciudad }}</p>\r\n        <p id=\"mensaje\">{{ciudad.descripcion}}</p>   \r\n        <div class=\"info\">\r\n            <p class=\"destacado\">{{ciudad.precio}}</p>\r\n            <div class=\"personas\">\r\n                <img src=\"./assets/usuario.png\">\r\n                <p>{{ciudad.unidas}}/{{ciudad.maximo}}</p>\r\n            </div>\r\n            <img src=\"./assets/compartir.png\">\r\n        </div> \r\n            \r\n    </div>\r\n\r\n   \r\n   \r\n</div>","import { Component, OnInit, Input, OnDestroy, ElementRef, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute }  from '@angular/router';\r\nimport {Router} from '@angular/router';\r\nimport {FirestoreService} from '../../services/firestore/firestore.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {Viaje, IViaje} from '../../interfaces/viaje';\r\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport {finalize} from 'rxjs/operators';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-unirse-ciudad',\r\n  templateUrl: './unirse-ciudad.component.html',\r\n  styleUrls: ['./unirse-ciudad.component.scss']\r\n\r\n  \r\n})\r\n\r\n\r\nexport class UnirseCiudadComponent implements OnInit, OnDestroy {\r\n\r\n\r\n\r\n  title = 'Espa√±a';\r\n  estePais = \"\";\r\n  escogidas = [];\r\n  precio = \"Todos\";\r\n  buscar = \"\";\r\n  ciudades = [];\r\n\r\n\r\n  //fileToUpload: File = null;\r\n  @ViewChild('imageUser') inputImageUser;\r\n  uploadPercent: Observable<number>;\r\n  urlImage: Observable<string>;\r\n  myUrl = \"\";\r\n\r\n  public viajes:Viaje[];\r\n  public s_viajes:Subscription;\r\n\r\n  public viaje;\r\n\r\n  public search_texto:string=\"\";\r\n  public search_tipo:number=0;\r\n\r\n\r\n  estaVacio(){\r\n    return this.escogidas.length < 1;\r\n  }\r\n\r\n  busqueda(){\r\n\r\n    var i;\r\n    var selec;\r\n    this.escogidas = [];\r\n    for (i = 0; i < this.ciudades.length; i++) {\r\n      // Se ejecuta 5 veces, con valores desde paso desde 0 hasta 4.\r\n      //console.log(this.estePais);\r\n      selec = this.filtro(i);\r\n      if(selec != -1 && selec.ciudad.toUpperCase().includes(this.buscar.toUpperCase())){\r\n        this.escogidas.push(selec);\r\n      }\r\n\r\n\r\n    };\r\n  }\r\n\r\n\r\n  filtrar(){\r\n    var i;\r\n    var selec;\r\n    this.escogidas = [];\r\n    for (i = 0; i < this.ciudades.length; i++) {\r\n      // Se ejecuta 5 veces, con valores desde paso desde 0 hasta 4.\r\n      //console.log(this.estePais);\r\n      selec = this.filtro(i);\r\n      if(selec != -1){\r\n        this.escogidas.push(selec);\r\n      }\r\n\r\n\r\n    };\r\n  }\r\n\r\n  filtro(i:number): any{\r\n    var ciudad = this.ciudades[i];\r\n    //solo metemos los viajes del pais escogido\r\n    \r\n\r\n    switch(this.precio){\r\n      case \"Hasta 100‚Ç¨\":\r\n        if (parseInt(ciudad.precio.substr(0,ciudad.precio.length - 1)) <= 100 ){\r\n          //this.escogidas.push(ciudad);\r\n          return ciudad;\r\n        }\r\n        break;\r\n      case \"Hasta 300‚Ç¨\":\r\n        if (parseInt(ciudad.precio.substr(0,ciudad.precio.length - 1)) <= 300 ){\r\n          //this.escogidas.push(ciudad);\r\n          return ciudad;\r\n        }\r\n        break;\r\n      case \"Hasta 500‚Ç¨\":\r\n        if (parseInt(ciudad.precio.substr(0,ciudad.precio.length - 1)) <= 500 ){\r\n          //this.escogidas.push(ciudad);\r\n          return ciudad;\r\n        }\r\n        break;\r\n      default:\r\n          //this.escogidas.push(ciudad);\r\n          return ciudad;\r\n        break;\r\n\r\n      \r\n    }\r\n    return -1;\r\n  }\r\n  /**\r\n  //ciudades = [['Sevilla', 'hola'], ['Barcelona'], ['Galicia'], ['Madrid']];\r\n  ciudades = [\r\n    {\r\n      \"id\":\"1\",\r\n      \"pais\": \"Espa√±a\",\r\n      \"ciudad\": \"Sevilla\",\r\n      \"mensaje\": \"La capital andaluza destila alegr√≠a y bullicio en cada una de las calles y plazas que configuran su casco hist√≥rico, que alberga un interesante conjunto de construcciones declaradas Patrimonio Mundial y barrios de hondo sabor popular, como el de Triana o La Macarena. \",\r\n      \"precio\": \"80‚Ç¨\",\r\n      \"unidas\": \"1\",\r\n      \"maximo\": \"5\"\r\n    },\r\n    {\r\n      \"id\":\"2\",\r\n      \"pais\": \"Espa√±a\",\r\n      \"ciudad\": \"Barcelona\",\r\n      \"mensaje\": \"Situada a orillas del Mediterr√°neo, Barcelona es una ciudad cosmopolita con una gran importancia tanto cultural como comercial, financiera y tur√≠stica. Barcelona es una de las ciudades europeas m√°s visitadas\",\r\n      \"precio\": \"300‚Ç¨\",\r\n      \"unidas\": \"1\",\r\n      \"maximo\": \"5\"\r\n    },\r\n    {\r\n      \"id\":\"3\",\r\n      \"pais\": \"Espa√±a\",\r\n      \"ciudad\": \"Galicia\",\r\n      \"mensaje\": \"Patrimonio cultural, museos, alojamiento, fiestas... Todos los recursos tur√≠sticos de Galicia a tu alcance\",\r\n      \"precio\": \"450‚Ç¨\",\r\n      \"unidas\": \"1\",\r\n      \"maximo\": \"5\"\r\n    },\r\n    {\r\n      \"id\":\"4\",\r\n      \"pais\": \"Espa√±a\",\r\n      \"ciudad\": \"Madrid\",\r\n      \"mensaje\": \"D√©jate seducir por la magn√≠fica ciudad de Madrid visitando todos sus museos y paseando por sus calles peculiares. La oferta incluye vuelos desde C√°diz y alojamiento en hotel 4*.\",\r\n      \"precio\": \"625‚Ç¨\",\r\n      \"unidas\": \"1\",\r\n      \"maximo\": \"5\"\r\n    },\r\n    {\r\n      \"id\":\"4\",\r\n      \"pais\": \"Italia\",\r\n      \"ciudad\": \"Roma\",\r\n      \"mensaje\": \"D√©jate seducir por la magn√≠fica ciudad de Madrid visitando todos sus museos y paseando por sus calles peculiares. La oferta incluye vuelos desde C√°diz y alojamiento en hotel 4*.\",\r\n      \"precio\": \"625‚Ç¨\",\r\n      \"unidas\": \"1\",\r\n      \"maximo\": \"5\"\r\n    }\r\n\r\n  ]\r\n  **/\r\n  //myciudad= this.ciudades[0];\r\n  private db:AngularFirestore;\r\n  public misViajes = []\r\n  constructor(private _route:ActivatedRoute,\r\n              private _router: Router,\r\n              private storage: AngularFireStorage,\r\n              private firestoreService: FirestoreService\r\n              ) {\r\n                this.viajes = [];\r\n               }\r\n\r\n    /**Esta funci√≥n recoge el file seleccionado */   \r\n    /**    \r\n    onUpload(e){\r\n      //console.log('subir', e.target.files[0]);\r\n      const id = Math.random().toString(36).substring(2); //generamos un id aleatorio para que no haya nombres repetidos\r\n      const file = e.target.files[0]; //cogemos el fichero que ha subido el usuario\r\n      const filePath = `upload/viaje_${id}`; //utilizamos literales para meter el id\r\n      const ref = this.storage.ref(filePath);\r\n      const task = this.storage.upload(filePath, file);\r\n\r\n      this.uploadPercent = task.percentageChanges();\r\n      task.snapshotChanges().pipe(finalize(() => \r\n        this.urlImage = ref.getDownloadURL()\r\n             \r\n      \r\n      \r\n      \r\n      )).subscribe();\r\n      //this.crearViaje(this.urlImage);\r\n      \r\n    \r\n    }\r\n    **/\r\n   onUpload(e){\r\n    const id = Math.random().toString(36).substring(2); //generamos un id aleatorio para que no haya nombres repetidos\r\n    const file = e.target.files[0]; //cogemos el fichero que ha subido el usuario\r\n    const filePath = `upload/viaje_${id}`; //utilizamos literales para meter el id\r\n    const ref = this.firestoreService.getFileRef(filePath);\r\n    const task = this.firestoreService.storageFile(filePath, file);\r\n\r\n    //console.log(ref.getDownloadURL());\r\n    this.uploadPercent = task.percentageChanges();\r\n    task.snapshotChanges().pipe(finalize(() => {\r\n        this.urlImage = ref.getDownloadURL();\r\n        \r\n    }\r\n      )).subscribe();\r\n    \r\n\r\n    \r\n    \r\n   }\r\n   \r\n    crearViaje(){\r\n      console.log(\"entra\");\r\n      var viaje:Viaje = new Viaje();\r\n      viaje.pais = \"Francia\"\r\n      viaje.ciudad = \"Par√≠s\";\r\n      viaje.continente = \"Europa\";\r\n      viaje.email = \"emailinventado@gmail.com\";\r\n      viaje.img = this.inputImageUser.nativeElement.value;\r\n      this.firestoreService.createViaje(viaje);\r\n\r\n    } \r\n    \r\n\r\n\r\n\r\n\r\n  ngOnInit(): void {\r\n    //let dato = JSON.parse(localStorage.getItem('pais'));\r\n    \r\n    //let id = localStorage.getItem('pais');\r\n    if(localStorage.getItem('usuario')== \"null\"){\r\n      var origin = window.location.origin + '/'; \r\n      var destino = origin + \"page1\";\r\n      window.location.assign(destino);\r\n    }\r\n    \r\n    let id = this._route.snapshot.paramMap.get('id'); //para saber el pais a traves de la URL\r\n    localStorage.setItem('pais', id);//se establece el local Storage\r\n    \r\n    this.estePais = id.toUpperCase(); //para el titulo\r\n\r\n   \r\n\r\n\r\n    this.s_viajes=this.firestoreService.getViajesSorted().subscribe(data=>{\r\n      this.viajes=data;\r\n    });\r\n\r\n    this.firestoreService.getViajesFiltered(this._route.snapshot.paramMap.get('id')).subscribe(res=>{\r\n      this.viajes=res; //obtenemos todos los viajes a dicho pais\r\n      var i = 0;\r\n      var iterado;//servira de variable auxiliar\r\n      this.escogidas = [];//lo vaciamos al cargar la p√°gina\r\n      this.ciudades = []//lo vaciamos al cargar la p√°gina\r\n\r\n      for (i = 0; i<this.viajes.length; i++){\r\n        //recorremos todos los viajes del pais y vamos metiendolos con sus datos en el atributo escogidas\r\n        iterado = new Viaje();\r\n        iterado.id = this.viajes[i].id;\r\n        iterado.ciudad = this.viajes[i].ciudad;\r\n        iterado.continente = this.viajes[i].continente;\r\n        iterado.descripcion = this.viajes[i].descripcion;\r\n        iterado.duracion = this.viajes[i].duracion;\r\n        iterado.email = this.viajes[i].email;\r\n        iterado.fin = this.viajes[i].fin;\r\n        iterado.img = this.viajes[i].img;\r\n        iterado.tlf = this.viajes[i].tlf;\r\n        iterado.inicio = this.viajes[i].inicio;\r\n        iterado.limitePago = this.viajes[i].limitePago;\r\n        iterado.limiteUnion = this.viajes[i].limiteUnion;\r\n        iterado.maximo = this.viajes[i].maximo;\r\n        iterado.servicios = this.viajes[i].servicios;\r\n        iterado.precio = this.viajes[i].precio;\r\n        iterado.pais = this.viajes[i].pais;\r\n        iterado.viajeros = this.viajes[i].viajeros;\r\n        iterado.unidas = this.viajes[i].unidas;\r\n        this.ciudades.push(iterado);\r\n        this.escogidas.push(iterado);\r\n\r\n      }\r\n      //una vez estan todos los viajes al pais seleccionado metidos en el array, los filtros funcionan correctamente\r\n      }\r\n    );\r\n\r\n    \r\n\r\n      \r\n\r\n      /**\r\n      var dir = \"../../../assets/viajes/Europa/Barcelona-00.jpg\"\r\n      //var dir = \"Otawa-00\";\r\n      var archivo = dir;\r\n      var ref = this.firestoreService.getFileRef(\"Amberes-01.jpg\");\r\n      var tarea = this.firestoreService.storageFile(\"Amberes-01.jpg\", archivo);\r\n      \r\n      ref.getDownloadURL().subscribe((URL) => {\r\n        viaje.img = URL;\r\n      });\r\n      **/\r\n      \r\n\r\n      //console.log(this.firestoreService.createViaje(viaje));\r\n\r\n\r\n  \r\n\r\n  \r\n\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  ngOnDestroy()\r\n  {\r\n    this.s_viajes.unsubscribe();\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n","<app-header titulo=\"VIAJES A {{estePais}}\"></app-header>\r\n<nav>\r\n    <div id=\"div-volver\" [routerLink]=\"['/unirse-pais']\">\r\n        <app-volver></app-volver>\r\n    </div>\r\n    <div class=\"right\">\r\n        <div class=\"buscador\">\r\n            <form>\r\n                <!---<label for=\"fname\"><img src=\"../../../assets/busqueda.png\"></label>-->\r\n                <input id=\"fname\"  name=\"fname\" placeholder=\"Buscar ciudad...\" [(ngModel)]=\"buscar\" (change)=\"busqueda()\" onclick=\"reset()\"><br><br>\r\n                <!--<input type=\"submit\" value=\"Submit\" (click)=\"busqueda\">-->\r\n            </form>\r\n        </div>\r\n        <img id=\"img-f\" src=\"./assets/filtro.png\">\r\n        <select id=\"select-f\" [(ngModel)]=\"precio\" (change)=\"filtrar()\">\r\n           \r\n            <option value=\"+ 500‚Ç¨\">Todos</option>\r\n            <option value=\"Hasta 100‚Ç¨\">Hasta 100‚Ç¨</option> \r\n            <option value=\"Hasta 300‚Ç¨\">Hasta 300‚Ç¨</option>\r\n            <option value=\"Hasta 500‚Ç¨\">Hasta 500‚Ç¨</option>\r\n            <option value=\"+ 500‚Ç¨\">+ 500‚Ç¨</option>\r\n            <option value={{precio}} selected>{{precio}}</option>\r\n\r\n        </select>\r\n    </div>\r\n</nav>\r\n<div class=\"notfound\" *ngIf=\"estaVacio()\" >\r\n    <app-not-found404 titulo=\"Lo sentimos, el viaje que est√°s buscando no est√° disponible\"></app-not-found404>\r\n</div>\r\n<div class=\"content\" *ngIf=\"estaVacio() == false\">\r\n    <div class=\"pais\" *ngFor=\"let ciudad of escogidas\" [routerLink]=\"['/viaje/', ciudad.id ]\">\r\n    \r\n    \r\n        <img src=\"{{ciudad.img}}\">\r\n        \r\n        <p class=\"destacado\">{{ ciudad.ciudad }}</p>\r\n        <p id=\"mensaje\">{{ ciudad.descripcion }}</p>   \r\n        <div class=\"info\">\r\n            <p class=\"destacado\">{{ciudad.precio}} ‚Ç¨</p>\r\n            <div class=\"personas\">\r\n                <img src=\"./assets/usuario.png\">\r\n                <p>{{ciudad.unidas}}/{{ciudad.maximo}}</p>\r\n            </div>\r\n            <img src=\"./assets/compartir.png\">\r\n        </div> \r\n            \r\n    </div>\r\n   \r\n</div>\r\n\r\n\r\n<!--\r\n<div class=\"form-group\">\r\n    <label for=\"file\">Choose File</label>\r\n    <input type=\"file\"\r\n           id=\"file\"\r\n           (change)=\"onUpload($event)\">\r\n</div>\r\n<div class=\"progress\">\r\n    <div class=\"progress-bar\" role=\"progressbar\" [style.width]=\"( uploadPercent | async) + '%'\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n  </div>\r\n<input #imageUser type=\"hidden\"  [value]=\"urlImage | async\" >\r\n<button *ngIf=\"urlImage | async; else btnDisabled\" type=\"submit\" (click)=\"crearViaje()\">Crear</button>\r\n<ng-template #btnDisabled>\r\n    <button onclick=\"console.log('hi')\" type=\"submit\" disabled=true>Crear</button>\r\n</ng-template>\r\n-->\r\n","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-unirse-continente',\r\n  templateUrl: './unirse-continente.component.html',\r\n  styleUrls: ['./unirse-continente.component.scss']\r\n})\r\nexport class UnirseContinenteComponent implements OnInit {\r\n\r\n  clickMessage = '';\r\n\r\n  constructor() { }\r\n/** \r\n  establecerContinente(continente:string):void{\r\n    alert(continente);\r\n  }\r\n  **/\r\n  \r\n \r\n\r\n  ngOnInit(): void {\r\n    if(localStorage.getItem('usuario')== \"null\"){\r\n      var origin = window.location.origin + '/'; \r\n      var destino = origin + \"page1\";\r\n      window.location.assign(destino);\r\n    }\r\n    \r\n  }\r\n  \r\n\r\n}\r\n","<app-header titulo=\"ESCOGE TU SIGUIENTE EXPLORACI√ìN\"></app-header>\r\n\r\n<div id=\"div-volver\" [routerLink]=\"['/mis-viajes']\">\r\n    <app-volver></app-volver>\r\n</div>\r\n\r\n\r\n<!-- Image Map Generated by http://www.image-map.net/ -->\r\n\r\n\r\n<img id=\"imagen\" src=\"./assets/mapa-continentes.png\" usemap=\"#image-map\">\r\n\r\n\r\n\r\n<map name=\"image-map\">\r\n    <area onclick=\"localStorage.setItem('continente', 'africa')\" [routerLink]=\"['/unirse-pais']\" target=\"_self\" alt=\"√Åfrica\" title=\"√Åfrica\"   coords=\"466,199,454,209,450,222,440,233,433,244,424,256,424,274,425,291,441,305,457,322,492,313,505,317,514,322,516,336,516,350,525,362,525,377,522,393,522,415,531,428,537,450,546,466,568,466,586,449,599,434,600,413,615,404,623,382,620,356,627,339,647,324,650,301,635,298,607,265,595,232,581,218,512,196\" shape=\"poly\" >\r\n    <area onclick=\"localStorage.setItem('continente', 'america-sur')\" [routerLink]=\"['/unirse-pais']\" target=\"_self\" alt=\"Am√©rica del sur\" title=\"Am√©rica del sur\"   coords=\"232,294,219,303,219,316,211,338,206,354,213,380,220,392,235,401,252,414,250,426,248,463,250,496,258,515,264,537,295,552,280,497,300,482,320,450,331,428,349,419,349,387,360,367,352,354,304,317,265,297,256,298\" shape=\"poly\">\r\n    <area onclick=\"localStorage.setItem('continente', 'america-norte')\" [routerLink]=\"['/unirse-pais']\" target=\"_self\" alt=\"Am√©rica del norte\" title=\"Am√©rica del norte\"   coords=\"163,263,154,271,144,268,131,259,128,242,118,227,116,226,106,217,114,244,107,225,99,201,156,253,139,170,108,156,128,167,109,123,109,113,101,104,156,233,159,260,157,257,154,238,170,225,176,223,189,222,207,217,218,222,222,208,243,199,242,184,263,175,285,155,297,162,321,154,321,133,314,108,389,109,446,60,464,38,397,36,375,39,335,33,320,40,296,44,268,44,230,54,205,62,183,71,160,72,130,74,100,72,80,81,62,91,46,104,17,124,156,253,157,259\" shape=\"poly\">\r\n    <area onclick=\"localStorage.setItem('continente', 'america-centro')\" [routerLink]=\"['/unirse-pais']\" target=\"_self\" alt=\"Am√©rica central\" title=\"Am√©rica central\"   coords=\"188,257,178,257,166,265,156,269,154,276,164,290,181,304,204,306,212,299,247,264,211,252\" shape=\"poly\">\r\n    <area onclick=\"localStorage.setItem('continente', 'oceania')\"  [routerLink]=\"['/unirse-pais']\" target=\"_self\" alt=\"Ocean√≠a\" title=\"Ocean√≠a\"   coords=\"854,473,856,450,860,425,874,414,895,408,904,392,916,391,930,382,941,382,939,395,953,404,965,381,965,394,971,404,979,415,984,421,989,432,986,450,975,472,963,489,943,484,945,513,884,436,935,489,853,441,898,469,944,503\" shape=\"poly\">\r\n    <area onclick=\"localStorage.setItem('continente', 'europa')\" [routerLink]=\"['/unirse-pais']\" target=\"_self\" alt=\"Europa\" title=\"Europa\"  coords=\"464,201,481,192,489,180,500,172,513,186,540,191,564,197,572,179,584,166,617,177,641,185,640,153,643,144,664,139,656,125,650,103,652,84,647,58,625,59,581,79,547,75,517,87,502,106,479,127,475,113,460,131,446,189,451,194\" shape=\"poly\">\r\n    <area onclick=\"localStorage.setItem('continente', 'asia')\" [routerLink]=\"['/unirse-pais']\" target=\"_self\" alt=\"Asia\" title=\"Asia\"  coords=\"570,186,589,180,603,178,621,178,636,185,646,195,655,184,645,160,645,143,658,144,659,122,646,97,658,72,679,70,725,50,769,58,789,66,846,69,886,77,919,80,955,84,976,91,953,107,938,136,949,140,927,212,877,224,858,258,846,284,888,271,911,294,903,327,924,350,886,385,657,274,640,291,624,271\" shape=\"poly\">\r\n</map>\r\n\r\n\r\n<div class=\"botones\">\r\n    <div class=\"boton\" onclick=\"localStorage.setItem('continente', 'africa')\" [routerLink]=\"['/unirse-pais']\">\r\n        <img src=\"./assets/continentes/africa.png\">\r\n        <h1>√Åfrica</h1>\r\n    </div>\r\n    <div class=\"boton\" onclick=\"localStorage.setItem('continente', 'america-sur')\" [routerLink]=\"['/unirse-pais']\">\r\n        <img src=\"./assets/continentes/america-sur.png\">\r\n        <h1>Am√©rica del Sur</h1>\r\n    </div>\r\n    <div class=\"boton\" onclick=\"localStorage.setItem('continente', 'america-norte')\" [routerLink]=\"['/unirse-pais']\">\r\n        <img src=\"./assets/continentes/america-norte.png\">\r\n        <h1>Am√©rica del Norte</h1>\r\n    </div>\r\n    <div class=\"boton\" onclick=\"localStorage.setItem('continente', 'america-centro')\" [routerLink]=\"['/unirse-pais']\">\r\n        <img src=\"./assets/continentes/america-centro.png\">\r\n        <h1>Am√©rica Central</h1>\r\n    </div>\r\n    <div class=\"boton\" onclick=\"localStorage.setItem('continente', 'oceania')\" [routerLink]=\"['/unirse-pais']\">\r\n        <img src=\"./assets/continentes/oceania.png\">\r\n        <h1>Ocean√≠a</h1>\r\n    </div>\r\n    <div class=\"boton\" onclick=\"localStorage.setItem('continente', 'europa')\" [routerLink]=\"['/unirse-pais']\">\r\n        <img src=\"./assets/continentes/europa.png\">\r\n        <h1>Europa</h1>\r\n    </div>\r\n    <div class=\"boton\" onclick=\"localStorage.setItem('continente', 'asia')\" [routerLink]=\"['/unirse-pais']\">\r\n        <img src=\"./assets/continentes/asia.png\">\r\n        <h1>Asia</h1>\r\n    </div>\r\n</div>\r\n\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { ActivatedRoute }  from '@angular/router';\r\nimport {Router} from '@angular/router';\r\n@Component({\r\n  selector: 'app-unirse-pais',\r\n  templateUrl: './unirse-pais.component.html',\r\n  styleUrls: ['./unirse-pais.component.scss']\r\n})\r\nexport class UnirsePaisComponent implements OnInit {\r\n\r\n  escogidos = [];\r\n  buscar = \"\";\r\n\r\n  hayPais():boolean{\r\n    return this.escogidos.length > 0;\r\n  }\r\n  busqueda(){\r\n    var i;\r\n    var pais;\r\n    this.escogidos = [];\r\n    for (i = 0; i < this.continentes[0].length; i++) {\r\n      // Se ejecuta 5 veces, con valores desde paso desde 0 hasta 4.\r\n      //console.log(this.estePais);\r\n      pais = this.continentes[0][i];\r\n      if(pais['pais'].toUpperCase().includes(this.buscar.toUpperCase())){\r\n        this.escogidos.push(pais);\r\n      }\r\n    }\r\n    //si devuelve true, habra encontrado, si devuelve false, no habra encontrado\r\n    \r\n  }\r\n\r\n  onChange(deviceValue) {\r\n    console.log(deviceValue);\r\n    localStorage.setItem('continente', deviceValue);\r\n    this.identificador = localStorage.getItem('continente');\r\n    this.continente = this.identificador;\r\n    \r\n    \r\n    this.continente = deviceValue; \r\n    switch(this.identificador) { \r\n      case 'europa': { \r\n         this.continentes[0] = this.europa;\r\n         this.continente = 'Europa';\r\n         break; \r\n      } \r\n      case 'america-norte': { \r\n         this.continentes[0] = this.americaNorte;\r\n         this.continente = 'Am√©rica del Norte';\r\n         break; \r\n      } \r\n      case 'america-sur': { \r\n        this.continentes[0] = this.americaSur;\r\n        this.continente = 'Am√©rica del Sur';\r\n        break; \r\n     } \r\n     case 'america-centro': { \r\n      this.continentes[0] = this.americaCentro;\r\n      this.continente = 'Am√©rica Central';\r\n      break; \r\n     } \r\n     case 'africa': { \r\n      this.continentes[0] = this.africa;\r\n      this.continente = '√Åfrica';\r\n      break; \r\n    } \r\n    case 'asia': { \r\n      this.continentes[0] = this.asia;\r\n      this.continente = 'Asia';\r\n      break; \r\n    } \r\n    case 'oceania': { \r\n      this.continentes[0] = this.oceania;\r\n      this.continente = 'Ocean√≠a';\r\n      break; \r\n    } \r\n      default: { \r\n        this.continente = 'Europa';  \r\n        this.identificador = \"europa\";\r\n         break; \r\n      } \r\n\r\n   \r\n      \r\n   }\r\n   this.escogidos = this.continentes[0];\r\n   \r\n   \r\n   \r\n  \r\n\r\n}\r\n\r\n  constructor(private _route:ActivatedRoute, private _router: Router) {\r\n    \r\n  }\r\n\r\n  \r\n\r\n    identificador:string;\r\n    continente:string;\r\n    elegido = [];\r\n    numContinente:number;\r\n\r\n\r\n    americaNorte = [\r\n      {\r\n        \"pais\": \"Canad√°\",\r\n        \"imagen\": \"cn.jpg\"\r\n      },\r\n      {\r\n        \"pais\": \"EEUU\",\r\n        \"imagen\": \"eeuu.png\"\r\n      },\r\n    ];\r\n    americaCentro = [\r\n      {\r\n        \"pais\": \"Salvador\",\r\n        \"imagen\": \"slv.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Costa Rica\",\r\n        \"imagen\": \"csr.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Guatemala\",\r\n        \"imagen\": \"gt.png\"\r\n      },\r\n    ];\r\n    americaSur = [\r\n      {\r\n        \"pais\": \"Argentina\",\r\n        \"imagen\": \"ar.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Colombia\",\r\n        \"imagen\": \"cl.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Venezuela\",\r\n        \"imagen\": \"vn.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Per√∫\",\r\n        \"imagen\": \"pr.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Ecuador\",\r\n        \"imagen\": \"ec.png\"\r\n      },\r\n    ];\r\n    asia = [\r\n      {\r\n        \"pais\": \"China\",\r\n        \"imagen\": \"ch.png\"\r\n      },\r\n      {\r\n        \"pais\":  \"Kazajist√°n\",\r\n        \"imagen\": \"kj.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Corea del Norte\",\r\n        \"imagen\": \"cn.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Corea del Sur\",\r\n        \"imagen\": \"cs.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Jap√≥n\",\r\n        \"imagen\": \"jp.png\"\r\n      },\r\n    ];\r\n    africa = [\r\n      {\r\n        \"pais\": \"Egipto\",\r\n        \"imagen\": \"eg.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Argelia\",\r\n        \"imagen\": \"arg.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Camer√∫n\",\r\n        \"imagen\": \"cm.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Burkina Faso\",\r\n        \"imagen\": \"bf.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Marruecos\",\r\n        \"imagen\": \"mr.png\"\r\n      },\r\n    ];\r\n    oceania = [\r\n      {\r\n        \"pais\": \"Australia\",\r\n        \"imagen\"  : \"au.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Nueva Zelanda\",\r\n        \"imagen\"  : \"nz.png\"\r\n      }\r\n    ];\r\n    europa = [\r\n      {\r\n        \"pais\": \"Espa√±a\",\r\n        \"imagen\"  : \"sp.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Italia\",\r\n        \"imagen\": \"ita.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Francia\",\r\n        \"imagen\": \"fr.png\"\r\n      },\r\n      {\r\n        \"pais\": \"Suecia\",\r\n        \"imagen\": \"su.png\"\r\n      }\r\n    ];\r\n    \r\n    continentes = [this.europa];\r\n    elem = this.continentes[this.numContinente];\r\n\r\n  ngOnInit(): void {\r\n\r\n    if(localStorage.getItem('usuario')== \"null\"){\r\n      var origin = window.location.origin + '/'; \r\n      var destino = origin + \"page1\";\r\n      window.location.assign(destino);\r\n    }\r\n\r\n    this.identificador = localStorage.getItem('continente');\r\n    this.continente = this.identificador;\r\n    this.continente[0].toUpperCase();\r\n    \r\n    \r\n      \r\n    switch(this.identificador) { \r\n      case 'europa': { \r\n         this.continentes[0] = this.europa;\r\n         this.continente = 'Europa';\r\n         break; \r\n      } \r\n      case 'america-norte': { \r\n         this.continentes[0] = this.americaNorte;\r\n         this.continente = 'Am√©rica del Norte';\r\n         break; \r\n      } \r\n      case 'america-sur': { \r\n        this.continentes[0] = this.americaSur;\r\n        this.continente = 'Am√©rica del Sur';\r\n        break; \r\n     } \r\n     case 'america-centro': { \r\n      this.continentes[0] = this.americaCentro;\r\n      this.continente = 'Am√©rica Central';\r\n      break; \r\n     } \r\n     case 'africa': { \r\n      this.continentes[0] = this.africa;\r\n      this.continente = '√Åfrica';\r\n      break; \r\n    } \r\n    case 'asia': { \r\n      this.continentes[0] = this.asia;\r\n      this.continente = 'Asia';\r\n      break; \r\n    } \r\n    case 'oceania': { \r\n      this.continentes[0] = this.oceania;\r\n      this.continente = 'Ocean√≠a';\r\n      break; \r\n    } \r\n      default: { \r\n        this.continente = 'Europa';  \r\n         break; \r\n      } \r\n      \r\n   }\r\n   this.escogidos = this.continentes[0];\r\n\r\n   \r\n   \r\n  }\r\n  \r\n  establecerPais(){\r\n     //onclick=\"localStorage.setItem('pais', pais['pais'])\"\r\n     //[routerLink]=\"['/unirse-ciudad']\"\r\n  }\r\n  \r\n\r\n}\r\n","<app-header titulo=\"ESCOGE TU SIGUIENTE EXPLORACI√ìN\"></app-header>\r\n<nav>\r\n    <div id=\"div-volver\" [routerLink]=\"['/unirse-continente']\">\r\n        <app-volver></app-volver>\r\n    </div>\r\n       \r\n    <div class=\"right\">\r\n        <div class=\"buscador\">\r\n            <form action=\"/action_page.php\">\r\n                <!---<label for=\"fname\"><img src=\"../../../assets/busqueda.png\"></label>-->\r\n                <input type=\"text\" id=\"fname\" name=\"fname\" placeholder=\"Buscar pais...\" [(ngModel)]=\"buscar\" (change)=\"busqueda()\" onclick=\"reset()\"><br><br>\r\n            </form>\r\n        </div>\r\n        <img id=\"img-f\" src=\"./assets/filtro.png\">\r\n        <!--\r\n        <select id=\"select-f\">\r\n            <option value=any selected>Filter Post</option>\r\n            <option value=\"africa\">Turismo cultural</option> \r\n            <option value=\"america-centro\">Turismo gastron√≥mico</option>\r\n            <option value=\"america-norte\">Las mejores playas</option>\r\n        </select>\r\n        -->\r\n        <select (change)=\"onChange($event.target.value)\"   id=\"continentes\" >\r\n            <option value=\"{{identificador}}\" selected>{{continente}}</option>\r\n            <option value=\"africa\">√Åfrica</option>\r\n            <option value=\"america-centro\">Am√©rica Central</option>\r\n            <option value=\"america-sur\">Am√©rica del sur</option>\r\n            <option value=\"america-norte\">Am√©rica del Norte</option>\r\n            <option value=\"oceania\">Ocean√≠a</option>\r\n            <option value=\"asia\">As√≠a</option>\r\n            <option value=\"europa\">Europa</option>\r\n        </select>\r\n    </div>\r\n</nav>\r\n<div class=\"notfound\" *ngIf=\"hayPais() == false\" >\r\n    <app-not-found404 titulo=\"Lo sentimos, no hay pa√≠ses que coincidan con esas caracter√≠sticas\"></app-not-found404>\r\n</div>\r\n<div class=\"content\" *ngIf=\"hayPais()\">\r\n    <div class=\"pais\"  *ngFor=\"let pais of escogidos\"  [routerLink]=\"['/unirse-ciudad/', pais['pais'] ]\">\r\n        <img src=\"./assets/banderas/{{pais['imagen']}}\" >\r\n        <p class=\"destacado\">{{ pais[\"pais\"] }}</p>         \r\n    </div> \r\n</div>\r\n<br>\r\n\r\n","import { Component, OnInit, Input, OnDestroy, ElementRef, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute }  from '@angular/router';\r\nimport {Router} from '@angular/router';\r\nimport {UsuarioFirestoreService} from '../../services/firestore/usuario-firestore.service';\r\nimport {OpinionesFirestoreService} from '../../services/firestore/opiniones-firestore.service';\r\nimport {FirestoreService} from '../../services/firestore/firestore.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {Viaje, IViaje} from '../../interfaces/viaje';\r\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\r\nimport { Observable } from 'rxjs';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport {finalize} from 'rxjs/operators';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Usuario } from 'src/app/interfaces/usuario';\r\nimport { ISolicitud,Solicitud } from '../../interfaces/solicitud';\r\nimport {SolicitudFirestoreService} from '../../services/firestore/solicitud-firestore.service';\r\nimport { Params } from '@angular/router';\r\nimport { AuthService } from '../../services/auth.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-viaje',\r\n  templateUrl: './viaje.component.html',\r\n  styleUrls: ['./viaje.component.scss']\r\n})\r\n\r\nexport class ViajeComponent implements OnInit {\r\n\r\n  /* Array de prueba para los carouseles en caso de encontrarse offline\r\n\r\n  public slides = [\r\n    { src: \"../../../assets/person-1.jpg\"},\r\n    { src: \"../../../assets/person-2.jpg\" },\r\n    { src: \"../../../assets/person-3.jpg\" },\r\n    { src: \"../../../assets/person-4.jpg\" },\r\n    { src: \"../../../assets/person-5.jpg\" },\r\n    { src: \"../../../assets/person-6.jpg\" }\r\n  ];\r\n\r\n  public slides2 = [\r\n    { src: \"../../../assets/Amsterdam-01.jpg\"},\r\n    { src: \"../../../assets/Amsterdam-02.jpg\" },\r\n    { src: \"../../../assets/Amsterdam-03.jpg\" },\r\n    { src: \"../../../assets/Amsterdam-04.jpg\" }\r\n  ];\r\n  */\r\n\r\n  public slides3 = [];\r\n\r\n  public solicitudes = [];\r\n\r\n  public usuarios_viaje = [];\r\n  public img_usuarios_viaje = [];\r\n\r\n  public links: string[];\r\n\r\n  public nombreOrganizador;\r\n\r\n\r\n  public show = true;\r\n  public payButton = false;\r\n  public alreadyPaid = false;\r\n  public pendienteButton = false;\r\n\r\n\r\n  @ViewChild('imageUser') inputImageUser;\r\n  uploadPercent: Observable<number>;\r\n  urlImage: Observable<string>;\r\n  myUrl = \"\";\r\n\r\n  public viajes:Viaje[];\r\n  viaje:Viaje;\r\n\r\n  private db:AngularFirestore;\r\n  constructor(private _route:ActivatedRoute,\r\n              private _router: Router,\r\n              private storage: AngularFireStorage,\r\n              private firestoreServiceUser: UsuarioFirestoreService,\r\n              private firestoreServiceViaje: FirestoreService,\r\n              private firestoreServiceOpiniones: OpinionesFirestoreService,\r\n              private firestoreServiceSolicitud:SolicitudFirestoreService\r\n              ) {\r\n                \r\n                /* Inicializaciones */\r\n                this.viajes = [];\r\n                this.viaje = new Viaje();\r\n                this.solicitudes = [];\r\n                this.usuarios_viaje = [];\r\n               }\r\n\r\n  /* Funci√≥n que selecciona el tipo de bot√≥n a mostar al usuraio en un viaje\r\n     Si el usuario no se ha apuntado y es viajero se le da la opci√≥n de apuntarse,\r\n     si el usuario viajero no ha pagado pero est√° apuntado puede pagar\r\n     si el usuario ya ha pagado no se le muestran los botones pues no los necesita*/\r\n\r\n  showButtonJoin(solicitudes:Solicitud[]){\r\n    if(localStorage.getItem('tipo') == 'organizador'){\r\n      this.show = false;\r\n    }else{ // Es tipo viajero y hay que mirar las solicitudes\r\n      for(var i=0; i<solicitudes.length; i++){\r\n        if(solicitudes[i].idUsuario == localStorage.getItem('usuario') ){\r\n          this.show=false; // El usuario ya se ha apuntado luego se elimina la posibilidad\r\n          if(solicitudes[i].estado == 'aceptado'){\r\n            this.payButton=true;  //Mostramos bot√≥n de pago\r\n          }else if(solicitudes[i].estado == 'pendiente'){\r\n            this.pendienteButton=true;\r\n          }else if(solicitudes[i].estado == 'pagado'){\r\n            this.pendienteButton=false;// La solicitud ya no esta pendiente\r\n            this.payButton=false;      // No mostramos bot√≥n pago si ya ha pagado\r\n            this.alreadyPaid = true;   // Activamos mensaje de confimraci√≥n de pago\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }   \r\n  \r\n  /*  Funci√≥n que une a una persona a la base de datos en el apartado de solicitues para el viaje en cuesti√≥n\r\n      Se activa al pinchar sobre el bot√≥n de unirse */\r\n\r\n  unirse(){\r\n      var new_solicitud:Solicitud = new Solicitud();\r\n      new_solicitud.idUsuario = localStorage.getItem('usuario');\r\n      new_solicitud.idViaje = this._route.snapshot.paramMap.get('id');\r\n      new_solicitud.estado = \"pendiente\";\r\n      this.firestoreServiceViaje.getViaje(this._route.snapshot.paramMap.get('id')).then((elem) => {\r\n        new_solicitud.idOrganizador = elem.email;\r\n        this.firestoreServiceSolicitud.createSolicitud(new_solicitud);\r\n      });\r\n      \r\n\r\n  }\r\n  /* Esta funci√≥n abre el PopUp de pago */\r\n\r\n  abridPopUpPagar(){\r\n    document.getElementById(\"myFormPagar\").style.display = \"block\";\r\n  }\r\n\r\n  /* Esta funci√≥n cierra el PopUp de pago */\r\n\r\n  close1():void {\r\n    document.getElementById(\"myFormPagar\").style.display = \"none\";\r\n  }\r\n\r\n  /*  Funci√≥n que une actualiza en la solicitud de la persona el estado de aceptado a pagado\r\n      Se activa al pinchar sobre el bot√≥n de pagar */\r\n\r\n  pagar(){\r\n    this.firestoreServiceSolicitud.getSolicitudesByTripId(this._route.snapshot.paramMap.get('id')).subscribe(res=>{\r\n      var i;\r\n      var new_solicitud:Solicitud = new Solicitud();\r\n      for(i=0; i<res.length; i++){\r\n        if(res[i].idUsuario == localStorage.getItem('usuario')){\r\n          new_solicitud = res[i];\r\n          new_solicitud.estado = \"pagado\";\r\n          this.firestoreServiceSolicitud.updateSolicitud(new_solicitud);\r\n        }\r\n      }  \r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // El viaje a Roma es: lWdwEvTbnVAptd1xpr3Z\r\n\r\n    // Obtenemos el id a partir de la ruta de forma autom√°tica\r\n    var tripId = this._route.snapshot.paramMap.get('id');\r\n    \r\n    /*SI SE INTENTA ACCEDER A ESTA PAGINA SIN HABER INICIADO SESION RETORNAREMOS\r\n    A LA PAGINA PRINCIPAL */\r\n    if (localStorage.getItem('usuario')==null){\r\n      localStorage.clear();\r\n      console.log(\"Any user is logged\");\r\n      var pagInicio = window.location.origin + '/page1'; \r\n      window.location.assign(pagInicio);\r\n    }\r\n    \r\n    var tripAux = this.firestoreServiceViaje.getViaje(tripId).then((elem) => {\r\n\r\n      var tripAux:Viaje = new Viaje();\r\n      tripAux.continente = elem.continente;\r\n      tripAux.ciudad = elem.ciudad;\r\n      tripAux.descripcion = elem.descripcion;\r\n      tripAux.duracion = elem.duracion;\r\n      tripAux.email = elem.email;\r\n      tripAux.fin = elem.fin;\r\n      tripAux.id = elem.id;\r\n      tripAux.img = elem.img;\r\n      tripAux.inicio = elem.inicio;\r\n      tripAux.limitePago = elem.limitePago;\r\n      tripAux.limiteUnion = elem.limiteUnion;\r\n      tripAux.maximo = elem.maximo;\r\n      tripAux.pais = elem.pais;\r\n      tripAux.precio = elem.precio;\r\n      tripAux.servicios = elem.servicios;\r\n      tripAux.tlf = elem.tlf;\r\n      tripAux.unidas = elem.unidas;\r\n      tripAux.viajeros = elem.viajeros; //este valor de momento no es de utilidad\r\n      var tripAux2 = elem;\r\n\r\n      this.viaje = tripAux;\r\n\r\n      /* Esta funci√≥n devuelve un array de im√°genes para el viaje en el que nos encontremos*/\r\n\r\n      this.firestoreServiceViaje.getSlides(this.viaje.id).subscribe(res=>{\r\n        this.slides3 = [];\r\n          var i;\r\n          for (i = 0; i<res.length ; i++){\r\n            this.slides3.push({src: res[i].url});\r\n          }\r\n        if(this.slides3.length==0){\r\n          this.slides3.push({src: tripAux.img});\r\n        }\r\n      });\r\n\r\n      this.firestoreServiceUser.getUsuariosByEmail(tripAux.email).subscribe(res=>{\r\n        this.nombreOrganizador = res[0].nombre;\r\n      });\r\n\r\n      /* Esta funci√≥n devuelve el array de solicitudes de un viaje */\r\n        this.firestoreServiceSolicitud.getSolicitudesByTripId(this.viaje.id).subscribe(res=>{\r\n          this.solicitudes = []\r\n          var i;\r\n          for(i=0; i<res.length; i++){\r\n            this.solicitudes.push({idUsuario: res[i].idUsuario, estado: res[i].estado});\r\n          }\r\n\r\n          // Mostaremos el bot√≥n de unirse si el usuario no tiene el viaje entre sus solicitures y es viajero\r\n          this.showButtonJoin(this.solicitudes);\r\n\r\n          /* Esta funci√≥n devuelve un array con las imagenes de los usuarios en un viaje */\r\n          this.firestoreServiceUser.getUsuarios().subscribe(res=>{\r\n          this.usuarios_viaje = []\r\n          var i, j;\r\n          // Se recorre el array de solicitudes\r\n          for(i=0; i<this.solicitudes.length; i++){ \r\n            // Recorremos la base de datos\r\n            for(j=0; j<res.length; j++){ \r\n              // Encontramos el usuario de la solicitud\r\n              if(this.solicitudes[i].idUsuario == res[j].id && (this.solicitudes[i].estado=='aceptado' || this.solicitudes[i].estado=='pagado')){ \r\n                // Guardamos las imagenes para el carousel\r\n                this.usuarios_viaje.push({src: res[j].image});\r\n                \r\n                if (res[j].tipo == 'viajero') {\r\n                  this.img_usuarios_viaje.push(['perfil-viajero',res[j].id]);\r\n                }else{\r\n                  this.img_usuarios_viaje.push(['perfil-organizador',res[j].id]);\r\n                }\r\n              }\r\n            } \r\n            tripAux2.unidas = String(this.usuarios_viaje.length);\r\n            this.firestoreServiceViaje.updateViaje(tripAux2);\r\n          }\r\n        });    \r\n      });\r\n    \r\n   });\r\n  }\r\n}","<app-header titulo=\"Viaje \"></app-header>\r\n\r\n<div class=\"main_container_izq\">\r\n   <div class=\"titulo_viaje\">\r\n      <h1><b>Viaja a </b><span class=\"lugar\">{{viaje.ciudad}}</span></h1>\r\n   </div>\r\n   <div class=\"fotografia_viaje\">\r\n      <div class=\"container_carousel1\">\r\n         <carousel [slides]=\"slides3\"></carousel>\r\n      </div>\r\n   </div>\r\n\r\n   <div class=\"informacion_viaje\">\r\n      <h2 class=\"precio\" style=\"display: inline-block\" >{{viaje.precio}}‚Ç¨</h2>\r\n      <img src=\"./assets/hotel.png\" style=\"padding-left: 3%\" height=\"10%\" width=\"10%\"/>\r\n      <img src=\"./assets/plane.png\" style=\"padding-left: 3%\" height=\"10%\" width=\"10%\"/>\r\n      <img src=\"./assets/fork.png\" style=\"padding-left: 3%\" height=\"10%\" width=\"10%\"/>\r\n      <div style= \"display: inline-block\" >\r\n     \r\n      </div>\r\n      <p>Contacta con nostros a traves de:</p>\r\n      <img src=\"./assets/phone.png\" style=\"padding-right: 3%\" height=\"6%\" width=\"6%\"/>\r\n      <p class=\"bold\" style=\"display: inline-block;\">{{viaje.tlf}}</p>\r\n      <br>\r\n      <img src=\"./assets/envelope.png\" style=\"padding-right: 3%\" height=\"6%\" width=\"6%\"/>\r\n      <p class=\"bold\" style=\"display: inline-block;\">{{viaje.email}}</p>\r\n\r\n   </div>\r\n\r\n   <!--Botones: Implemetacion en la funci√≥n showButtonJoin del typescript-->\r\n   <div *ngIf=\"show\" class=\"button\">\r\n      <button (click)=\"unirse()\" mat-raised-button color=\"primary\" style=\"height: 3em; width: 10em;\">Me uno al viaje</button>\r\n   </div>\r\n   <div *ngIf=\"payButton\" class=\"button\">\r\n      <button (click)=\"abridPopUpPagar()\" mat-raised-button color=\"primary\" style=\"height: 3em; width: 10em;\">Pagar</button>\r\n   </div>\r\n   <div *ngIf=\"alreadyPaid\" class=\"button\">\r\n      <button mat-stroked-button disabled style=\"height: 3em; width: 10em;\">Ya has pagado</button>\r\n   </div>\r\n   <div *ngIf=\"pendienteButton\" class=\"button\">\r\n      <button mat-stroked-button disabled style=\"height: 3em; width: 12em;\">Solicitud pendiente</button>\r\n   </div>\r\n\r\n</div>\r\n\r\n<div class=\"main_container_der\">\r\n   <p>Viaje organizado por <span class=\"organizador\">{{nombreOrganizador}}</span></p>\r\n   <p>Comienza el dia <span class=\"bold\">{{viaje.inicio}}</span></p>\r\n   <p>Termina el dia <span class=\"bold\">{{viaje.fin}}</span></p>\r\n   <p><span class=\"bold\">{{viaje.duracion}}</span></p>\r\n   <p style=\"text-align: justify; margin-right: 12%;\">\r\n      {{viaje.descripcion}}\r\n   </p>\r\n   <p>Con nosotros ya se vienen:</p>\r\n   <div class=\"container_carousel2\">\r\n      <carousel [slides]=\"usuarios_viaje\" [links]=\"img_usuarios_viaje\"></carousel>\r\n   </div>\r\n   <p>Termina el d√≠a <span class=\"bold\">{{viaje.limiteUnion}}</span></p>\r\n   <p>Fecha l√≠mite de pago: <span class=\"bold\">{{viaje.limitePago}}</span></p>\r\n</div>\r\n\r\n<div class=\"form-popup-Viajero\" id=\"myFormPagar\">\r\n   <form action=\"/action_page.php\" class=\"form-container\">\r\n     <h1><b>¬°Confirmaci√≥n para irte de aventura!</b></h1>\r\n     <br>\r\n     <div class=\"mensaje\">\r\n         <div class=\"nombre_individuoViajero\">\r\n           <b> ¬øEst√°s seguro de que deseas pagar este viaje?</b>\r\n         </div>\r\n         <br>\r\n         <div *ngIf=\"payButton\" class=\"eleccion1Viajero\">\r\n           <button (click)=\"pagar()\" mat-raised-button color=\"primary\" style=\"height: 3em; width: 10em;\">Pagar</button>\r\n        </div>\r\n        <div *ngIf=\"alreadyPaid\" class=\"eleccion1Viajero\">\r\n         <button mat-stroked-button disabled style=\"height: 3em; width: 10em;\">Ya has pagado</button>\r\n      </div>\r\n     </div>\r\n     <br>\r\n     <div *ngIf=\"payButton\" class=\"eleccion1Viajero\">\r\n      <button (click)=\"close1()\" mat-raised-button color=\"warn\" style=\"height: 3em; width: 10em;\">Close</button>\r\n     </div>\r\n     <div *ngIf=\"alreadyPaid\" class=\"eleccion1Viajero\">\r\n      <button (click)=\"close1()\" mat-raised-button color=\"primary\" style=\"height: 3em; width: 10em;\">Buscar m√°s viajes</button>\r\n   </div>\r\n   </form>\r\n </div>","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  \r\n  firebase: {\r\n    apiKey: \"AIzaSyCXDQ9k3UnMGVE_zrLZLijro-U9hdrQglU\",\r\n    authDomain: \"tripmefy-c7857.firebaseapp.com\",\r\n    databaseURL: \"https://tripmefy-c7857.firebaseio.com\",\r\n    projectId: \"tripmefy-c7857\",\r\n    storageBucket: \"tripmefy-c7857.appspot.com\",\r\n    messagingSenderId: \"106995985515\",\r\n    appId: \"1:106995985515:web:3242c6e367a437516cd52e\",\r\n    measurementId: \"G-782LX8ZY7Y\"\r\n  }\r\n  \r\n   \r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}